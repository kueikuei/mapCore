!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.mapCore=e()}(this,function(){"use strict";var n=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t};var h=function(u){return function(t,e,n){for(var i=-1,r=Object(t),o=n(t),s=o.length;s--;){var a=o[u?s:++i];if(!1===e(r[a],a,r))break}return t}}();var c=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i},j="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(t,e){return t(e={exports:{}},e.exports),e.exports}var s="object"==typeof j&&j&&j.Object===Object&&j,e="object"==typeof self&&self&&self.Object===Object&&self,a=s||e||Function("return this")(),i=a.Symbol,r=Object.prototype,o=r.hasOwnProperty,u=r.toString,l=i?i.toStringTag:void 0;var f=function(t){var e=o.call(t,l),n=t[l];try{t[l]=void 0;var i=!0}catch(t){}var r=u.call(t);return i&&(e?t[l]=n:delete t[l]),r},d=Object.prototype.toString;var g=function(t){return d.call(t)},p="[object Null]",v="[object Undefined]",y=i?i.toStringTag:void 0;var m=function(t){return null==t?void 0===t?v:p:y&&y in Object(t)?f(t):g(t)};var x=function(t){return null!=t&&"object"==typeof t},E="[object Arguments]";var w=function(t){return x(t)&&m(t)==E},_=Object.prototype,I=_.hasOwnProperty,b=_.propertyIsEnumerable,M=w(function(){return arguments}())?w:function(t){return x(t)&&I.call(t,"callee")&&!b.call(t,"callee")},S=Array.isArray;var N=function(){return!1},C=t(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?a.Buffer:void 0,o=(r?r.isBuffer:void 0)||N;t.exports=o}),L=9007199254740991,P=/^(?:0|[1-9]\d*)$/;var O=function(t,e){var n=typeof t;return!!(e=null==e?L:e)&&("number"==n||"symbol"!=n&&P.test(t))&&-1<t&&t%1==0&&t<e},R=9007199254740991;var T=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=R},A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Arguments]"]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object Boolean]"]=A["[object DataView]"]=A["[object Date]"]=A["[object Error]"]=A["[object Function]"]=A["[object Map]"]=A["[object Number]"]=A["[object Object]"]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object WeakMap]"]=!1;var D=function(t){return x(t)&&T(t.length)&&!!A[m(t)]};var F=function(e){return function(t){return e(t)}},G=t(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n&&s.process,o=function(){try{return r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=o}),q=G&&G.isTypedArray,k=q?F(q):D,z=Object.prototype.hasOwnProperty;var B=function(t,e){var n=S(t),i=!n&&M(t),r=!n&&!i&&C(t),o=!n&&!i&&!r&&k(t),s=n||i||r||o,a=s?c(t.length,String):[],u=a.length;for(var h in t)!e&&!z.call(t,h)||s&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||O(h,u))||a.push(h);return a},U=Object.prototype;var V=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||U)};var Y=function(e,n){return function(t){return e(n(t))}},X=Y(Object.keys,Object),W=Object.prototype.hasOwnProperty;var H=function(t){if(!V(t))return X(t);var e=[];for(var n in Object(t))W.call(t,n)&&"constructor"!=n&&e.push(n);return e};var J=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},K="[object AsyncFunction]",Z="[object Function]",Q="[object GeneratorFunction]",$="[object Proxy]";var tt=function(t){if(!J(t))return!1;var e=m(t);return e==Z||e==Q||e==K||e==$};var et=function(t){return null!=t&&T(t.length)&&!tt(t)};var nt=function(t){return et(t)?B(t):H(t)};var it=function(o,s){return function(t,e){if(null==t)return t;if(!et(t))return o(t,e);for(var n=t.length,i=s?n:-1,r=Object(t);(s?i--:++i<n)&&!1!==e(r[i],i,r););return t}}(function(t,e){return t&&h(t,e,nt)});var rt=function(t){return t};var ot=function(t){return"function"==typeof t?t:rt};var st,at=function(t,e){return(S(t)?n:it)(t,ot(e))},ut=a["__core-js_shared__"],ht=(st=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||""))?"Symbol(src)_1."+st:"";var ct=function(t){return!!ht&&ht in t},lt=Function.prototype.toString;var ft=function(t){if(null!=t){try{return lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},dt=/^\[object .+?Constructor\]$/,gt=Function.prototype,pt=Object.prototype,vt=gt.toString,yt=pt.hasOwnProperty,mt=RegExp("^"+vt.call(yt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var xt=function(t){return!(!J(t)||ct(t))&&(tt(t)?mt:dt).test(ft(t))};var Et=function(t,e){return null==t?void 0:t[e]};var wt=function(t,e){var n=Et(t,e);return xt(n)?n:void 0},_t=function(){try{var t=wt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var It=function(t,e,n){"__proto__"==e&&_t?_t(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var bt=function(t,e){return t===e||t!=t&&e!=e},Mt=Object.prototype.hasOwnProperty;var St=function(t,e,n){var i=t[e];Mt.call(t,e)&&bt(i,n)&&(void 0!==n||e in t)||It(t,e,n)};var Nt=function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=i?i(n[a],t[a],a,n,t):void 0;void 0===u&&(u=t[a]),r?It(n,a,u):St(n,a,u)}return n};var Ct=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},Lt=Math.max;var Pt=function(o,s,a){return s=Lt(void 0===s?o.length-1:s,0),function(){for(var t=arguments,e=-1,n=Lt(t.length-s,0),i=Array(n);++e<n;)i[e]=t[s+e];e=-1;for(var r=Array(s+1);++e<s;)r[e]=t[e];return r[s]=a(i),Ct(o,this,r)}};var Ot=function(t){return function(){return t}},Rt=_t?function(t,e){return _t(t,"toString",{configurable:!0,enumerable:!1,value:Ot(e),writable:!0})}:rt,Tt=800,At=16,Dt=Date.now;var Ft=function(n){var i=0,r=0;return function(){var t=Dt(),e=At-(t-r);if(r=t,0<e){if(++i>=Tt)return arguments[0]}else i=0;return n.apply(void 0,arguments)}}(Rt);var Gt=function(t,e){return Ft(Pt(t,e,rt),t+"")};var qt=function(t,e,n){if(!J(n))return!1;var i=typeof e;return!!("number"==i?et(n)&&O(e,n.length):"string"==i&&e in n)&&bt(n[e],t)};var kt=function(a){return Gt(function(t,e){var n=-1,i=e.length,r=1<i?e[i-1]:void 0,o=2<i?e[2]:void 0;for(r=3<a.length&&"function"==typeof r?(i--,r):void 0,o&&qt(e[0],e[1],o)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var s=e[n];s&&a(t,s,n,r)}return t})};var zt=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},jt=Object.prototype.hasOwnProperty;var Bt=function(t){if(!J(t))return zt(t);var e=V(t),n=[];for(var i in t)("constructor"!=i||!e&&jt.call(t,i))&&n.push(i);return n};var Ut=function(t){return et(t)?B(t,!0):Bt(t)},Vt=kt(function(t,e){Nt(e,Ut(e),t)});function Yt(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return Xt(e),e;throw new Error("No valid coordinates")}function Xt(t){if(1<t.length&&"number"==typeof t[0]&&"number"==typeof t[1])return!0;if(Array.isArray(t[0])&&t[0].length)return Xt(t[0]);throw new Error("coordinates must only contain numbers")}function Wt(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}var Ht=function(t){if(!t)throw new Error("obj is required");var e=Yt(t);if(1<e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return e;throw new Error("Coordinate is not a valid Point")},Jt=Yt,Kt=Wt,Zt=function(t){if(!t)throw new Error("geojson is required");var e=Wt(t);if(e)return e.type},Qt=Ht,$t=Jt,te=function(t,e,n){if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i,r,o=Qt(t),s=$t(e),a=e.geometry?e.geometry.type:e.type,u=e.bbox;if(u&&!1==(i=o,(r=u)[0]<=i[0]&&r[1]<=i[1]&&r[2]>=i[0]&&r[3]>=i[1]))return!1;"Polygon"===a&&(s=[s]);for(var h=0,c=!1;h<s.length&&!c;h++)if(ee(o,s[h][0],n)){for(var l=!1,f=1;f<s[h].length&&!l;)ee(o,s[h][f],!n)&&(l=!0),f++;l||(c=!0)}return c};function ee(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],u=e[o][0],h=e[o][1];if(t[1]*(s-u)+a*(u-t[0])+h*(t[0]-s)==0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(h-t[1])<=0)return!n;a>t[1]!=h>t[1]&&t[0]<(u-s)*(t[1]-a)/(h-a)+s&&(i=!i)}return i}function ne(t,e,n){if(null!==t){var i,r,o,s,a,u,h,c,l,f,d=0,g=0,p=t.type,v="FeatureCollection"===p,y="Feature"===p,m=v?t.features.length:1;for(i=0;i<m;i++)for(h=(f=!!(l=v?t.features[i].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1,r=0;r<h;r++){var x=0;if(null!==(u=f?l.geometries[r]:l)){c=u.coordinates;var E=u.type;switch(d=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":e(c,g,i,x),g++,x++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++)e(c[o],g,i,x),g++,"MultiPoint"===E&&x++;"LineString"===E&&x++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++){for(s=0;s<c[o].length-d;s++)e(c[o][s],g,i,x),g++;"MultiLineString"===E&&x++}"Polygon"===E&&x++;break;case"MultiPolygon":for(o=0;o<c.length;o++){for(s=0;s<c[o].length;s++)for(a=0;a<c[o][s].length-d;a++)e(c[o][s][a],g,i,x),g++;x++}break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)ne(u.geometries[o],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function ie(t,r,o,e){var s=o;return ne(t,function(t,e,n,i){s=0===e&&void 0===o?t:r(s,t,e,n,i)},e),s}function re(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function oe(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function se(t,e){var n,i,r,o,s,a,u,h,c=0,l="FeatureCollection"===t.type,f="Feature"===t.type,d=l?t.features.length:1;for(n=0;n<d;n++){for(a=l?t.features[n].geometry:f?t.geometry:t,h=l?t.features[n].properties:f?t.properties:{},s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,c,h);break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)e(o.geometries[i],c,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,c,h);c++}}function ae(t,o){se(t,function(t,n,i){var r,e=null===t?null:t.type;switch(e){case null:case"Point":case"LineString":case"Polygon":return void o(he(t,i),n,0)}switch(e){case"MultiPoint":r="Point";break;case"MultiLineString":r="LineString";break;case"MultiPolygon":r="Polygon"}t.coordinates.forEach(function(t,e){o(he({type:r,coordinates:t},i),n,e)})})}function ue(t,a){ae(t,function(i,r,o){var s=0;if(i.geometry){var t=i.geometry.type;"Point"!==t&&"MultiPoint"!==t&&ie(i,function(t,e){var n=ce([t,e],i.properties);return a(n,r,o,s),s++,e})}})}function he(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}function ce(t,e){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");return{type:"Feature",properties:e||{},geometry:{type:"LineString",coordinates:t}}}function le(t,e){if(!t)throw new Error("geojson is required");var n=t.geometry?t.geometry.type:t.type;if(!n)throw new Error("invalid geojson");if("FeatureCollection"===n)throw new Error("FeatureCollection is not supported");if("GeometryCollection"===n)throw new Error("GeometryCollection is not supported");var i=t.geometry?t.geometry.coordinates:t.coordinates;if(!i)throw new Error("geojson must contain coordinates");switch(n){case"LineString":return void e(i,0,0);case"Polygon":case"MultiLineString":for(var r=0,o=0;o<i.length;o++)"MultiLineString"===n&&(r=o),e(i[o],o,r);return;case"MultiPolygon":for(var s=0;s<i.length;s++)for(var a=0;a<i[s].length;a++)e(i[s][a],a,s);return;default:throw new Error(n+" geometry not supported")}}var fe=Object.freeze({coordEach:ne,coordReduce:ie,propEach:re,propReduce:function(t,n,i){var r=i;return re(t,function(t,e){r=0===e&&void 0===i?t:n(r,t,e)}),r},featureEach:oe,featureReduce:function(t,n,i){var r=i;return oe(t,function(t,e){r=0===e&&void 0===i?t:n(r,t,e)}),r},coordAll:function(t){var e=[];return ne(t,function(t){e.push(t)}),e},geomEach:se,geomReduce:function(t,i,r){var o=r;return se(t,function(t,e,n){o=0===e&&void 0===r?t:i(o,t,e,n)}),o},flattenEach:ae,flattenReduce:function(t,i,r){var o=r;return ae(t,function(t,e,n){o=0===e&&0===n&&void 0===r?t:i(o,t,e,n)}),o},segmentEach:ue,segmentReduce:function(t,r,o){var s=o,a=!1;return ue(t,function(t,e,n,i){s=!1===a&&void 0===o?t:r(s,t,e,n,i),a=!0}),s},feature:he,lineString:ce,lineEach:le,lineReduce:function(t,i,r){var o=r;return le(t,function(t,e,n){o=0===e&&void 0===r?t:i(o,t,e,n)}),o}}),de=fe.coordEach,ge=function(t){var e=[1/0,1/0,-1/0,-1/0];return de(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e},pe=Jt,ve=function(t,e,n){for(var i=pe(t),r=pe(e),o=0;o<r.length-1;o++){var s=!1;if(n&&(0===o&&(s="start"),o===r.length-2&&(s="end"),0===o&&o+1===r.length-1&&(s="both")),ye(r[o],r[o+1],i,s))return!0}return!1};function ye(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?"start"===i?Math.abs(s)>=Math.abs(a)?0<s?t[0]<n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<t[0]:0<a?t[1]<n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<t[1]:"end"===i?Math.abs(s)>=Math.abs(a)?0<s?t[0]<=n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<=t[0]:0<a?t[1]<=n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<=t[1]:"both"===i?Math.abs(s)>=Math.abs(a)?0<s?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:0<a?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1]:void 0:Math.abs(s)>=Math.abs(a)?0<s?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<a?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}var me=Kt,xe=Jt,Ee=Zt;function we(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function _e(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ie(t,e,n,i){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(n&&4!==n.length)throw new Error("bbox must be an Array of 4 numbers");if(i&&-1===["string","number"].indexOf(typeof i))throw new Error("id must be a number or a string");var r={type:"Feature"};return i&&(r.id=i),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function be(t,e,n,i){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!De(t[0])||!De(t[1]))throw new Error("Coordinates must contain numbers");return Ie({type:"Point",coordinates:t},e,n,i)}function Me(t,e,n,i){if(!t)throw new Error("No coordinates passed");for(var r=0;r<t.length;r++){var o=t[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===r&&0===s&&!De(o[0][0])||!De(o[0][1]))throw new Error("Coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return Ie({type:"Polygon",coordinates:t},e,n,i)}function Se(t,e,n,i){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!De(t[0][1])||!De(t[0][1]))throw new Error("Coordinates must contain numbers");return Ie({type:"LineString",coordinates:t},e,n,i)}function Ne(t,e,n,i){if(!t)throw new Error("No coordinates passed");return Ie({type:"MultiLineString",coordinates:t},e,n,i)}function Ce(t,e,n,i){if(!t)throw new Error("No coordinates passed");return Ie({type:"MultiPoint",coordinates:t},e,n,i)}function Le(t,e,n,i){if(!t)throw new Error("No coordinates passed");return Ie({type:"MultiPolygon",coordinates:t},e,n,i)}var Pe={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},Oe={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function Re(t,e){if(null==t)throw new Error("radians is required");var n=Pe[e||"kilometers"];if(!n)throw new Error("units is invalid");return t*n}function Te(t,e){if(null==t)throw new Error("distance is required");var n=Pe[e||"kilometers"];if(!n)throw new Error("units is invalid");return t/n}function Ae(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function De(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}var Fe={feature:Ie,geometry:function(t,e,n){if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(n&&4!==n.length)throw new Error("bbox must be an Array of 4 numbers");var i;switch(t){case"Point":i=be(e).geometry;break;case"LineString":i=Se(e).geometry;break;case"Polygon":i=Me(e).geometry;break;case"MultiPoint":i=Ce(e).geometry;break;case"MultiLineString":i=Ne(e).geometry;break;case"MultiPolygon":i=Le(e).geometry;break;default:throw new Error(t+" is invalid")}return n&&(i.bbox=n),i},featureCollection:function(t,e,n){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var i={type:"FeatureCollection"};return n&&(i.id=n),e&&(i.bbox=e),i.features=t,i},geometryCollection:function(t,e,n,i){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return Ie({type:"GeometryCollection",geometries:t},e,n,i)},point:be,multiPoint:Ce,lineString:Se,multiLineString:Ne,polygon:Me,multiPolygon:Le,radiansToDistance:Re,distanceToRadians:Te,distanceToDegrees:function(t,e){return Ae(Te(t,e))},radians2degrees:Ae,degrees2radians:function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180},bearingToAngle:function(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},convertDistance:function(t,e,n){if(null==t)throw new Error("distance is required");if(!(0<=t))throw new Error("distance must be a positive number");return Re(Te(t,e),n||"kilometers")},convertArea:function(t,e,n){if(null==t)throw new Error("area is required");if(!(0<=t))throw new Error("area must be a positive number");var i=Oe[e||"meters"];if(!i)throw new Error("invalid original units");var r=Oe[n||"kilometers"];if(!r)throw new Error("invalid final units");return t/i*r},round:function(t,e){if(null==t||isNaN(t))throw new Error("num is required");if(e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},isNumber:De},Ge=ke,qe=ke;function ke(t,e,n,i,r){!function t(e,n,i,r,o){for(;i<r;){if(600<r-i){var s=r-i+1,a=n-i+1,u=Math.log(s),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(s-h)/s)*(a-s/2<0?-1:1),l=Math.max(i,Math.floor(n-a*h/s+c)),f=Math.min(r,Math.floor(n+(s-a)*h/s+c));t(e,n,l,f,o)}var d=e[n],g=i,p=r;for(ze(e,i,n),0<o(e[r],d)&&ze(e,i,r);g<p;){for(ze(e,g,p),g++,p--;o(e[g],d)<0;)g++;for(;0<o(e[p],d);)p--}0===o(e[i],d)?ze(e,i,p):ze(e,++p,r),p<=n&&(i=p+1),n<=p&&(r=p-1)}}(t,e,n||0,i||t.length-1,r||je)}function ze(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function je(t,e){return t<e?-1:e<t?1:0}Ge.default=qe;var Be=Ve,Ue=Ve;function Ve(t,e){if(!(this instanceof Ve))return new Ve(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function Ye(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function Xe(t,e){We(t,0,t.children.length,e,t)}function We(t,e,n,i,r){r||(r=en(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],He(r,t.leaf?i(o):o);return r}function He(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Je(t,e){return t.minX-e.minX}function Ke(t,e){return t.minY-e.minY}function Ze(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Qe(t){return t.maxX-t.minX+(t.maxY-t.minY)}function $e(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function tn(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function en(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function nn(t,e,n,i,r){for(var o,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(o=e+Math.ceil((n-e)/i/2)*i,Ge(t,o,e,n,r),s.push(e,o,o,n))}Ve.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!tn(t,e))return n;for(var r,o,s,a,u=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],tn(t,a=e.leaf?i(s):s)&&(e.leaf?n.push(s):$e(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!tn(t,e))return!1;for(var i,r,o,s,a=[];e;){for(i=0,r=e.children.length;i<r;i++)if(o=e.children[i],tn(t,s=e.leaf?n(o):o)){if(e.leaf||$e(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=en([]),this},remove:function(t,e){if(!t)return this;for(var n,i,r,o,s=this.data,a=this.toBBox(t),u=[],h=[];s||u.length;){if(s||(s=u.pop(),i=u[u.length-1],n=h.pop(),o=!0),s.leaf&&-1!==(r=Ye(t,s.children,e)))return s.children.splice(r,1),u.push(s),this._condense(u),this;o||s.leaf||!$e(s,a)?i?(n++,s=i.children[n],o=!1):s=null:(u.push(s),h.push(n),n=0,s=(i=s).children[0])}return this},toBBox:function(t){return t},compareMinX:Je,compareMinY:Ke,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var r,o=n-e+1,s=this._maxEntries;if(o<=s)return Xe(r=en(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),(r=en([])).leaf=!1,r.height=i;var a,u,h,c,l=Math.ceil(o/s),f=l*Math.ceil(Math.sqrt(s));for(nn(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(nn(t,a,h=Math.min(a+f-1,n),l,this.compareMinY),u=a;u<=h;u+=l)c=Math.min(u+l-1,h),r.children.push(this._build(t,u,c,i-1));return Xe(r,this.toBBox),r},_chooseSubtree:function(t,e,n,i){for(var r,o,s,a,u,h,c,l,f,d;i.push(e),!e.leaf&&i.length-1!==n;){for(c=l=1/0,r=0,o=e.children.length;r<o;r++)u=Ze(s=e.children[r]),f=t,d=s,(h=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-u)<l?(l=h,c=u<c?u:c,a=s):h===l&&u<c&&(c=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,r=n?t:i(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),He(s,r);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),s=en(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,Xe(n,this.toBBox),Xe(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=en([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Xe(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var i,r,o,s,a,u,h,c,l,f,d,g,p,v;for(u=h=1/0,i=e;i<=n-e;i++)r=We(t,0,i,this.toBBox),o=We(t,i,n,this.toBBox),l=r,f=o,void 0,d=Math.max(l.minX,f.minX),g=Math.max(l.minY,f.minY),p=Math.min(l.maxX,f.maxX),v=Math.min(l.maxY,f.maxY),s=Math.max(0,p-d)*Math.max(0,v-g),a=Ze(r)+Ze(o),s<u?(u=s,c=i,h=a<h?a:h):s===u&&a<h&&(h=a,c=i);return c},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:Je,r=t.leaf?this.compareMinY:Ke;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);var r,o,s=this.toBBox,a=We(t,0,e,s),u=We(t,n-e,n,s),h=Qe(a)+Qe(u);for(r=e;r<n-e;r++)o=t.children[r],He(a,t.leaf?s(o):o),h+=Qe(a);for(r=n-e-1;e<=r;r--)o=t.children[r],He(u,t.leaf?s(o):o),h+=Qe(u);return h},_adjustParentBBoxes:function(t,e,n){for(var i=n;0<=i;i--)He(e[i],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Xe(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Be.default=Ue;var rn=fe.featureEach,on=fe.coordEach,sn=function(t){var e=Be(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=an(e)).bbox=e}else t.bbox=t.bbox?t.bbox:un(t);return Be.prototype.insert.call(this,t)},e.load=function(t){var n=[];return Array.isArray(t)?t.forEach(function(t){var e=an(t);e.bbox=t,n.push(e)}):rn(t,function(t){t.bbox=t.bbox?t.bbox:un(t),n.push(t)}),Be.prototype.load.call(this,n)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=an(e)).bbox=e}return Be.prototype.remove.call(this,t)},e.clear=function(){return Be.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Be.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Be.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Be.prototype.all.call(this)}},e.toJSON=function(){return Be.prototype.toJSON.call(this)},e.fromJSON=function(t){return Be.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:un(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e};function an(t){var e=[t[0],t[1]],n=[t[0],t[3]],i=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],i,n,e]]}}}function un(t){var e=[1/0,1/0,-1/0,-1/0];return on(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}var hn=Jt,cn=fe.flattenEach,ln=Fe.lineString,fn=Fe.featureCollection,dn=function(t){if(!t)throw new Error("geojson is required");var e=[];return cn(t,function(t){!function(i,r){var t=[],e=i.geometry;switch(e.type){case"Polygon":t=hn(e);break;case"LineString":t=[hn(e)]}t.forEach(function(t){var e,h,c,n=(e=t,h=i.properties,c=[],e.reduce(function(t,e){var n,i,r,o,s,a,u=ln([t,e],h);return u.bbox=(i=e,r=(n=t)[0],o=n[1],s=i[0],a=i[1],[r<s?r:s,o<a?o:a,s<r?r:s,a<o?o:a]),c.push(u),e}),c);n.forEach(function(t){t.id=r.length,r.push(t)})})}(t,e)}),fn(e)};var gn=Jt,pn=Fe.point,vn=fe.featureEach,yn=Fe.featureCollection,mn=function(t,e){var r={},o=[];if("LineString"===t.type&&(t=Fe.feature(t)),"LineString"===e.type&&(e=Fe.feature(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var n=xn(t,e);return n&&o.push(n),yn(o)}var s=sn();return s.load(dn(e)),vn(dn(t),function(i){vn(s.search(i),function(t){var e=xn(i,t);if(e){var n=gn(e).join(",");r[n]||(r[n]=!0,o.push(e))}})}),yn(o)};function xn(t,e){var n=gn(t),i=gn(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],u=i[0][0],h=i[0][1],c=i[1][0],l=i[1][1],f=(l-h)*(s-r)-(c-u)*(a-o),d=(c-u)*(o-h)-(l-h)*(r-u),g=(s-r)*(o-h)-(a-o)*(r-u);if(0===f)return null;var p=d/f,v=g/f;return 0<=p&&p<=1&&0<=v&&v<=1?pn([r+p*(s-r),o+p*(a-o)]):null}var En=Jt,wn=Fe.lineString,_n=Fe.multiLineString,In=Fe.featureCollection,bn=function(t,e){var n,i=(n=t).geometry?n.geometry.type:n.type,r=En(t);if(e=e||t.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(i){case"Polygon":return Mn(r,e);case"MultiPolygon":var o=[];return r.forEach(function(t){o.push(Mn(t,e))}),In(o);default:throw new Error("geom "+i+" not supported")}};function Mn(t,e){return 1<t.length?_n(t,e):wn(t[0],e)}var Sn=Kt,Nn=Zt;function Cn(t,e){for(var n=!1,i=!1,r=t.coordinates.length,o=0;o<r&&!n&&!i;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),On(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:i=!0}o++}return n&&i}function Ln(t,e){return 0<mn(t,bn(e)).features.length}function Pn(t,e){for(var n,i,r=!1,o=!1,s=t.coordinates[0].length,a=0;a<s&&r&&o;)n=e,i=Fe.point(t.coordinates[0][a]),te(i,n)?r=!0:o=!0,a++;return o&&o}function On(t,e,n,i){var r=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1];return 0==r*a-o*s&&(i?Math.abs(s)>=Math.abs(a)?0<s?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:0<a?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?0<s?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:0<a?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Rn=t(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),Tn=t(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r}),An=t(function(t){var a=Array.prototype.slice,u=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var i,r;if(h(t)||h(e))return!1;if(t.prototype!==e.prototype)return!1;if(Tn(t))return!!Tn(e)&&(t=a.call(t),e=a.call(e),u(t,e,n));if(c(t)){if(!c(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var o=Rn(t),s=Rn(e)}catch(t){return!1}if(o.length!=s.length)return!1;for(o.sort(),s.sort(),i=o.length-1;0<=i;i--)if(o[i]!=s[i])return!1;for(i=o.length-1;0<=i;i--)if(r=o[i],!u(t[r],e[r],n))return!1;return typeof t==typeof e}(t,e,n))};function h(t){return null==t}function c(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(0<t.length&&"number"!=typeof t[0]))}}),Dn=Ht;function Fn(t,e,n){if(!0===n)return(Fn(e,t)+180)%360;var i=Math.PI/180,r=180/Math.PI,o=Dn(t),s=Dn(e),a=i*o[0],u=i*s[0],h=i*o[1],c=i*s[1],l=Math.sin(u-a)*Math.cos(c),f=Math.cos(h)*Math.sin(c)-Math.sin(h)*Math.cos(c)*Math.cos(u-a);return r*Math.atan2(l,f)}var Gn=Fn,qn=Ht,kn=Fe.radiansToDistance,zn=function(t,e,n){var i=Math.PI/180,r=qn(t),o=qn(e),s=i*(o[1]-r[1]),a=i*(o[0]-r[0]),u=i*r[1],h=i*o[1],c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(h);return kn(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n)},jn=Ht,Bn=Fe.point,Un=Fe.distanceToRadians,Vn=function(t,e,n,i){var r=Math.PI/180,o=180/Math.PI,s=jn(t),a=r*s[0],u=r*s[1],h=r*n,c=Un(e,i),l=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(h)),f=a+Math.atan2(Math.sin(h)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(l));return Bn([o*f,o*l])},Yn=Fe.point,Xn=Jt,Wn=Fe.lineString,Hn=fe.flattenEach,Jn=function(t,f,d){var e=t.geometry?t.geometry.type:t.type;if("LineString"!==e&&"MultiLineString"!==e)throw new Error("lines must be LineString or MultiLineString");var g=Yn([1/0,1/0],{dist:1/0}),p=0;return Hn(t,function(t){for(var e=Xn(t),n=0;n<e.length-1;n++){var i=Yn(e[n]);i.properties.dist=zn(f,i,d);var r=Yn(e[n+1]);r.properties.dist=zn(f,r,d);var o=zn(i,r,d),s=Math.max(i.properties.dist,r.properties.dist),a=Gn(i,r),u=Vn(f,s,a+90,d),h=Vn(f,s,a-90,d),c=mn(Wn([u.geometry.coordinates,h.geometry.coordinates]),Wn([i.geometry.coordinates,r.geometry.coordinates])),l=null;0<c.features.length&&((l=c.features[0]).properties.dist=zn(f,l,d),l.properties.location=p+zn(i,l,d)),i.properties.dist<g.properties.dist&&((g=i).properties.index=n,g.properties.location=p),r.properties.dist<g.properties.dist&&((g=r).properties.index=n+1,g.properties.location=p+o),l&&l.properties.dist<g.properties.dist&&((g=l).properties.index=n),p+=o}}),g},Kn=Fe.featureCollection,Zn=Jt,Qn=fe.featureEach,$n=fe.segmentEach;function ti(t,e){var n=Zn(e),i=Zn(t),r=i[0],o=i[i.length-1],s=t.geometry.coordinates;return An(n[0],r)?s.unshift(n[1]):An(n[0],o)?s.push(n[1]):An(n[1],r)?s.unshift(n[0]):An(n[1],o)&&s.push(n[0]),t}var ei=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:ri};function ni(e){return e.coordinates.map(function(t){return{type:e.type.replace("Multi",""),coordinates:t}})}function ii(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function ri(t,e){return An(t,e,{strict:!0})}ei.prototype.compare=function(t,e){if(t.type!==e.type||!ii(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,i=ni(t),r=ni(e);return i.every(function(e){return this.some(function(t){return n.compare(e,t)})},r)}}return!1},ei.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},ei.prototype.compareLine=function(t,e,n,i){if(!ii(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!i||this.compareCoord(r[0],o[0])||(o=this.fixStartIndex(o,r))){var s=this.compareCoord(r[n],o[n]);return this.direction||s?this.comparePath(r,o):!!this.compareCoord(r[n],o[o.length-(1+n)])&&this.comparePath(r.slice().reverse(),o)}},ei.prototype.fixStartIndex=function(t,e){for(var n,i=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){i=r;break}return 0<=i&&(n=[].concat(t.slice(i,t.length),t.slice(1,i+1))),n},ei.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},ei.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),i=e.coordinates.slice(1,e.coordinates.length),r=this;return n.every(function(e){return this.some(function(t){return r.compareLine(e,t,1,!0)})},i)}return!1},ei.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},ei.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},ei.prototype.removePseudo=function(t){return t};var oi,si=ei,ai=fe.coordAll,ui=fe.segmentEach,hi=Zt,ci=t(function(t,e){!function(t){function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function i(){}function l(){}function m(){}function n(){}function r(){}function o(){}function s(){}function x(t){this.name="RuntimeException",this.message=t,this.stack=(new Error).stack,Error.call(this,t)}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function u(){if(0===arguments.length)x.call(this);else if(1===arguments.length){var t=arguments[0];x.call(this,t)}}function d(){}function I(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)I.call(this,0,0);else if(1===arguments.length){var t=arguments[0];I.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];I.call(this,e,n,I.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.x=i,this.y=r,this.z=o}}function h(){if(this.dimensionsToTest=2,0===arguments.length)h.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new l("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function c(){}function v(){}function f(t){this.message=t||""}function y(){}function g(t){this.message=t||""}function p(t){this.message=t||""}function b(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function E(){if(b.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function w(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof w){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(r,o,s,a)}}function _(){}function M(){_.call(this,"Projective point not representable on the Cartesian plane.")}function S(){}function N(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function C(){}function L(t){this.str=t}function P(t){this.value=t}function O(){}function R(){if(this.hi=0,(this.lo=0)===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof R){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];R.call(this,R.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function T(){}function A(){}function D(){}function F(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof F&&arguments[1]instanceof F){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof I&&arguments[1]instanceof I){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],h=arguments[2];this.x=a,this.y=u,this.w=h}else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3],g=c.y-l.y,p=l.x-c.x,v=c.x*l.y-l.x*c.y,y=f.y-d.y,m=d.x-f.x,x=f.x*d.y-d.x*f.y;this.x=p*x-m*v,this.y=y*v-g*x,this.w=g*m-y*p}}function G(){}function q(){}function k(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function z(){}function j(){}function B(){}function U(){}function V(){}function Y(){}function X(){}function W(){}function H(){}function J(){}function K(){}function Z(){}function Q(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function $(t){return null==t?Ao:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function ot(){}function st(){}function at(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function ut(){}function ht(){}function ct(){}function lt(){}function ft(){this.geometries=null;var t=arguments[0],e=arguments[1];if(k.call(this,e),null===t&&(t=[]),k.hasNullElements(t))throw new l("geometries must not contain null elements");this.geometries=t}function dt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function gt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];gt.call(this,t,j.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function pt(){this.count=null}function vt(){}function yt(){}function mt(){}function xt(){this.points=null;var t=arguments[0],e=arguments[1];k.call(this,e),this.init(t)}function Et(){}function wt(){this.coordinates=null;var t=arguments[0],e=arguments[1];k.call(this,e),this.init(t)}function _t(){}function It(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(k.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),k.hasNullElements(e))throw new l("holes must not contain null elements");if(t.isEmpty()&&k.hasNonEmptyElements(e))throw new l("shell is empty but holes are not");this.shell=t,this.holes=e}function bt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Mt(){if(arguments[0]instanceof I&&arguments[1]instanceof kt){var t=arguments[0],e=arguments[1];Mt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(N(arguments[0],A)&&arguments[1]instanceof kt){var n=arguments[0],i=arguments[1];xt.call(this,n,i),this.validateConstruction()}}function St(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Nt(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Ct(){}function Lt(){}function Pt(){}function Ot(){}function Rt(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];Rt.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)this.coordinates[n]=new I}else if(N(arguments[0],A)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this.coordinates=r,this.dimension=o,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this.coordinates=new Array(s).fill(null),this.dimension=a;for(var n=0;n<s;n++)this.coordinates[n]=new I}}function Tt(){}function At(n,i,r){var o=[0],s=!1;return n.push(o),{next:function(){var t,e=o[0];return!s&&e<i.length?(t=r?[i[e],r[e]]:i[e],o[0]++):(s=!0,n.splice(n.indexOf(o),1)),{done:s,value:t}}}}function Dt(){return this._values.length}function Ft(){this.map_=new ko}function Gt(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=Gt.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof qt){var t=arguments[0];(this.modelType=t)===Gt.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=Gt.FIXED,this.setScale(e)}else if(arguments[0]instanceof Gt){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function qt(){this.name=null;var t=arguments[0];this.name=t,qt.nameToTypeMap.put(t,this)}function kt(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)kt.call(this,new Gt,0);else if(1===arguments.length){if(N(arguments[0],G)){var t=arguments[0];kt.call(this,new Gt,0,t)}else if(arguments[0]instanceof Gt){var e=arguments[0];kt.call(this,e,0,kt.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];kt.call(this,n,i,kt.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=s,this.SRID=o}}function zt(t){this.geometryFactory=t||new kt}function jt(t){this.parser=new zt(t)}function Bt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new I,this.intPt[1]=new I,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Ut(){Bt.apply(this)}function Vt(){}function Yt(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function Xt(){}function Wt(){if(this.p0=null,this.p1=null,0===arguments.length)Wt.call(this,new I,new I);else if(1===arguments.length){var t=arguments[0];Wt.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];Wt.call(this,new I(i,r),new I(o,s))}}function Ht(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(ht.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];Ht.call(this),this.set(t)}else if(arguments[0]instanceof Ht){var e=arguments[0];Ht.call(this),this.matrix[S.INTERIOR][S.INTERIOR]=e.matrix[S.INTERIOR][S.INTERIOR],this.matrix[S.INTERIOR][S.BOUNDARY]=e.matrix[S.INTERIOR][S.BOUNDARY],this.matrix[S.INTERIOR][S.EXTERIOR]=e.matrix[S.INTERIOR][S.EXTERIOR],this.matrix[S.BOUNDARY][S.INTERIOR]=e.matrix[S.BOUNDARY][S.INTERIOR],this.matrix[S.BOUNDARY][S.BOUNDARY]=e.matrix[S.BOUNDARY][S.BOUNDARY],this.matrix[S.BOUNDARY][S.EXTERIOR]=e.matrix[S.BOUNDARY][S.EXTERIOR],this.matrix[S.EXTERIOR][S.INTERIOR]=e.matrix[S.EXTERIOR][S.INTERIOR],this.matrix[S.EXTERIOR][S.BOUNDARY]=e.matrix[S.EXTERIOR][S.BOUNDARY],this.matrix[S.EXTERIOR][S.EXTERIOR]=e.matrix[S.EXTERIOR][S.EXTERIOR]}}function Jt(){this.areaBasePt=null,this.triangleCent3=new I,this.areasum2=0,this.cg3=new I,this.lineCentSum=new I,this.totalLength=0,this.ptCount=0,this.ptCentSum=new I;var t=arguments[0];this.areaBasePt=null,this.add(t)}function Kt(t){this.message=t||""}function Zt(){this.array_=[]}function Qt(){this.treeSet=new at,this.list=new b}function $t(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];$t.call(this,$t.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=Qt.filterCoordinates(e),this.geomFactory=n}}function te(){this.origin=null;var t=arguments[0];this.origin=t}function ee(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function ne(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new Wt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof xt&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];ne.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=ne.isClosed(n),this.snapTolerance=i}}function ie(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function re(){if(ee.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function oe(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function se(){this.commonCoord=null,this.ccFilter=new ae}function ae(){this.commonBitsX=new oe,this.commonBitsY=new oe}function ue(){this.trans=null;var t=arguments[0];this.trans=t}function he(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function ce(){if(this.boundaryRule=j.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new l("Rule must be non-null");this.boundaryRule=t}}function le(){}function fe(){}function de(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function ge(){}function pe(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function ve(){this._size=null,this.items=null,this._size=0,this.items=new b,this.items.add(null)}function ye(){}function me(){}function xe(){if(this.childBoundables=new b,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function Ee(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function we(){if(this.root=null,this.built=!1,this.itemBoundables=new b,this.nodeCapacity=null,0===arguments.length)we.call(this,we.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];d.isTrue(1<t,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function _e(){}function Ie(){if(0===arguments.length)Ie.call(this,Ie.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];we.call(this,t)}}function be(){var t=arguments[0];xe.call(this,t)}function Me(){}function Se(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new I(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Ne(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Ce(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Le(){}function Pe(){this.nodeList=new Ne(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Oe(){this.tempEnv1=new w,this.tempEnv2=new w,this.overlapSeg1=new Wt,this.overlapSeg2=new Wt}function Re(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Te(){}function Ae(){}function De(){}function Fe(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function Ge(){if(this.monoChains=new b,this.index=new Ie,this.idCounter=0,this.nodedSegStrings=null,(this.nOverlaps=0)===arguments.length);else if(1===arguments.length){var t=arguments[0];Fe.call(this,t)}}function qe(){Oe.apply(this),this.si=null;var t=arguments[0];this.si=t}function ke(){if(this.pt=null,1===arguments.length){var t=arguments[0];x.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];x.call(this,ke.msgWithCoord(e,n)),this.name="TopologyException",this.pt=new I(n)}}function ze(){}function je(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new b,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function Be(){this.li=new Ut,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function Ue(){this.nv=null;var t=arguments[0];this.nv=new Be(Ue.toSegmentStrings(t))}function Ve(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function Ye(){}function Xe(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[Ye.ON]=e}else if(arguments[0]instanceof Xe){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[Ye.ON]=r,this.location[Ye.LEFT]=o,this.location[Ye.RIGHT]=s}}function We(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new Xe(t),this.elt[1]=new Xe(t)}else if(arguments[0]instanceof We){var e=arguments[0];this.elt[0]=new Xe(e.elt[0]),this.elt[1]=new Xe(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new Xe(S.NONE),this.elt[1]=new Xe(S.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new Xe(r,o,s),this.elt[1]=new Xe(r,o,s)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Xe(S.NONE,S.NONE,S.NONE),this.elt[1]=new Xe(S.NONE,S.NONE,S.NONE),this.elt[a].setLocations(u,h,c)}}function He(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new b,this.pts=new b,this.label=new We(S.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new b,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Je(){var t=arguments[0],e=arguments[1];He.call(this,t,e)}function Ke(){var t=arguments[0],e=arguments[1];He.call(this,t,e)}function Ze(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function Qe(){Ze.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new We(0,S.NONE)}function $e(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function tn(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];tn.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];tn.call(this,r),this.init(o,s),this.label=a}}function en(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(tn.call(this,t),this._isForward=e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function nn(){}function rn(){if(this.edges=new b,this.nodes=null,this.edgeEndList=new b,0===arguments.length)this.nodes=new $e(new nn);else if(1===arguments.length){var t=arguments[0];this.nodes=new $e(t)}}function on(){this.geometryFactory=null,this.shellList=new b;var t=arguments[0];this.geometryFactory=t}function sn(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new b,this.resultLineList=new b;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function an(){this.op=null,this.geometryFactory=null,this.resultPointList=new b;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function un(){}function hn(){this.geom=null;var t=arguments[0];this.geom=t}function cn(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[S.NONE,S.NONE]}function ln(){cn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function fn(){nn.apply(this)}function dn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function gn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=gn.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=gn.INSERT,this.label=n,this.xValue=i,this.obj=r}}function pn(){}function vn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function yn(){pn.apply(this),this.events=new b,this.nOverlaps=null}function mn(){this.min=m.POSITIVE_INFINITY,this.max=m.NEGATIVE_INFINITY}function xn(){}function En(){mn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function wn(){mn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function _n(){this.leaves=new b,this.root=null,this.level=0}function In(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function bn(){this.items=new b}function Mn(){this.index=null;var t=arguments[0];if(!N(t,_t))throw new l("Argument must be Polygonal");this.index=new Nn(t)}function Sn(){this.counter=null;var t=arguments[0];this.counter=t}function Nn(){this.index=new _n;var t=arguments[0];this.init(t)}function Cn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new I(t),this.segmentIndex=e,this.dist=n}function Ln(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Pn(){}function On(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new w,this.env2=new w;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Pn;this.startIndex=e.getChainStartIndices(this.pts)}function Rn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;t<2;t++)for(var e=0;e<3;e++)this.depth[t][e]=Rn.NULL_VALUE}function Tn(){if(Ze.apply(this),this.pts=null,this.env=null,this.eiList=new Ln(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Rn,this.depthDelta=0,1===arguments.length){var t=arguments[0];Tn.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function An(){if(rn.apply(this),this.parentGeom=null,this.lineEdgeMap=new Ft,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new ce,2===arguments.length){var t=arguments[0],e=arguments[1];An.call(this,t,e,j.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function Dn(){if(this.li=new Ut,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new An(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Dn.call(this,e,n,j.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];0<=i.getPrecisionModel().compareTo(r.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new An(0,i,o),this.arg[1]=new An(1,r,o)}}function Fn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Fn.orientation(t)}function Gn(){this.edges=new b,this.ocaMap=new rt}function qn(){this.ptLocator=new ce,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Gn,this.resultPolyList=new b,this.resultLineList=new b,this.resultPointList=new b;var t=arguments[0],e=arguments[1];Dn.call(this,t,e),this.graph=new rn(new fn),this.geomFact=t.getFactory()}function kn(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function zn(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function jn(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function Bn(){this.poly=null,this.centreY=null,this.hiY=m.MAX_VALUE,this.loY=-m.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=jn.avg(this.loY,this.hiY)}function Un(){this.centroid=null,this.minDistance=m.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function Vn(){this.centroid=null,this.minDistance=m.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function Yn(){this.tempEnv1=new w,this.selectedSegment=new Wt}function Xn(){this.items=new b,this.subnode=[null,null]}function Wn(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function Hn(){}function Jn(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Kn(){Xn.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Zn(){}function Qn(){Xn.apply(this)}function $n(){this.root=null,this.minExtent=1,this.root=new Qn}function ti(){}function ei(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new Wn;var t=arguments[0];this.ring=t,this.buildIndex()}function ni(){Yn.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function ii(){}function ri(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function oi(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function si(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Wt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];si.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function ai(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function ui(){ee.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function hi(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function ci(){this._isMarked=!1;var t=arguments[0];hi.call(this,t)}function li(){this.vertexMap=new Ft}function fi(){this._isStart=!1;var t=arguments[0];ci.call(this,t)}function di(){li.apply(this)}function gi(){this.result=null,this.factory=null,this.graph=null,this.lines=new b,this.nodeEdgeStack=new Zt,this.ringStartEdge=null,this.graph=new di}function pi(){this.items=new b,this.subnode=new Array(4).fill(null)}function vi(){this.pt=new I,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function yi(){pi.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function mi(){pi.apply(this)}function xi(){this.root=null,this.minExtent=1,this.root=new mi}function Ei(t){this.geometryFactory=t||new kt}function wi(t){this.geometryFactory=t||new kt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ei(this.geometryFactory)}function _i(){this.parser=new Ei(this.geometryFactory)}function Ii(t){this.geometryFactory=t||new kt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new zt(this.geometryFactory)}function bi(t){return[t.x,t.y]}function Mi(t,e){this.geometryFactory=t||new kt,this.ol=e||"undefined"!=typeof ol&&ol}function Si(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];Si.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function Ni(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Ci(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Li(){if(this.quadrantSegments=Li.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Li.CAP_ROUND,this.joinStyle=Li.JOIN_ROUND,this.mitreLimit=Li.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Li.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(s)}}function Pi(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Oi(){this.array_=[]}function Ri(){this.finder=null,this.dirEdgeList=new b,this.nodes=new b,this.rightMostCoord=null,this.env=null,this.finder=new Pi}function Ti(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Xt.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Ai(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new b}function Di(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Wt,this.seg1=new Wt,this.offset0=new Wt,this.offset1=new Wt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Ut,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),8<=e.getQuadrantSegments()&&e.getJoinStyle()===Li.JOIN_ROUND&&(this.closingSegLengthFactor=Di.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function Fi(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Gi(){this.subgraphs=null,this.seg=new Wt,this.cga=new Xt;var t=arguments[0];this.subgraphs=t}function qi(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new Wt(t),this.leftDepth=e}function ki(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new b;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function zi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function ji(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Gn;var t=arguments[0];this.bufParams=t}function Bi(){this.li=new Ut,this.segStrings=null;var t=arguments[0];this.segStrings=t}function Ui(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,e<=0)throw new l("Scale factor must be non-zero");1!==e&&(this.pt=new I(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new I,this.p1Scaled=new I),this.initCorners(this.pt)}function Vi(){this.index=null;var t=arguments[0];this.index=t}function Yi(){Yn.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function Xi(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new b}function Wi(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Ut,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function Hi(){if(this.argGeom=null,this.distance=null,this.bufParams=new Li,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function Ji(){this.comps=null;var t=arguments[0];this.comps=t}function Ki(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Ki.call(this,t,Ki.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function Zi(){this.pts=null;var t=arguments[0];this.pts=t}function Qi(){this.locations=null;var t=arguments[0];this.locations=t}function $i(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new ce,this.minDistanceLocation=null,this.minDistance=m.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];$i.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=i,this.terminateDistance=r}}function tr(){this.factory=null,this.directedEdges=new b,this.coordinates=null;var t=arguments[0];this.factory=t}function er(){this._isMarked=!1,this._isVisited=!1,this.data=null}function nr(){er.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=Te.quadrant(r,o),this.angle=Math.atan2(o,r)}function ir(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];nr.call(this,t,e,n,i)}function rr(){if(er.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function or(){this.outEdges=new b,this.sorted=!1}function sr(){if(er.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];sr.call(this,t,new or)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function ar(){rr.apply(this),this.line=null;var t=arguments[0];this.line=t}function ur(){this.nodeMap=new rt}function hr(){this.edges=new Q,this.dirEdges=new Q,this.nodeMap=new ur}function cr(){hr.apply(this)}function lr(){this.graph=new cr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function fr(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];nr.call(this,t,e,n,i)}function dr(){rr.apply(this),this.line=null;var t=arguments[0];this.line=t}function gr(){this.geometryFactory=new kt,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function pr(){}function vr(){if(this.edgeEnds=new b,1===arguments.length){var t=arguments[0];vr.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);tn.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new We(e.getLabel())),this.insert(e)}}function yr(){cn.apply(this)}function mr(){var t=arguments[0],e=arguments[1];Qe.call(this,t,e)}function xr(){nn.apply(this)}function Er(){this.nodes=new $e(new xr)}function wr(){this.li=new Ut,this.geomGraph=null,this.nodeGraph=new Er,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function _r(){this.graph=null,this.rings=new b,this.totalEnv=new w,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function Ir(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];Ir.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function br(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Mr(){this.factory=null,this.deList=new b,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Sr(){}function Nr(){hr.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function Cr(){if(this.lineStringAdder=new Lr(this),this.graph=null,this.dangles=new b,this.cutEdges=new b,this.invalidRingLines=new b,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)Cr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function Lr(){this.p=null;var t=arguments[0];this.p=t}function Pr(){this.li=new Ut,this.ptLocator=new ce,this.arg=null,this.nodes=new $e(new xr),this.im=null,this.isolatedEdges=new b,this.invalidPoint=null;var t=arguments[0];this.arg=t}function Or(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Rr(){this.li=new Ut,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new I(t.getMinX(),t.getMinY()),this.diagUp1=new I(t.getMaxX(),t.getMaxY()),this.diagDown0=new I(t.getMinX(),t.getMaxY()),this.diagDown1=new I(t.getMaxX(),t.getMinY())}function Tr(){this._isDone=!1}function Ar(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Dr(){Tr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Fr(){Tr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Gr(){Tr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new I,this.p1=new I;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Rr(this.rectEnv)}function qr(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];Dn.call(this,t,e),this._relate=new Pr(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];Dn.call(this,n,i,r),this._relate=new Pr(this.arg)}}function kr(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=kr.extractFactory(t),this.inputGeoms=t}function zr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function jr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Br(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new b)}function Ur(){if(this.polygons=new b,this.lines=new b,this.points=new b,this.geomFact=null,1===arguments.length){if(N(arguments[0],v)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof k){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function Vr(){Nt.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function Yr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Xr(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Wt;var t=arguments[0];this.pts=t}function Wr(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Hr(){ee.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function Jr(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];Jr.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];Wt.call(this,n,i),this.parent=r,this.index=o}}function Kr(){if(this.parentLine=null,this.segs=null,this.resultSegs=new b,this.minimumSize=null,1===arguments.length){var t=arguments[0];Kr.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function Zr(){this.index=new xi}function Qr(){this.querySeg=null,this.items=new b;var t=arguments[0];this.querySeg=t}function $r(){this.li=new Ut,this.inputIndex=new Zr,this.outputIndex=new Zr,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function to(){this.inputIndex=new Zr,this.outputIndex=new Zr,this.distanceTolerance=0}function eo(){this.inputGeom=null,this.lineSimplifier=new to,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function no(){ee.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function io(){this.tps=null;var t=arguments[0];this.tps=t}function ro(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function oo(){}function so(){}function ao(){}function uo(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new I(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new I(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.p=new I(i,r,o)}}function ho(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];uo.call(this,t)}function co(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function lo(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=0<t.getTolerance()}function fo(){}function go(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function po(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];x.call(this,t)}else if(arguments[0]instanceof Wt){var e=arguments[0];x.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Wt(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];x.call(this,po.msgWithSpatial(n,i)),this.seg=new Wt(i)}}function vo(){}function yo(){this.visitedKey=0,this.quadEdges=new b,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Wt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/yo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new go(this)}function mo(){}function xo(){this.triList=new b}function Eo(){this.triList=new b}function wo(){this.coordList=new E,this.triCoords=new b}function _o(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new Wt(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new Wt(n,i),this.data=r}else if(6===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],h=arguments[4],c=arguments[5];_o.call(this,new I(o,s,a),new I(u,h,c))}else if(7===arguments.length){var l=arguments[0],f=arguments[1],d=arguments[2],g=arguments[3],p=arguments[4],v=arguments[5],y=arguments[6];_o.call(this,new I(l,f,d),new I(g,p,v),y)}}function Io(){}function bo(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new I(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new I(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Mo(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Mo.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function So(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function No(){this.initialVertices=null,this.segVertices=null,this.segments=new b,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new so,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new b(t),this.tolerance=e,this.kdt=new Mo(e)}function Co(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Lo(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Po(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function Oo(){}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,i=1 in arguments&&parseInt(Number(arguments[1]),10)||0;i=i<0?Math.max(n+i,0):Math.min(i,n);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(r=r<0?Math.max(n+arguments[2],0):Math.min(r,n);i<r;)e[i]=t,++i;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)},e(i.prototype,{interfaces_:function(){return[]},getClass:function(){return i}}),i.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},m.MAX_VALUE=Number.MAX_VALUE,(x.prototype=Object.create(Error.prototype)).constructor=Error,a(u,x),e(u.prototype,{interfaces_:function(){return[]},getClass:function(){return u}}),e(d.prototype,{interfaces_:function(){return[]},getClass:function(){return d}}),d.shouldNeverReachHere=function(){if(0===arguments.length)d.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new u("Should never reach here"+(null!==t?": "+t:""))}},d.isTrue=function(){if(1===arguments.length){var t=arguments[0];d.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new u:new u(n)}},d.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];d.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new u("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(I.prototype,{setOrdinate:function(t,e){switch(t){case I.X:this.x=e;break;case I.Y:this.y=e;break;case I.Z:this.z=e;break;default:throw new l("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!i.equalsWithTolerance(this.x,e.x,n)&&!!i.equalsWithTolerance(this.y,e.y,n)}},getOrdinate:function(t){switch(t){case I.X:return this.x;case I.Y:return this.y;case I.Z:return this.z}throw new l("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z)&&m.isNaN(t.z))},equals:function(t){return t instanceof I&&this.equals2D(t)},equalInZ:function(t,e){return i.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return d.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new I(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*(t=37*t+I.hashCode(this.x))+I.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[n,r,s]},getClass:function(){return I}}),I.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=m.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(h.prototype,{compare:function(t,e){var n=t,i=e,r=h.compare(n.x,i.x);if(0!==r)return r;var o=h.compare(n.y,i.y);if(0!==o)return o;if(this.dimensionsToTest<=2)return 0;var s=h.compare(n.z,i.z);return s},interfaces_:function(){return[o]},getClass:function(){return h}}),h.compare=function(t,e){return t<e?-1:e<t?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0},I.DimensionalComparator=h,I.serialVersionUID=0x5cbf2c235c7e5800,I.NULL_ORDINATE=m.NaN,I.X=0,I.Y=1,I.Z=2,c.prototype.hasNext=function(){},c.prototype.next=function(){},c.prototype.remove=function(){},v.prototype.add=function(){},v.prototype.addAll=function(){},v.prototype.isEmpty=function(){},v.prototype.iterator=function(){},v.prototype.size=function(){},v.prototype.toArray=function(){},v.prototype.remove=function(){},(f.prototype=new Error).name="IndexOutOfBoundsException",((y.prototype=Object.create(v.prototype)).constructor=y).prototype.get=function(){},y.prototype.set=function(){},y.prototype.isEmpty=function(){},(g.prototype=new Error).name="NoSuchElementException",(p.prototype=new Error).name="OperationNotSupported",((b.prototype=Object.create(y.prototype)).constructor=b).prototype.ensureCapacity=function(){},b.prototype.interfaces_=function(){return[y,v]},b.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,arguments[1]),!0},b.prototype.clear=function(){this.array_=[]},b.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},b.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},b.prototype.iterator=function(){return new Ro(this)},b.prototype.get=function(t){if(t<0||t>=this.size())throw new f;return this.array_[t]},b.prototype.isEmpty=function(){return 0===this.array_.length},b.prototype.size=function(){return this.array_.length},b.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},b.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;n<i;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Ro=function(t){this.arrayList_=t,this.position_=0};Ro.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new g;return this.arrayList_.get(this.position_++)},Ro.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Ro.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Ro.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},a(E,b),e(E.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return b.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=b.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(E.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];b.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof I&&"boolean"==typeof arguments[1]){var i=arguments[0],r=arguments[1];if(!r&&1<=this.size()){var o=this.get(this.size()-1);if(o.equals2D(i))return null}b.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];return this.add(s,a),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var u=arguments[0],h=arguments[1],c=arguments[2];if(c)for(var l=0;l<u.length;l++)this.add(u[l],h);else for(var l=u.length-1;0<=l;l--)this.add(u[l],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof I){var f=arguments[0],d=arguments[1],g=arguments[2];if(!g){var p=this.size();if(0<p){if(0<f){var v=this.get(f-1);if(v.equals2D(d))return null}if(f<p){var y=this.get(f);if(y.equals2D(d))return null}}}b.prototype.add.call(this,f,d)}}else if(4===arguments.length){var m=arguments[0],x=arguments[1],E=arguments[2],w=arguments[3],_=1;w<E&&(_=-1);for(var l=E;l!==w;l+=_)this.add(m[l],x);return!0}},closeRing:function(){0<this.size()&&this.add(new I(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return E}}),E.coordArrayType=new Array(0).fill(null),e(w.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof w))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new w;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,i=this.maxx<t.maxx?this.maxx:t.maxx,r=this.maxy<t.maxy?this.maxy:t.maxy;return new w(e,i,n,r)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof w){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof I){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof w){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof w){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof I){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new I((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof w){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),s<a?(this.miny=s,this.maxy=a):(this.miny=a,this.maxy=s)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*(t=37*(t=37*(t=37*t+I.hashCode(this.minx))+I.hashCode(this.maxx))+I.hashCode(this.miny))+I.hashCode(this.maxy)},interfaces_:function(){return[n,s]},getClass:function(){return w}}),w.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),h=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(u<h||c<a||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),h=Math.min(i.y,r.y),c=Math.max(i.y,r.y),u<h||c<a))}},w.serialVersionUID=0x51845cd552189800,a(M,_),e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),e(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),S.toLocationSymbol=function(t){switch(t){case S.EXTERIOR:return"e";case S.BOUNDARY:return"b";case S.INTERIOR:return"i";case S.NONE:return"-"}throw new l("Unknown location value: "+t)},S.INTERIOR=0,S.BOUNDARY=1,S.EXTERIOR=2,S.NONE=-1,e(C.prototype,{interfaces_:function(){return[]},getClass:function(){return C}}),C.log10=function(t){var e=Math.log(t);return m.isInfinite(e)?e:m.isNaN(e)?e:e/C.LOG_10},C.min=function(t,e,n,i){var r=t;return e<r&&(r=e),n<r&&(r=n),i<r&&(r=i),r},C.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return i<r?r:o<i?o:i}},C.wrap=function(t,e){return t<0?e- -t%e:t%e},C.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=t;return i<e&&(i=e),i<n&&(i=n),i}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],i=r;return i<o&&(i=o),i<s&&(i=s),i<a&&(i=a),i}},C.average=function(t,e){return(t+e)/2},C.LOG_10=Math.log(10),L.prototype.append=function(t){this.str+=t},L.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},L.prototype.toString=function(t){return this.str},P.prototype.intValue=function(){return this.value},P.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},P.isNaN=function(t){return Number.isNaN(t)},O.isWhitespace=function(t){return t<=32&&0<=t||127==t},O.toUpperCase=function(t){return t.toUpperCase()},e(R.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=R.magnitude(n.hi),r=R.TEN.pow(i);(n=n.divide(r)).gt(R.TEN)?(n=n.divide(R.TEN),i+=1):n.lt(R.ONE)&&(n=n.multiply(R.TEN),i-=1);for(var o=i+1,s=new L,a=R.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var h=Math.trunc(n.hi);if(h<0)break;var c=!1,l=0;9<h?(c=!0,l="9"):l="0"+h,s.append(l),n=n.subtract(R.valueOf(h)).multiply(R.TEN),c&&n.selfAdd(R.TEN);var f=!0,d=R.magnitude(n.hi);if(d<0&&Math.abs(d)>=a-u&&(f=!1),!f)break}return e[0]=i,s.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof R){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof R){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,h=null,c=null,l=null;return u=this.hi/n,l=(r=(h=R.SPLIT*u)-(r=h-u))*(s=(l=R.SPLIT*n)-(s=l-n))-(c=u*n)+r*(a=n-s)+(o=u-r)*s+o*a,h=(this.hi-c-l+this.lo-u*i)/n,l=u+h,this.hi=l,this.lo=u-l+h,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof R){var t=arguments[0],e=null,n=null,i=null,r=null,o=null,s=null,a=null,u=null;o=this.hi/t.hi,e=(s=R.SPLIT*o)-o,u=R.SPLIT*t.hi,n=o-(e=s-e),i=u-t.hi,a=o*t.hi,i=u-i,r=t.hi-i,u=e*i-a+e*r+n*i+n*r,s=(this.hi-a-u+this.lo-o*t.lo)/t.hi;var h=u=o+s,c=o-u+s;return new R(h,c)}if("number"==typeof arguments[0]){var l=arguments[0];return m.isNaN(l)?R.createNaN():R.copy(this).selfDivide(l,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return R.valueOf(1);var e=new R(this),n=R.valueOf(1),i=Math.abs(t);if(1<i)for(;0<i;)i%2==1&&n.selfMultiply(e),0<(i/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},ceil:function(){if(this.isNaN())return R.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new R(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof R){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return R.valueOf(0);if(this.isNegative())return R.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=R.valueOf(e),i=this.subtract(n.sqr()),r=i.hi*(.5*t);return n.add(r)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return r=this.hi+e,s=r-this.hi,o=r-s,o=e-s+(this.hi-o),a=o+this.lo,i=a+(r-(n=r+a)),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var u=arguments[0],h=arguments[1],n=null,i=null,c=null,l=null,r=null,o=null,s=null,a=null;r=this.hi+u,c=this.lo+h,s=r-this.hi,a=c-this.lo,o=r-s,l=c-a,o=u-s+(this.hi-o),l=h-a+(this.lo-l);var f=(n=r+(s=o+c))+(s=l+(i=s+(r-n))),d=s+(n-f);return this.hi=f,this.lo=d,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof R){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=null,o=null,s=null,a=null,u=null,h=null;u=R.SPLIT*this.hi,r=u-this.hi,h=R.SPLIT*n,r=u-r,o=this.hi-r,s=h-n,u=this.hi*n,h=r*(s=h-s)-u+r*(a=n-s)+o*s+o*a+(this.hi*i+this.lo*n);var c=u+h,l=h+(r=u-c);return this.hi=c,this.lo=l,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return R.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new R(t,e)},negate:function(){return this.isNaN()?this:new R(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof R){var t=arguments[0];return t.isNaN()?R.createNaN():R.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return m.isNaN(e)?R.createNaN():R.copy(this).selfMultiply(e,0)}},isNaN:function(){return m.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=R.magnitude(this.hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(i<0)r="0."+R.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length,s=R.stringOfChar("0",o);r=n+s+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t=null,e=null,n=null,i=null,r=null,o=null,s=null,a=null;r=1/this.hi,t=(o=R.SPLIT*r)-r,a=R.SPLIT*this.hi,e=r-(t=o-t),n=a-this.hi,s=r*this.hi,n=a-n,i=this.hi-n,o=(1-s-(a=t*n-s+t*i+e*n+e*i)-r*this.lo)/this.hi;var u=r+o,h=r-u+o;return new R(u,h)},toSciNotation:function(){if(this.isZero())return R.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=R.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";1<n.length&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},abs:function(){return this.isNaN()?R.NaN:this.isNegative()?this.negate():new R(this)},isPositive:function(){return 0<this.hi||0===this.hi&&0<this.lo},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof R){var t=arguments[0];return R.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return R.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof R){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?R.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return 0<this.hi?1:this.hi<0?-1:0<this.lo?1:this.lo<0?-1:0},interfaces_:function(){return[s,n,r]},getClass:function(){return R}}),R.sqr=function(t){return R.valueOf(t).selfMultiply(t)},R.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return R.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new R(e)}},R.sqrt=function(t){return R.valueOf(t).sqrt()},R.parse=function(t){for(var e=0,n=t.length;O.isWhitespace(t.charAt(e));)e++;var i=!1;if(e<n){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new R,s=0,a=0,u=0;!(n<=e);){var h=t.charAt(e);if(e++,O.isDigit(h)){var c=h-"0";o.selfMultiply(R.TEN),o.selfAdd(c),s++}else{if("."!==h){if("e"===h||"E"===h){var l=t.substring(e);try{u=P.parseInt(l)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+l+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+h+"' at position "+e+" in string "+t)}a=s}}var f=o,d=s-a-u;if(0===d)f=o;else if(0<d){var g=R.TEN.pow(d);f=o.divide(g)}else if(d<0){var g=R.TEN.pow(-d);f=o.multiply(g)}return i?f.negate():f},R.createNaN=function(){return new R(m.NaN,m.NaN)},R.copy=function(t){return new R(t)},R.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n)),r=Math.pow(10,i);return 10*r<=e&&(i+=1),i},R.stringOfChar=function(t,e){for(var n=new L,i=0;i<e;i++)n.append(t);return n.toString()},R.PI=new R(3.141592653589793,1.2246467991473532e-16),R.TWO_PI=new R(6.283185307179586,2.4492935982947064e-16),R.PI_2=new R(1.5707963267948966,6.123233995736766e-17),R.E=new R(2.718281828459045,1.4456468917292502e-16),R.NaN=new R(m.NaN,m.NaN),R.EPS=1.23259516440783e-32,R.SPLIT=134217729,R.MAX_PRINT_DIGITS=32,R.TEN=R.valueOf(10),R.ONE=R.valueOf(1),R.SCI_NOT_EXPONENT_CHAR="E",R.SCI_NOT_ZERO="0.0E0",e(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.orientationIndex=function(t,e,n){var i=T.orientationIndexFilter(t,e,n);if(i<=1)return i;var r=R.valueOf(e.x).selfAdd(-t.x),o=R.valueOf(e.y).selfAdd(-t.y),s=R.valueOf(n.x).selfAdd(-e.x),a=R.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},T.signOfDet2x2=function(t,e,n,i){var r=t.multiply(i).selfSubtract(e.multiply(n));return r.signum()},T.intersection=function(t,e,n,i){var r=R.valueOf(i.y).selfSubtract(n.y).selfMultiply(R.valueOf(e.x).selfSubtract(t.x)),o=R.valueOf(i.x).selfSubtract(n.x).selfMultiply(R.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=R.valueOf(i.x).selfSubtract(n.x).selfMultiply(R.valueOf(t.y).selfSubtract(n.y)),u=R.valueOf(i.y).selfSubtract(n.y).selfMultiply(R.valueOf(t.x).selfSubtract(n.x)),h=a.subtract(u),c=h.selfDivide(s).doubleValue(),l=R.valueOf(t.x).selfAdd(R.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),f=R.valueOf(e.x).selfSubtract(t.x).selfMultiply(R.valueOf(t.y).selfSubtract(n.y)),d=R.valueOf(e.y).selfSubtract(t.y).selfMultiply(R.valueOf(t.x).selfSubtract(n.x)),g=f.subtract(d),p=g.selfDivide(s).doubleValue(),v=R.valueOf(n.y).selfAdd(R.valueOf(i.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new I(l,v)},T.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(0<r){if(o<=0)return T.signum(s);i=r+o}else{if(!(r<0))return T.signum(s);if(0<=o)return T.signum(s);i=-r-o}var a=T.DP_SAFE_EPSILON*i;return a<=s||a<=-s?T.signum(s):2},T.signum=function(t){return 0<t?1:t<0?-1:0},T.DP_SAFE_EPSILON=1e-15,e(A.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[r]},getClass:function(){return A}}),A.X=0,A.Y=1,A.Z=2,A.M=3,D.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;s<e+r;s++)n[i+o]=t[s],o++},D.getProperty=function(t){return{"line.separator":"\n"}[t]},e(F.prototype,{getY:function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new M;return t},getX:function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new M;return t},getCoordinate:function(){var t=new I;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return F}}),F.intersection=function(t,e,n,i){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-i.y,u=i.x-n.x,h=n.x*i.y-i.x*n.y,c=o*h-u*s,l=a*s-r*h,f=r*u-a*o,d=c/f,g=l/f;if(m.isNaN(d)||m.isInfinite(d)||m.isNaN(g)||m.isInfinite(g))throw new M;return new I(d,g)},e(G.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:N(arguments[0],A)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return G}}),e(q.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return q}}),e(k.prototype,{isGeometryCollection:function(){return this.getSortIndex()===k.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof k){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof k))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(k.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===k.SORTINDEX_GEOMETRYCOLLECTION)throw new l("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new w(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===k.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===k.SORTINDEX_MULTIPOINT||this.getSortIndex()===k.SORTINDEX_MULTILINESTRING||this.getSortIndex()===k.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[r,n,s]},getClass:function(){return k}}),k.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},k.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},k.serialVersionUID=0x799ea46522854c00,k.SORTINDEX_POINT=0,k.SORTINDEX_MULTIPOINT=1,k.SORTINDEX_LINESTRING=2,k.SORTINDEX_LINEARRING=3,k.SORTINDEX_MULTILINESTRING=4,k.SORTINDEX_POLYGON=5,k.SORTINDEX_MULTIPOLYGON=6,k.SORTINDEX_GEOMETRYCOLLECTION=7,k.geometryChangedFilter={interfaces_:function(){return[q]},filter:function(t){t.geometryChangedAction()}},e(z.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return z}}),e(j.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return j}}),e(B.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[j]},getClass:function(){return B}}),e(U.prototype,{isInBoundary:function(t){return 0<t},interfaces_:function(){return[j]},getClass:function(){return U}}),e(V.prototype,{isInBoundary:function(t){return 1<t},interfaces_:function(){return[j]},getClass:function(){return V}}),e(Y.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[j]},getClass:function(){return Y}}),j.Mod2BoundaryNodeRule=B,j.EndPointBoundaryNodeRule=U,j.MultiValentEndPointBoundaryNodeRule=V,j.MonoValentEndPointBoundaryNodeRule=Y,j.MOD2_BOUNDARY_RULE=new B,j.ENDPOINT_BOUNDARY_RULE=new U,j.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new V,j.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Y,j.OGC_SFS_BOUNDARY_RULE=j.MOD2_BOUNDARY_RULE,e(X.prototype,{interfaces_:function(){return[]},getClass:function(){return X}}),X.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},X.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(X.indexOf(i,e)<0)return i}return null},X.scroll=function(t,e){var n=X.indexOf(e,t);if(n<0)return null;var i=new Array(t.length).fill(null);D.arraycopy(t,n,i,0,t.length-n),D.arraycopy(t,0,i,t.length-n,n),D.arraycopy(i,0,t,0,t.length)},X.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(var n=0;n<i.length;n++)if(0!==o.compare(i[n],r[n]))return!1;return!0}},X.intersection=function(t,e){for(var n=new E,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},X.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},X.removeRepeatedPoints=function(t){if(!X.hasRepeatedPoints(t))return t;var e=new E(t,!1);return e.toCoordinateArray()},X.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;i<=n;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},X.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;for(var r=0,n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},X.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new I(t[n]);return e}if(5===arguments.length)for(var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],n=0;n<a;n++)o[s+n]=new I(i[r+n])},X.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},X.envelope=function(t){for(var e=new w,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},X.toCoordinateArray=function(t){return t.toArray(X.coordArrayType)},X.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},X.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},X.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},X.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},X.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},X.extract=function(t,e,n){e=C.clamp(e,0,t.length);var i=(n=C.clamp(n,-1,t.length))-e+1;n<0&&(i=0),e>=t.length&&(i=0),n<e&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;s<=n;s++)r[o++]=t[s];return r},e(W.prototype,{compare:function(t,e){var n=t,i=e;return X.compare(n,i)},interfaces_:function(){return[o]},getClass:function(){return W}}),e(H.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=X.compare(n,i),o=X.isEqualReversed(n,i);return o?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=X.increasingDirection(n),o=X.increasingDirection(i),s=0<r?0:n.length-1,a=0<o?0:n.length-1,u=0;u<n.length;u++){var h=n[s].compareTo(i[a]);if(0!==h)return h;s+=r,a+=o}return 0},interfaces_:function(){return[o]},getClass:function(){return H}}),X.ForwardComparator=W,X.BidirectionalComparator=H,X.coordArrayType=new Array(0).fill(null),J.prototype.get=function(){},J.prototype.put=function(){},J.prototype.size=function(){},J.prototype.values=function(){},J.prototype.entrySet=function(){},K.prototype=new J,(Z.prototype=new v).contains=function(){},(Q.prototype=new Z).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(i===t)return!0}return!1},Q.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Q.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Q.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Q.prototype.size=function(){return this.array_.length},Q.prototype.isEmpty=function(){return 0===this.array_.length},Q.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Q.prototype.iterator=function(){return new To(this)};var To=function(t){this.hashSet_=t,this.position_=0};To.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new g;return this.hashSet_.array_[this.position_++]},To.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},To.prototype.remove=function(){throw new p};var Ao=0;(rt.prototype=new K).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ao,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,(i=t.compareTo(r.key))<0)r=r.left;else{if(!(0<i)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:Ao,getValue:function(){return this.value},getKey:function(){return this.key}};return i<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;)if(tt(t)==nt(tt(tt(t)))){var e=it(tt(tt(t)));1==$(e)?(et(tt(t),Ao),et(e,Ao),et(tt(tt(t)),1),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),Ao),et(tt(tt(t)),1),this.rotateRight(tt(tt(t))))}else{var e=nt(tt(tt(t)));1==$(e)?(et(tt(t),Ao),et(e,Ao),et(tt(tt(t)),1),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),Ao),et(tt(tt(t)),1),this.rotateLeft(tt(tt(t))))}this.root_.color=Ao},rt.prototype.values=function(){var t=new b,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e}},rt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e}},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var e=t.parent,n=t;null!==e&&n===e.right;)e=(n=e).parent;return e},rt.prototype.size=function(){return this.size_},e(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),st.prototype=new Z,(at.prototype=new st).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(0===i.compareTo(t))return!0}return!1},at.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++){var i=this.array_[e];if(1===i.compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},at.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},at.prototype.remove=function(t){throw new p},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},at.prototype.iterator=function(){return new Do(this)};var Do=function(t){this.treeSet_=t,this.position_=0};Do.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new g;return this.treeSet_.array_[this.position_++]},Do.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Do.prototype.remove=function(){throw new p},ut.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}}},ut.asList=function(t){for(var e=new b,n=0,i=t.length;n<i;n++)e.add(t[n]);return e},e(ht.prototype,{interfaces_:function(){return[]},getClass:function(){return ht}}),ht.toDimensionSymbol=function(t){switch(t){case ht.FALSE:return ht.SYM_FALSE;case ht.TRUE:return ht.SYM_TRUE;case ht.DONTCARE:return ht.SYM_DONTCARE;case ht.P:return ht.SYM_P;case ht.L:return ht.SYM_L;case ht.A:return ht.SYM_A}throw new l("Unknown dimension value: "+t)},ht.toDimensionValue=function(t){switch(O.toUpperCase(t)){case ht.SYM_FALSE:return ht.FALSE;case ht.SYM_TRUE:return ht.TRUE;case ht.SYM_DONTCARE:return ht.DONTCARE;case ht.SYM_P:return ht.P;case ht.SYM_L:return ht.L;case ht.SYM_A:return ht.A}throw new l("Unknown dimension symbol: "+t)},ht.P=0,ht.L=1,ht.A=2,ht.FALSE=-1,ht.TRUE=-2,ht.DONTCARE=-3,ht.SYM_FALSE="F",ht.SYM_TRUE="T",ht.SYM_DONTCARE="*",ht.SYM_P="0",ht.SYM_L="1",ht.SYM_A="2",e(ct.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ct}}),e(lt.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return lt}}),a(ft,k),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new w,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return k.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return k.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ut.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=ht.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=ht.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new at(ut.asList(this.geometries)),n=new at(ut.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;u<s&&u<a;){var h=this.getGeometryN(u),c=o.getGeometryN(u),l=h.compareToSameClass(c,r);if(0!==l)return l;u++}return u<s?1:u<a?-1:0}},apply:function(){if(N(arguments[0],z))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(N(arguments[0],lt)){var n=arguments[0];if(0===this.geometries.length)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],ct)){var i=arguments[0];i.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(N(arguments[0],q)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),d.shouldNeverReachHere(),null},clone:function(){var t=k.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,a(dt,ft),e(dt.prototype,{getSortIndex:function(){return k.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?ht.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new gt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new dt(t,this.factory)},interfaces_:function(){return[ot]},getClass:function(){return dt}}),dt.serialVersionUID=0x7155d2ab4afa8000,e(gt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof xt?this.boundaryLineString(this.geom):this.geom instanceof dt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new b;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue(),a=s.count;this.bnRule.isInBoundary(a)&&e.add(o.getKey())}return X.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new pt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return gt}}),gt.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new gt(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new gt(n,i);return e.getBoundary()}},e(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}}),e(yt.prototype,{interfaces_:function(){return[]},getClass:function(){return yt}}),yt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;i<e;i++)n[i]=t;return new String(n)},yt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(yt.getStackTrace(i)),a=new function(){}(s),u=0;u<r;u++)try{o+=a.readLine()+yt.NEWLINE}catch(t){if(!(t instanceof vt))throw t;d.shouldNeverReachHere()}return o}},yt.split=function(t,e){for(var n=e.length,i=new b,r=""+t,o=r.indexOf(e);0<=o;){var s=r.substring(0,o);i.add(s),r=r.substring(o+n),o=r.indexOf(e)}0<r.length&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},yt.toString=function(){if(1===arguments.length){var t=arguments[0];return yt.SIMPLE_ORDINATE_FORMAT.format(t)}},yt.spaces=function(t){return yt.chars(" ",t)},yt.NEWLINE=D.getProperty("line.separator"),yt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),e(mt.prototype,{interfaces_:function(){return[]},getClass:function(){return mt}}),mt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;o<r;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},mt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,A.X)===t.getOrdinate(e-1,A.X)&&t.getOrdinate(0,A.Y)===t.getOrdinate(e-1,A.Y)},mt.isEqual=function(t,e){var n=t.size(),i=e.size();if(n!==i)return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),o=0;o<n;o++)for(var s=0;s<r;s++){var a=t.getOrdinate(o,s),u=e.getOrdinate(o,s);if(!(t.getOrdinate(o,s)===e.getOrdinate(o,s)||m.isNaN(a)&&m.isNaN(u)))return!1}return!0},mt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(mt.copy(e,0,i,0,r),0<r)for(var o=r;o<n;o++)mt.copy(e,r-1,i,o,1);return i},mt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;i<=n;i++)mt.swap(t,i,e-i)},mt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},mt.copy=function(t,e,n,i,r){for(var o=0;o<r;o++)mt.copyCoord(t,e+o,n,i+o)},mt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new L;i.append("(");for(var r=0;r<e;r++){0<r&&i.append(" ");for(var o=0;o<n;o++)0<o&&i.append(","),i.append(yt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},mt.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(n<=3)return mt.createClosedRing(t,e,4);var i=e.getOrdinate(0,A.X)===e.getOrdinate(n-1,A.X)&&e.getOrdinate(0,A.Y)===e.getOrdinate(n-1,A.Y);return i?e:mt.createClosedRing(t,e,n+1)},mt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();mt.copy(e,0,i,0,r);for(var o=r;o<n;o++)mt.copy(e,0,i,o,1);return i},a(xt,k),e(xt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new w:this.points.expandEnvelope(new w)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return k.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return k.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return 0<this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))&&mt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?ht.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Xt.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();mt.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=t,n=0,i=0;n<this.points.size()&&i<e.points.size();){var r=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(i));if(0!==r)return r;n++,i++}return n<this.points.size()?1:i<e.points.size()?-1:0}if(2===arguments.length){var o=arguments[0],s=arguments[1],e=o;return s.compare(this.points,e.points)}},apply:function(){if(N(arguments[0],z))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(N(arguments[0],lt)){var n=arguments[0];if(0===this.points.size())return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],ct)){var i=arguments[0];i.filter(this)}else if(N(arguments[0],q)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return new gt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof xt},clone:function(){var t=k.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new xt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new l("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[ot]},getClass:function(){return xt}}),xt.serialVersionUID=0x2b2b51ba435c8e00,e(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),a(wt,k),e(wt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new w;var t=new w;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return k.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return k.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return ht.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=n;return i.compare(this.coordinates,e.coordinates)}},apply:function(){if(N(arguments[0],z)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(N(arguments[0],lt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],ct)){var n=arguments[0];n.filter(this)}else if(N(arguments[0],q)){var i=arguments[0];i.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=k.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new wt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),d.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Et]},getClass:function(){return wt}}),wt.serialVersionUID=0x44077bad161cbc00,e(_t.prototype,{interfaces_:function(){return[]},getClass:function(){return _t}}),a(It,k),e(It.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return k.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this.holes.length;r++)for(var o=this.holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},getArea:function(){var t=0;t+=Math.abs(Xt.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(Xt.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var i=t.getX(n);if(i!==e.getMinX()&&i!==e.getMaxX())return!1;var r=t.getY(n);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),n=1;n<=4;n++){var i=t.getX(n),r=t.getY(n),a=i!==o,u=r!==s;if(a===u)return!1;o=i,s=r}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return k.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ut.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);D.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=X.minCoordinate(e.getCoordinates());X.scroll(i,r),D.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],Xt.isCCW(e.getCoordinates())===n&&X.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,e=this.shell,n=o.shell,s=e.compareToSameClass(n,r);if(0!==s)return s;for(var a=this.getNumInteriorRing(),u=o.getNumInteriorRing(),h=0;h<a&&h<u;){var c=this.getInteriorRingN(h),l=o.getInteriorRingN(h),f=c.compareToSameClass(l,r);if(0!==f)return f;h++}return h<a?1:h<u?-1:0}},apply:function(){if(N(arguments[0],z)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(N(arguments[0],lt)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],ct)){var i=arguments[0];i.filter(this)}else if(N(arguments[0],q)){var r=arguments[0];r.filter(this),this.shell.apply(r);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(r)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=k.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new It(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[_t]},getClass:function(){return It}}),It.serialVersionUID=-0x307ffefd8dc97200,a(bt,ft),e(bt.prototype,{getSortIndex:function(){return k.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ft.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return ht.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new bt(t,this.factory)},interfaces_:function(){return[Et]},getClass:function(){return bt}}),bt.serialVersionUID=-0x6fb1ed4162e0fc00,a(Mt,xt),e(Mt.prototype,{getSortIndex:function(){return k.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return ht.FALSE},isClosed:function(){return!!this.isEmpty()||xt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();mt.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!xt.prototype.isClosed.call(this))throw new l("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<Mt.MINIMUM_VALID_SIZE)throw new l("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Mt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Mt}}),Mt.MINIMUM_VALID_SIZE=4,Mt.serialVersionUID=-0x3b229e262367a600,a(St,ft),e(St.prototype,{getSortIndex:function(){return k.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new b,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],i=n.getBoundary(),r=0;r<i.getNumGeometries();r++)t.add(i.getGeometryN(r));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new St(t,this.factory)},interfaces_:function(){return[_t]},getClass:function(){return St}}),St.serialVersionUID=-0x7a5aa1369171980,e(Nt.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof It?this.editPolygon(t,e):t instanceof wt?e.edit(t,this.factory):t instanceof xt?e.edit(t,this.factory):(d.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new b,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===bt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===dt?this.factory.createMultiLineString(i.toArray([])):n.getClass()===St?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new b,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.GeometryEditorOperation=Ct,e(Lt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Ct]},getClass:function(){return Lt}}),e(Pt.prototype,{edit:function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Mt?e.createLinearRing(n):t instanceof xt?e.createLineString(n):t instanceof wt?0<n.length?e.createPoint(n[0]):e.createPoint():t},interfaces_:function(){return[Ct]},getClass:function(){return Pt}}),e(Ot.prototype,{edit:function(t,e){return t instanceof Mt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof xt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof wt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Ct]},getClass:function(){return Ot}}),Nt.NoOpGeometryOperation=Lt,Nt.CoordinateOperation=Pt,Nt.CoordinateSequenceOperation=Ot,e(Rt.prototype,{setOrdinate:function(t,e,n){switch(e){case A.X:this.coordinates[t].x=n;break;case A.Y:this.coordinates[t].y=n;break;case A.Z:this.coordinates[t].z=n;break;default:throw new l("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case A.X:return this.coordinates[t].x;case A.Y:return this.coordinates[t].y;case A.Z:return this.coordinates[t].z}return m.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new I(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Rt(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Rt(t,this.dimension)},toString:function(){if(0<this.coordinates.length){var t=new L(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[A,s]},getClass:function(){return Rt}}),Rt.serialVersionUID=-0xcb44a778db18e00,e(Tt.prototype,{readResolve:function(){return Tt.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Rt(t)}if(N(arguments[0],A)){var e=arguments[0];return new Rt(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return 3<i&&(i=3),i<2?new Rt(n):new Rt(n,i)}},interfaces_:function(){return[G,s]},getClass:function(){return Tt}}),Tt.instance=function(){return Tt.instanceObject},Tt.serialVersionUID=-0x38e49fa6cf6f2e00,Tt.instanceObject=new Tt;var Fo,Go=Object.defineProperty,qo=function(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t))):new n(t)}return e||Go(t,"size",{get:Dt}),(t.constructor=n).prototype=t,n}({delete:function(t){return this.has(t)&&(this._keys.splice(Fo,1),this._values.splice(Fo,1),this._itp.forEach(function(t){Fo<t[0]&&t[0]--})),-1<Fo},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(Fo=t.length;Fo--&&((n=t[Fo])!==(i=e)&&(n==n||i==i)););else Fo=t.indexOf(e);var n,i;return-1<Fo}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[Fo]:void 0},set:function(t,e){return this.has(t)?this._values[Fo]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return At(this._itp,this._keys)},values:function(){return At(this._itp,this._values)},entries:function(){return At(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}}),ko="undefined"!=typeof Map&&Map.prototype.values?Map:qo;(Ft.prototype=new J).get=function(t){return this.map_.get(t)||null},Ft.prototype.put=function(t,e){return this.map_.set(t,e),e},Ft.prototype.values=function(){for(var t=new b,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Ft.prototype.entrySet=function(){var e=new Q;return this.map_.entries().forEach(function(t){return e.add(t)}),e},Ft.prototype.size=function(){return this.map_.size()},e(Gt.prototype,{equals:function(t){if(!(t instanceof Gt))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new P(n).compareTo(new P(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Gt.FLOATING||this.modelType===Gt.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Gt.FLOATING?t="Floating":this.modelType===Gt.FLOATING_SINGLE?t="Floating-Single":this.modelType===Gt.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];if(m.isNaN(t))return t;if(this.modelType===Gt.FLOATING_SINGLE){var e=t;return e}return this.modelType===Gt.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof I){var n=arguments[0];if(this.modelType===Gt.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Gt.FLOATING?t=16:this.modelType===Gt.FLOATING_SINGLE?t=6:this.modelType===Gt.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[s,n]},getClass:function(){return Gt}}),Gt.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},e(qt.prototype,{readResolve:function(){return qt.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[s]},getClass:function(){return qt}}),qt.serialVersionUID=-552860263173159e4,qt.nameToTypeMap=new Ft,Gt.Type=qt,Gt.serialVersionUID=0x6bee6404e9a25c00,Gt.FIXED=new qt("FIXED"),Gt.FLOATING=new qt("FLOATING"),Gt.FLOATING_SINGLE=new qt("FLOATING SINGLE"),Gt.maximumPreciseValue=9007199254740992,e(kt.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new I(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new I(t.getMinX(),t.getMinY()),new I(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new I(t.getMinX(),t.getMinY()),new I(t.getMinX(),t.getMaxY()),new I(t.getMaxX(),t.getMaxY()),new I(t.getMaxX(),t.getMinY()),new I(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],A)){var e=arguments[0];return new xt(e,this)}}},createMultiLineString:function(){if(0===arguments.length)return new dt(null,this);if(1===arguments.length){var t=arguments[0];return new dt(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(kt.toGeometryArray(t));var a=t.iterator().next(),u=1<t.size();if(u){if(a instanceof It)return this.createMultiPolygon(kt.toPolygonArray(t));if(a instanceof xt)return this.createMultiLineString(kt.toLineStringArray(t));if(a instanceof wt)return this.createMultiPoint(kt.toPointArray(t));d.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof I){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(N(arguments[0],A)){var e=arguments[0];return new wt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new It(null,null,this);if(1===arguments.length){if(N(arguments[0],A)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Mt){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];return new It(i,r,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(0===arguments.length)return new ft(null,this);if(1===arguments.length){var t=arguments[0];return new ft(t,this)}},createGeometry:function(t){var e=new Nt(this);return e.edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],A)){var e=arguments[0];return new Mt(e,this)}}},createMultiPolygon:function(){if(0===arguments.length)return new St(null,this);if(1===arguments.length){var t=arguments[0];return new St(t,this)}},createMultiPoint:function(){if(0===arguments.length)return new bt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new bt(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(N(arguments[0],A)){var n=arguments[0];if(null===n)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(n.size()).fill(null),r=0;r<n.size();r++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());mt.copy(n,r,o,0,1),i[r]=this.createPoint(o)}return this.createMultiPoint(i)}}},interfaces_:function(){return[s]},getClass:function(){return kt}}),kt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.getDefaultCoordinateSequenceFactory=function(){return Tt.instance()},kt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},kt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},kt.serialVersionUID=-0x5ea75f2051eeb400;var zo={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(zt.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=zo.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=zo.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],Bo[n]&&(e=Bo[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!jo[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+jo[e].apply(this,[t])+")"}});var jo={coordinate:function(t){return t.x+" "+t.y},point:function(t){return jo.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+jo.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(jo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;n<i;++n)e.push(jo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+jo.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+jo.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;n<i;++n)e.push("("+jo.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push("("+jo.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;n<i;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Bo={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(zo.spaces);return this.geometryFactory.createPoint(new I(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(zo.trimParens,"$1"),i.push(Bo.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(zo.spaces),i.push(new I(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;r<o;++r)e=n[r].trim().split(zo.spaces),i.push(new I(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(zo.parenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(zo.trimParens,"$1"),i.push(Bo.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(zo.parenComma),s=[],a=0,u=o.length;a<u;++a)e=o[a].replace(zo.trimParens,"$1"),n=Bo.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(zo.doubleParenComma),i=[],r=0,o=n.length;r<o;++r)e=n[r].replace(zo.trimParens,"$1"),i.push(Bo.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;i<r;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(jt.prototype,{write:function(t){return this.parser.write(t)}}),e(jt,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(Bt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new L;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);n<e?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Bt.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=Bt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===Bt.COLLINEAR_INTERSECTION},toString:function(){return jt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+jt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return Bt}}),Bt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r<i?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=r<i?s:a)||t.equals(e)||(o=Math.max(s,a))}return d.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Bt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return d.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Bt.DONT_INTERSECT=0,Bt.DO_INTERSECT=1,Bt.COLLINEAR=2,Bt.NO_INTERSECTION=0,Bt.POINT_INTERSECTION=1,Bt.COLLINEAR_INTERSECTION=2,a(Ut,Bt),e(Ut.prototype,{isInSegmentEnvelopes:function(t){var e=new w(this.inputLines[0][0],this.inputLines[0][1]),n=new w(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return Bt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,w.intersects(e,n,t)&&0===Xt.orientationIndex(e,n,t)&&0===Xt.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=Bt.POINT_INTERSECTION,null):void(this.result=Bt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(e,n,i,r){var o=null;try{o=F.intersection(e,n,i,r)}catch(t){if(!(t instanceof M))throw t;o=Ut.nearestEndpoint(e,n,i,r)}return o},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new I(Ut.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},checkDD:function(t,e,n,i,r){var o=T.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);D.out.println("DD in env = "+s+"  --------------------- "+o),1e-4<r.distance(o)&&D.out.println("Distance = "+r.distance(o))},intersectionWithNormalization:function(t,e,n,i){var r=new I(t),o=new I(e),s=new I(n),a=new I(i),u=new I;this.normalizeToEnvCentre(r,o,s,a,u);var h=this.safeHCoordinateIntersection(r,o,s,a);return h.x+=u.x,h.y+=u.y,h},computeCollinearIntersection:function(t,e,n,i){var r=w.intersects(t,e,n),o=w.intersects(t,e,i),s=w.intersects(n,i,t),a=w.intersects(n,i,e);return r&&o?(this.intPt[0]=n,this.intPt[1]=i,Bt.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,Bt.COLLINEAR_INTERSECTION):r&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||a?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||s?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):o&&s?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):o&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||s?Bt.COLLINEAR_INTERSECTION:Bt.POINT_INTERSECTION):Bt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,h=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,l=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,d=h<o?o:h,g=a<l?a:l,p=c<s?s:c,v=u<f?u:f,y=(d+g)/2,m=(p+v)/2;r.x=y,r.y=m,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!w.intersects(t,e,n,i))return Bt.NO_INTERSECTION;var r=Xt.orientationIndex(t,e,n),o=Xt.orientationIndex(t,e,i);if(0<r&&0<o||r<0&&o<0)return Bt.NO_INTERSECTION;var s=Xt.orientationIndex(n,i,t),a=Xt.orientationIndex(n,i,e);if(0<s&&0<a||s<0&&a<0)return Bt.NO_INTERSECTION;var u=0===r&&0===o&&0===s&&0===a;return u?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new I(n):0===o?this.intPt[0]=new I(i):0===s?this.intPt[0]=new I(t):0===a&&(this.intPt[0]=new I(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),Bt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Ut}}),Ut.nearestEndpoint=function(t,e,n,i){var r=t,o=Xt.distancePointLine(t,n,i),s=Xt.distancePointLine(e,n,i);return s<o&&(o=s,r=e),(s=Xt.distancePointLine(n,t,e))<o&&(o=s,r=n),(s=Xt.distancePointLine(i,t,e))<o&&(o=s,r=i),r},e(Vt.prototype,{interfaces_:function(){return[]},getClass:function(){return Vt}}),Vt.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Vt.signOfDet2x2(i,r,o,s)},Vt.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:0<e?0<n?-r:r:0<n?r:-r;if(0===e||0===n)return 0<i?0<t?r:-r:0<t?-r:r;if(0<e?0<i?e<=i||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):e<=-i?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):0<i?-e<=i?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):i<=e?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),0<t){if(!(0<n))return r;if(!(t<=n))return r}else{if(0<n)return-r;if(!(n<=t))return-r;r=-r,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,(i-=s*e)<0)return-r;if(e<i)return r;if(n+n<t){if(e<i+i)return r}else{if(i+i<e)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(s=Math.floor(t/n),t-=s*n,(e-=s*i)<0)return r;if(i<e)return-r;if(t+t<n){if(i<e+e)return-r}else{if(e+e<i)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(Yt.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return i<n&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,u=Vt.signOfDet2x2(r,o,s,a);if(0===u)return this.isPointOnSegment=!0,null;a<o&&(u=-u),0<u&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==S.EXTERIOR},getLocation:function(){return this.isPointOnSegment?S.BOUNDARY:this.crossingCount%2==1?S.INTERIOR:S.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.locatePointInRing=function(){if(arguments[0]instanceof I&&N(arguments[1],A)){for(var t=arguments[0],e=arguments[1],n=new Yt(t),i=new I,r=new I,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof I&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],n=new Yt(s),o=1;o<a.length;o++){var i=a[o],r=a[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(Xt.prototype,{interfaces_:function(){return[]},getClass:function(){return Xt}}),Xt.orientationIndex=function(t,e,n){return T.orientationIndex(t,e,n)},Xt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y,s=t[i-1].y;e+=r*(s-o)}return e/2}if(N(arguments[0],A)){var a=arguments[0],u=a.size();if(u<3)return 0;var h=new I,c=new I,l=new I;a.getCoordinate(0,c),a.getCoordinate(1,l);var n=c.x;l.x-=n;for(var e=0,i=1;i<u-1;i++)h.y=c.y,c.x=l.x,c.y=l.y,a.getCoordinate(i+1,l),l.x-=n,e+=c.x*(h.y-l.y);return e/2}},Xt.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Xt.distancePointLine(t,n,i);if(n.equals(i))return Xt.distancePointLine(i,t,e);var r=!1;if(w.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=a/o,h=s/o;(h<0||1<h||u<0||1<u)&&(r=!0)}}else r=!0;return r?C.min(Xt.distancePointLine(t,n,i),Xt.distancePointLine(e,n,i),Xt.distancePointLine(n,t,e),Xt.distancePointLine(i,t,e)):0},Xt.isPointInRing=function(t,e){return Xt.locatePointInRing(t,e)!==S.EXTERIOR},Xt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,i=new I;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;s<e;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,h=a-r,c=u-o;n+=Math.sqrt(h*h+c*c),r=a,o=u}return n},Xt.isCCW=function(t){var e=t.length-1;if(e<3)throw new l("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],i=0,r=1;r<=e;r++){var o=t[r];o.y>n.y&&(n=o,i=r)}for(var s=i;(s-=1)<0&&(s=e),t[s].equals2D(n)&&s!==i;);for(var a=i;t[a=(a+1)%e].equals2D(n)&&a!==i;);var u=t[s],h=t[a];if(u.equals2D(n)||h.equals2D(n)||u.equals2D(h))return!1;var c=Xt.computeOrientation(u,n,h);return 0===c?u.x>h.x:0<c},Xt.locatePointInRing=function(t,e){return Yt.locatePointInRing(t,e)},Xt.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},Xt.computeOrientation=function(t,e,n){return Xt.orientationIndex(t,e,n)},Xt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new l("Line array must contain at least one vertex");for(var n=t.distance(e[0]),i=0;i<e.length-1;i++){var r=Xt.distancePointLine(t,e[i],e[i+1]);r<n&&(n=r)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),h=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(h<=0)return o.distance(s);if(1<=h)return o.distance(a);var c=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(c)*Math.sqrt(u)}},Xt.isOnLine=function(t,e){for(var n=new Ut,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},Xt.RIGHT=Xt.CLOCKWISE=-1,Xt.LEFT=Xt.COUNTERCLOCKWISE=1,Xt.STRAIGHT=Xt.COLLINEAR=0,e(Wt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Wt){var t=arguments[0],e=Xt.orientationIndex(this.p0,this.p1,t.p0),n=Xt.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof I){var i=arguments[0];return Xt.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof Wt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Ut;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof I){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new I(t);var e=this.projectionFactor(t),n=new I;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Wt){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(1<=r&&1<=o)return null;if(r<=0&&o<=0)return null;var s=this.project(i.p0);r<0&&(s=this.p0),1<r&&(s=this.p1);var a=this.project(i.p1);return o<0&&(a=this.p0),1<o&&(a=this.p1),new Wt(s,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return Xt.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Wt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;if(i<=0)return m.NaN;var r=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i;return r},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=m.MAX_VALUE,r=null,o=this.closestPoint(t.p0);i=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<i&&(i=r,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<i&&(i=r,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return(r=u.distance(this.p1))<i&&(i=r,n[0]=this.p1,n[1]=u),n},closestPoint:function(t){var e=this.projectionFactor(t);if(0<e&&e<1)return this.project(t);var n=this.p0.distance(t),i=this.p1.distance(t);return n<i?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=F.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(t){if(!(t instanceof M))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}var h=n-u,c=i+a,l=new I(h,c);return l},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||m.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Wt){var t=arguments[0];return Xt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof I){var e=arguments[0];return Xt.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new I;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var i=Math.trunc(n)^Math.trunc(n>>32);return e^i},interfaces_:function(){return[n,s]},getClass:function(){return Wt}}),Wt.midPoint=function(t,e){return new I((t.x+e.x)/2,(t.y+e.y)/2)},Wt.serialVersionUID=0x2d2172135f411c00,e(Ht.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||Ht.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||Ht.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||Ht.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]);return t&&this.matrix[S.EXTERIOR][S.INTERIOR]===ht.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ht.FALSE},isCoveredBy:function(){var t=Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])||Ht.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||Ht.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||Ht.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]);return t&&this.matrix[S.INTERIOR][S.EXTERIOR]===ht.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ht.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=ht.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]=s}},isContains:function(){return Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.EXTERIOR][S.INTERIOR]===ht.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ht.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,ht.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]<s&&(this.matrix[r][o]=s)}},setAtLeastIfValid:function(t,e,n){0<=t&&0<=e&&this.setAtLeast(t,e,n)},isWithin:function(){return Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===ht.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ht.FALSE},isTouches:function(t,e){return e<t?this.isTouches(e,t):(t===ht.A&&e===ht.A||t===ht.L&&e===ht.L||t===ht.L&&e===ht.A||t===ht.P&&e===ht.A||t===ht.P&&e===ht.L)&&this.matrix[S.INTERIOR][S.INTERIOR]===ht.FALSE&&(Ht.isTrue(this.matrix[S.INTERIOR][S.BOUNDARY])||Ht.isTrue(this.matrix[S.BOUNDARY][S.INTERIOR])||Ht.isTrue(this.matrix[S.BOUNDARY][S.BOUNDARY]))},isOverlaps:function(t,e){return t===ht.P&&e===ht.P||t===ht.A&&e===ht.A?Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&Ht.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&Ht.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===ht.L&&e===ht.L&&1===this.matrix[S.INTERIOR][S.INTERIOR]&&Ht.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR])&&Ht.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR])},isEquals:function(t,e){return t===e&&Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&this.matrix[S.INTERIOR][S.EXTERIOR]===ht.FALSE&&this.matrix[S.BOUNDARY][S.EXTERIOR]===ht.FALSE&&this.matrix[S.EXTERIOR][S.INTERIOR]===ht.FALSE&&this.matrix[S.EXTERIOR][S.BOUNDARY]===ht.FALSE},toString:function(){for(var t=new L("123456789"),e=0;e<3;e++)for(var n=0;n<3;n++)t.setCharAt(3*e+n,ht.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new l("Should be length 9: "+t);for(var e=0;e<3;e++)for(var n=0;n<3;n++)if(!Ht.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;e<3;e++)for(var n=0;n<3;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[S.INTERIOR][S.INTERIOR]===ht.FALSE&&this.matrix[S.INTERIOR][S.BOUNDARY]===ht.FALSE&&this.matrix[S.BOUNDARY][S.INTERIOR]===ht.FALSE&&this.matrix[S.BOUNDARY][S.BOUNDARY]===ht.FALSE},isCrosses:function(t,e){return t===ht.P&&e===ht.L||t===ht.P&&e===ht.A||t===ht.L&&e===ht.A?Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&Ht.isTrue(this.matrix[S.INTERIOR][S.EXTERIOR]):t===ht.L&&e===ht.P||t===ht.A&&e===ht.P||t===ht.A&&e===ht.L?Ht.isTrue(this.matrix[S.INTERIOR][S.INTERIOR])&&Ht.isTrue(this.matrix[S.EXTERIOR][S.INTERIOR]):t===ht.L&&e===ht.L&&0===this.matrix[S.INTERIOR][S.INTERIOR]},interfaces_:function(){return[r]},getClass:function(){return Ht}}),Ht.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===ht.SYM_DONTCARE||e===ht.SYM_TRUE&&(0<=t||t===ht.TRUE)||e===ht.SYM_FALSE&&t===ht.FALSE||e===ht.SYM_P&&t===ht.P||e===ht.SYM_L&&t===ht.L||e===ht.SYM_A&&t===ht.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=new Ht(n);return r.matches(i)}},Ht.isTrue=function(t){return 0<=t||t===ht.TRUE};var Uo=Object.freeze({Coordinate:I,CoordinateList:E,Envelope:w,LineSegment:Wt,GeometryFactory:kt,Geometry:k,Point:wt,LineString:xt,LinearRing:Mt,Polygon:It,GeometryCollection:ft,MultiPoint:bt,MultiLineString:dt,MultiPolygon:St,Dimension:ht,IntersectionMatrix:Ht,PrecisionModel:Gt});e(Jt.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*o}}this.totalLength+=e,0===e&&0<t.length&&this.addPoint(t[0])},addHole:function(t){for(var e=Xt.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new I;if(0<Math.abs(this.areasum2))t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(0<this.totalLength)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(0<this.ptCount))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){0<t.length&&this.setBasePoint(t[0]);for(var e=!Xt.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;Jt.centroid3(t,e,n,this.triangleCent3);var o=Jt.area2(t,e,n);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o},add:function(){if(arguments[0]instanceof It){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof k){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof wt)this.addPoint(n.getCoordinate());else if(n instanceof xt)this.addLineSegments(n.getCoordinates());else if(n instanceof It){var i=n;this.add(i)}else if(n instanceof ft)for(var r=n,e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return Jt}}),Jt.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},Jt.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},Jt.getCentroid=function(t){var e=new Jt(t);return e.getCentroid()},(Kt.prototype=new Error).name="EmptyStackException",(Zt.prototype=new y).add=function(t){return this.array_.push(t),!0},Zt.prototype.get=function(t){if(t<0||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},Zt.prototype.push=function(t){return this.array_.push(t),t},Zt.prototype.pop=function(t){if(0===this.array_.length)throw new Kt;return this.array_.pop()},Zt.prototype.peek=function(){if(0===this.array_.length)throw new Kt;return this.array_[this.array_.length-1]},Zt.prototype.empty=function(){return 0===this.array_.length},Zt.prototype.isEmpty=function(){return this.empty()},Zt.prototype.search=function(t){return this.array_.indexOf(t)},Zt.prototype.size=function(){return this.array_.length},Zt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e(Qt.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[z]},getClass:function(){return Qt}}),Qt.filterCoordinates=function(t){for(var e=new Qt,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e($t.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return ut.sort(t,1,t.length,new te(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new E;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){d.equals(t[0],t[t.length-1]);for(var e=new b,n=null,i=0;i<=t.length-2;i++){var r=t[i],o=t[i+1];r.equals(o)||null!==n&&this.isBetween(n,r,o)||(e.add(r),n=r)}e.add(t[t.length-1]);var s=new Array(e.size()).fill(null);return e.toArray(s)},isBetween:function(t,e,n){if(0!==Xt.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new at,i=0;i<e.length;i++)n.add(e[i]);for(var i=0;i<t.length;i++)Xt.isPointInRing(t[i],e)||n.add(t[i]);var r=X.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;50<this.inputPts.length&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new Zt;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&0<Xt.computeOrientation(n.peek(),e,t[i]);)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return $t}}),$t.extractCoordinates=function(t){var e=new Qt;return t.apply(e),e.getCoordinates()},e(te.prototype,{compare:function(t,e){var n=t,i=e;return te.polarCompare(this.origin,n,i)},interfaces_:function(){return[o]},getClass:function(){return te}}),te.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=Xt.computeOrientation(t,e,n);if(a===Xt.COUNTERCLOCKWISE)return 1;if(a===Xt.CLOCKWISE)return-1;var u=i*i+r*r,h=o*o+s*s;return u<h?-1:h<u?1:0},$t.RadialComparator=te,e(ee.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Mt&&!i.isEmpty()||(n=!1);for(var r=new b,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof Mt||(n=!1),r.add(s))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new b;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new b,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(kt.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof wt)return this.transformPoint(t,null);if(t instanceof bt)return this.transformMultiPoint(t,null);if(t instanceof Mt)return this.transformLinearRing(t,null);if(t instanceof xt)return this.transformLineString(t,null);if(t instanceof dt)return this.transformMultiLineString(t,null);if(t instanceof It)return this.transformPolygon(t,null);if(t instanceof St)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new l("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return 0<i&&i<4&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return ee}}),e(ne.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;i<n;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new I(o)),0===i&&this._isClosed&&t.set(t.size()-1,new I(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new E(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;i<n;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);0<=o&&t.add(o+1,new I(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=m.MAX_VALUE,i=-1,r=0;r<e.size()-1;r++){if(this.seg.p0=e.get(r),this.seg.p1=e.get(r+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var o=this.seg.distance(t);o<this.snapTolerance&&o<n&&(n=o,i=r)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return ne}}),ne.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(ie.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),i=new re(e,n);return i.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),i=new re(t,n,!0),r=i.transform(this.srcGeom),o=r;return e&&N(o,_t)&&(o=r.buffer(0)),o},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new at,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);i<e&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return ie}}),ie.snap=function(t,e,n){var i=new Array(2).fill(null),r=new ie(t);i[0]=r.snapTo(e,n);var o=new ie(e);return i[1]=o.snapTo(i[0],n),i},ie.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=ie.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Gt.FIXED){var i=1/n.getScale()*2/1.415;e<i&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(ie.computeOverlaySnapTolerance(r),ie.computeOverlaySnapTolerance(o))}},ie.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),i=n*ie.SNAP_PRECISION_FACTOR;return i},ie.snapToSelf=function(t,e,n){var i=new ie(t);return i.snapToSelf(e,n)},ie.SNAP_PRECISION_FACTOR=1e-9,a(re,ee),e(re.prototype,{snapLine:function(t,e){var n=new ne(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return re}}),e(oe.prototype,{getCommon:function(){return m.longBitsToDouble(this.commonBits)},add:function(t){var e=m.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=oe.signExpBits(this.commonBits),this.isFirst=!1,null;var n=oe.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=oe.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=oe.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=m.longBitsToDouble(t),n=Long.toBinaryString(t),i="0000000000000000000000000000000000000000000000000000000000000000"+n,r=i.substring(i.length-64),o=r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]";return o}},interfaces_:function(){return[]},getClass:function(){return oe}}),oe.getBit=function(t,e){var n=1<<e;return 0!=(t&n)?1:0},oe.signExpBits=function(t){return t>>52},oe.zeroLowerBits=function(t,e){var n=(1<<e)-1,i=~n,r=t&i;return r},oe.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;0<=i;i--){if(oe.getBit(t,i)!==oe.getBit(e,i))return n;n++}return 52},e(se.prototype,{addCommonBits:function(t){var e=new ue(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new I(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new ue(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return se}}),e(ae.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new I(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[z]},getClass:function(){return ae}}),e(ue.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[lt]},getClass:function(){return ue}}),se.CommonCoordinateFilter=ae,se.Translater=ue,e(he.prototype,{next:function(){if(this.atStart)return this.atStart=!1,he.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new g;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new he(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[c]},getClass:function(){return he}}),he.isAtomic=function(t){return!(t instanceof ft)},e(ce.prototype,{locateInternal:function(){if(arguments[0]instanceof I&&arguments[1]instanceof It){var t=arguments[0],e=arguments[1];if(e.isEmpty())return S.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===S.EXTERIOR)return S.EXTERIOR;if(i===S.BOUNDARY)return S.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===S.INTERIOR)return S.EXTERIOR;if(s===S.BOUNDARY)return S.BOUNDARY}return S.INTERIOR}if(arguments[0]instanceof I&&arguments[1]instanceof xt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return S.EXTERIOR;var h=u.getCoordinates();return u.isClosed()||!a.equals(h[0])&&!a.equals(h[h.length-1])?Xt.isOnLine(a,h)?S.INTERIOR:S.EXTERIOR:S.BOUNDARY}if(arguments[0]instanceof I&&arguments[1]instanceof wt){var c=arguments[0],l=arguments[1],f=l.getCoordinate();return f.equals2D(c)?S.INTERIOR:S.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?Xt.locatePointInRing(t,e.getCoordinates()):S.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==S.EXTERIOR},updateLocationInfo:function(t){t===S.INTERIOR&&(this.isIn=!0),t===S.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof wt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof xt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof It)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof dt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof St)for(var o=e,i=0;i<o.getNumGeometries();i++){var s=o.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ft)for(var a=new he(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},locate:function(t,e){return e.isEmpty()?S.EXTERIOR:e instanceof xt?this.locateInternal(t,e):e instanceof It?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?S.BOUNDARY:0<this.numBoundaries||this.isIn?S.INTERIOR:S.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return ce}}),e(le.prototype,{interfaces_:function(){return[]},getClass:function(){return le}}),le.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new l("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),i=Math.abs(e);return 0<=t?0<=e?i<=n?0:1:i<=n?7:6:0<=e?i<=n?3:2:i<=n?4:5}if(arguments[0]instanceof I&&arguments[1]instanceof I){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new l("Cannot compute the octant for two identical points "+r);return le.octant(s,a)}},e(fe.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return fe}}),e(de.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:le.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return jt.toLineString(new Rt(this.pts))},interfaces_:function(){return[fe]},getClass:function(){return de}}),e(ge.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return ge}}),e(pe.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[ge,s]},getClass:function(){return pe}}),e(ve.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return ve}}),e(ye.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return ye}}),e(me.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return me}}),e(xe.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){d.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[ge,s]},getClass:function(){return xe}}),xe.serialVersionUID=0x5a1e55ec41369800;var Vo={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Vo.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?ut.sort(n,e):ut.sort(n);for(var i=t.iterator(),r=0,o=n.length;r<o;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new b;return e.add(t),e}};e(Ee.prototype,{expandToQueue:function(t,e){var n=Ee.isComposite(this.boundable1),i=Ee.isComposite(this.boundable2);if(n&&i)return Ee.area(this.boundable1)>Ee.area(this.boundable2)?this.expand(this.boundable1,this.boundable2,t,e):this.expand(this.boundable2,this.boundable1,t,e),null;if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(i)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new l("neither boundable is composite")},isLeaves:function(){return!(Ee.isComposite(this.boundable1)||Ee.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables(),o=r.iterator();o.hasNext();){var s=o.next(),a=new Ee(s,e,this.itemDistance);a.getDistance()<i&&n.add(a)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[n]},getClass:function(){return Ee}}),Ee.area=function(t){return t.getBounds().getArea()},Ee.isComposite=function(t){return t instanceof xe},e(we.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();i instanceof xe?e+=this.size(i):i instanceof pe&&(e+=1)}return e}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof pe&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new b:t}if(1===arguments.length){for(var e=arguments[0],n=new b,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof xe){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof pe?n.add(r.getItem()):d.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){d.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new pe(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new b;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(d.isTrue(-2<n),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof xe?this.boundablesAtLevel(n,s,r):(d.isTrue(s instanceof pe),-1===n&&r.add(s))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new b;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(N(arguments[2],ye)&&arguments[0]instanceof Object&&arguments[1]instanceof xe)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var h=a.get(u);this.getIntersectsOp().intersects(h.getBounds(),r)&&(h instanceof xe?this.query(r,h,s):h instanceof pe?s.visitItem(h.getItem()):d.shouldNeverReachHere())}else if(N(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof xe)for(var c=arguments[0],l=arguments[1],f=arguments[2],a=l.getChildBoundables(),u=0;u<a.size();u++){var h=a.get(u);this.getIntersectsOp().intersects(h.getBounds(),c)&&(h instanceof xe?this.query(c,h,f):h instanceof pe?f.add(h.getItem()):d.shouldNeverReachHere())}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof xe&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},createHigherLevels:function(t,e){d.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var i=n.next();if(i instanceof xe){var r=this.depth(i);e<r&&(e=r)}}return e+1}},createParentBoundables:function(t,e){d.isTrue(!t.isEmpty());var n=new b;n.add(this.createNode(e));var i=new b(t);Vo.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[s]},getClass:function(){return we}}),we.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},we.IntersectsOp=function(){},we.serialVersionUID=-0x35ef64c82d4c5400,we.DEFAULT_NODE_CAPACITY=10,e(_e.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return _e}}),a(Ie,we),e(Ie.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){d.isTrue(0<t.length);for(var n=new b,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new be(t)},size:function(){return 0===arguments.length?we.prototype.size.call(this):we.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return we.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void we.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Ie.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){i[o]=new b;for(var s=0;r.hasNext()&&s<n;){var a=r.next();i[o].add(a),s++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return we.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];we.prototype.query.call(this,e,n)}else if(3===arguments.length)if(N(arguments[2],ye)&&arguments[0]instanceof Object&&arguments[1]instanceof xe){var i=arguments[0],r=arguments[1],o=arguments[2];we.prototype.query.call(this,i,r,o)}else if(N(arguments[2],y)&&arguments[0]instanceof Object&&arguments[1]instanceof xe){var s=arguments[0],a=arguments[1],u=arguments[2];we.prototype.query.call(this,s,a,u)}},getComparator:function(){return Ie.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return we.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return we.prototype.remove.call(this,t,e)}return we.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?we.prototype.depth.call(this):we.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){d.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new b(t);Vo.sort(i,Ie.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(N(arguments[0],_e)){var t=arguments[0],e=new Ee(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ee){var n=arguments[0];return this.nearestNeighbour(n,m.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof Ie&&N(arguments[1],_e)){var i=arguments[0],r=arguments[1],e=new Ee(this.getRoot(),i.getRoot(),r);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ee&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=s,u=null,h=new ve;for(h.add(o);!h.isEmpty()&&0<a;){var c=h.poll(),l=c.getDistance();if(a<=l)break;c.isLeaves()?(a=l,u=c):c.expandToQueue(h,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],d=arguments[1],g=arguments[2],p=new pe(f,d),e=new Ee(this.getRoot(),p,g);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[me,s]},getClass:function(){return Ie}}),Ie.centreX=function(t){return Ie.avg(t.getMinX(),t.getMaxX())},Ie.avg=function(t,e){return(t+e)/2},Ie.centreY=function(t){return Ie.avg(t.getMinY(),t.getMaxY())},a(be,xe),e(be.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new w(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return be}}),Ie.STRtreeNode=be,Ie.serialVersionUID=0x39920f7d5f261e0,Ie.xComparator={interfaces_:function(){return[o]},compare:function(t,e){return we.compareDoubles(Ie.centreX(t.getBounds()),Ie.centreX(e.getBounds()))}},Ie.yComparator={interfaces_:function(){return[o]},compare:function(t,e){return we.compareDoubles(Ie.centreY(t.getBounds()),Ie.centreY(e.getBounds()))}},Ie.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Ie.DEFAULT_NODE_CAPACITY=10,e(Me.prototype,{interfaces_:function(){return[]},getClass:function(){return Me}}),Me.relativeSign=function(t,e){return t<e?-1:e<t?1:0},Me.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Me.relativeSign(e.x,n.x),r=Me.relativeSign(e.y,n.y);switch(t){case 0:return Me.compareValue(i,r);case 1:return Me.compareValue(r,i);case 2:return Me.compareValue(r,-i);case 3:return Me.compareValue(-i,r);case 4:return Me.compareValue(-i,-r);case 5:return Me.compareValue(-r,-i);case 6:return Me.compareValue(-r,i);case 7:return Me.compareValue(i,-r)}return d.shouldNeverReachHere("invalid octant value"),0},Me.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0},e(Se.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Me.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[n]},getClass:function(){return Se}}),e(Ne.prototype,{getSplitCoordinates:function(){var t=new E;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new b;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new P(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex,t.segmentIndex;var i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new I(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this.edge.getCoordinate(o));r&&n.add(new I(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next(),o=this.findCollapseIndex(i,r,e);o&&t.add(new P(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new I(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.getCoordinate(a);return r&&(o[s]=new I(e.coord)),new Pe(o,this.edge.getData())},add:function(t,e){var n=new Se(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(d.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),i=n.getCoordinate(0);if(!i.equals2D(e[0]))throw new x("bad split edge start point at "+i);var r=t.get(t.size()-1),o=r.getCoordinates(),s=o[o.length-1];if(!s.equals2D(e[e.length-1]))throw new x("bad split edge end point at "+s)},interfaces_:function(){return[]},getClass:function(){return Ne}}),e(Ce.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[c]},getClass:function(){return Ce}}),e(Le.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[fe]},getClass:function(){return Le}}),e(Pe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:le.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),o=new I(n.getIntersection(r));this.addIntersection(o,i)}},toString:function(){return jt.toLineString(new Rt(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}var o=this.nodeList.add(t,n);return o},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[Le]},getClass:function(){return Pe}}),Pe.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new b;return Pe.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){var o=r.next();o.getNodeList().addSplitEdges(i)}},e(Oe.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return Oe}}),e(Re.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],o=this.pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,i),s<n&&this.computeSelect(t,s,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new w(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,o){var s=this.pts[t],a=this.pts[e],u=n.pts[i],h=n.pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,h),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),l=Math.trunc((i+r)/2);t<c&&(i<l&&this.computeOverlapsInternal(t,c,n,i,l,o),l<r&&this.computeOverlapsInternal(t,c,n,l,r,o)),c<e&&(i<l&&this.computeOverlapsInternal(c,e,n,i,l,o),l<r&&this.computeOverlapsInternal(c,e,n,l,r,o))},interfaces_:function(){return[]},getClass:function(){return Re}}),e(Te.prototype,{interfaces_:function(){return[]},getClass:function(){return Te}}),Te.isNorthern=function(t){return t===Te.NE||t===Te.NW},Te.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n},Te.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var i=t<e?t:e,r=e<t?t:e;return 0===i&&3===r?3:i},Te.isInHalfPlane=function(t,e){return e===Te.SE?t===Te.SE||t===Te.SW:t===e||t===e+1},Te.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new l("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?Te.NE:Te.SE:0<=e?Te.NW:Te.SW}if(arguments[0]instanceof I&&arguments[1]instanceof I){var n=arguments[0],i=arguments[1];if(i.x===n.x&&i.y===n.y)throw new l("Cannot compute the quadrant for two identical points "+n);return i.x>=n.x?i.y>=n.y?Te.NE:Te.SE:i.y>=n.y?Te.NW:Te.SW}},Te.NE=0,Te.NW=1,Te.SW=2,Te.SE=3,e(Ae.prototype,{interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.getChainStartIndices=function(t){var e=0,n=new b;n.add(new P(e));do{var i=Ae.findChainEnd(t,e);n.add(new P(i)),e=i}while(e<t.length-1);var r=Ae.toIntArray(n);return r},Ae.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Te.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r])){var o=Te.quadrant(t[r-1],t[r]);if(o!==i)break}r++}return r-1},Ae.getChains=function(){if(1===arguments.length){var t=arguments[0];return Ae.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new b,r=Ae.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new Re(e,r[o],r[o+1],n);i.add(s)}return i}},Ae.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(De.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return De}}),e(Fe.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[De]},getClass:function(){return Fe}}),a(Ge,Fe),e(Ge.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Pe.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Ae.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var i=n.next();i.setId(this.idCounter++),this.index.insert(i.getEnvelope(),i),this.monoChains.add(i)}},computeNodes:function(t){for(var e=(this.nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new qe(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()),r=i.iterator();r.hasNext();){var o=r.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Ge}}),a(qe,Oe),e(qe.prototype,{overlap:function(){if(4!==arguments.length)return Oe.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),o=n.getContext();this.si.processIntersections(r,e,o,i)},interfaces_:function(){return[]},getClass:function(){return qe}}),Ge.SegmentOverlapAction=qe,a(ke,x),e(ke.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ke}}),ke.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(ze.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return ze}}),e(je.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly){var r=this.isEndSegment(t,e)||this.isEndSegment(n,i);if(!r)return null}var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[i],u=n.getCoordinates()[i+1];this.li.computeIntersection(o,s,a,u),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=o,this.intSegments[1]=s,this.intSegments[2]=a,this.intSegments[3]=u,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[ze]},getClass:function(){return je}}),je.createAllIntersectionsFinder=function(t){var e=new je(t);return e.setFindAllIntersections(!0),e},je.createAnyIntersectionFinder=function(t){return new je(t)},je.createIntersectionCounter=function(t){var e=new je(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(Be.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new je(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Ge;if(t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection())return this._isValid=!1,null},checkValid:function(){if(this.execute(),!this._isValid)throw new ke(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+jt.toLineString(t[0],t[1])+" and "+jt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return Be}}),Be.computeIntersections=function(t){var e=new Be(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(Ue.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.toSegmentStrings=function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();e.add(new de(i.getCoordinates(),i))}return e},Ue.checkValid=function(t){var e=new Ue(t);e.checkValid()},e(Ve.prototype,{map:function(t){for(var e=new b,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(kt.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return Ve}}),Ve.map=function(t,e){var n=new Ve(e);return n.map(t)},e(Ye.prototype,{interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.opposite=function(t){return t===Ye.LEFT?Ye.RIGHT:t===Ye.RIGHT?Ye.LEFT:t},Ye.ON=0,Ye.LEFT=1,Ye.RIGHT=2,e(Xe.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==S.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===S.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Ye.ON]=this.location[Ye.ON],e[Ye.LEFT]=S.NONE,e[Ye.RIGHT]=S.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===S.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[Ye.LEFT];this.location[Ye.LEFT]=this.location[Ye.RIGHT],this.location[Ye.RIGHT]=t},toString:function(){var t=new L;return 1<this.location.length&&t.append(S.toLocationSymbol(this.location[Ye.LEFT])),t.append(S.toLocationSymbol(this.location[Ye.ON])),1<this.location.length&&t.append(S.toLocationSymbol(this.location[Ye.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[Ye.ON]=t,this.location[Ye.LEFT]=e,this.location[Ye.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:S.NONE},isArea:function(){return 1<this.location.length},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===S.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Ye.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(S.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return Xe}}),e(We.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Xe(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Ye.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new L;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Ye.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new Xe(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return We}}),We.toLineLabel=function(t){for(var e=new We(S.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e},e(He.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=Xt.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){var e=this.startDe=t,n=!0;do{if(null===e)throw new ke("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ke("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();d.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this.pts.add(i[o])}else{var r=i.length-2;n&&(r=i.length-1);for(var o=r;0<=o;o--)this.pts.add(i[o])}},isHole:function(){return this._isHole},setInResult:function(){for(var t=this.startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this.startDe;);},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!Xt.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this.holes.iterator();i.hasNext();){var r=i.next();if(r.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,Ye.RIGHT);if(i===S.NONE)return null;if(this.label.getLocation(n)===S.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){null!==(this.shell=t)&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var i=t.createPolygon(this.getLinearRing(),e);return i},interfaces_:function(){return[]},getClass:function(){return He}}),a(Je,He),e(Je.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Je}}),a(Ke,He),e(Ke.prototype,{buildMinimalRings:function(){var t=new b,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new Je(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return Ke}}),e(Ze.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){d.isTrue(2<=this.label.getGeometryCount(),"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Ze}}),a(Qe,Ze),e(Qe.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=S.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==S.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return Ze.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new We(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof Qe){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof We)for(var e=arguments[0],n=0;n<2;n++){var i=this.computeMergedLocation(e,n),r=this.label.getLocation(n);r===S.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=S.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case S.BOUNDARY:n=S.INTERIOR;break;case S.INTERIOR:n=S.BOUNDARY;break;default:n=S.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return Qe}}),e($e.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof I){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Qe){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return null===e?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new b,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===S.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return $e}}),e(tn.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Xt.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);return"  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Te.quadrant(this.dx,this.dy),d.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[n]},getClass:function(){return tn}}),a(en,tn),e(en.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new We(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new ke("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;e<2;e++)this.label.isArea(e)&&this.label.getLocation(e,Ye.LEFT)===S.INTERIOR&&this.label.getLocation(e,Ye.RIGHT)===S.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){tn.prototype.print.call(this,t),t.print(" "+this.depth[Ye.LEFT]+"/"+this.depth[Ye.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,S.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,S.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===Ye.LEFT&&(i=-1);var r=Ye.opposite(t),o=n*i,s=e+o;this.setDepth(t,e),this.setDepth(r,s)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return en}}),en.depthFactor=function(t,e){return t===S.EXTERIOR&&e===S.INTERIOR?1:t===S.INTERIOR&&e===S.EXTERIOR?-1:0},e(nn.prototype,{createNode:function(t){return new Qe(t,null)},interfaces_:function(){return[]},getClass:function(){return nn}}),e(rn.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof Qe){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof I){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){D.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===S.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&Xt.computeOrientation(t,e,i)===Xt.COLLINEAR&&Te.quadrant(t,e)===Te.quadrant(n,i)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){D.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new en(n,!0),r=new en(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return rn}}),rn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},e(on.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next(),r=i.toPolygon(this.geometryFactory);e.add(r)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new ke("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new b,r=t.iterator();r.hasNext();){var o=r.next();if(2<o.getMaxNodeDegree()){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Ke(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),h=u.getLinearRing(),c=h.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var l=!1;c.contains(i)&&Xt.isPointInRing(r,h.getCoordinates())&&(l=!0),l&&(null===o||s.contains(c))&&(o=u)}return o},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return d.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];rn.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new b,o=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return on}}),e(sn.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!qn.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var i=n.next(),r=i.getEdge();if(i.isLineEdge()&&!r.isCoveredSet()){var o=this.op.isCoveredByA(i.getCoordinate());r.setCovered(o)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(d.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(qn.isResultOfOp(i,e)&&e===qn.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return sn}}),e(an.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==qn.INTERSECTION)){var i=n.getLabel();qn.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return an}}),e(un.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return un}}),e(hn.prototype,{locate:function(t){return hn.locate(t,this.geom)},interfaces_:function(){return[un]},getClass:function(){return hn}}),hn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Xt.isPointInRing(t,e.getCoordinates())},hn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!hn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(hn.isPointInRing(t,r))return!1}return!0},hn.containsPoint=function(t,e){if(e instanceof It)return hn.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new he(e);n.hasNext();){var i=n.next();if(i!==e&&hn.containsPoint(t,i))return!0}return!1},hn.locate=function(t,e){return e.isEmpty()?S.EXTERIOR:hn.containsPoint(t,e)?S.INTERIOR:S.EXTERIOR},e(cn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=S.NONE,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();r.isArea(t)&&r.getLocation(t,Ye.LEFT)!==S.NONE&&(e=r.getLocation(t,Ye.LEFT))}if(e===S.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var i=n.next(),r=i.getLabel();if(r.getLocation(t,Ye.ON)===S.NONE&&r.setLocation(t,Ye.ON,o),r.isArea(t)){var s=r.getLocation(t,Ye.LEFT),a=r.getLocation(t,Ye.RIGHT);if(a!==S.NONE){if(a!==o)throw new ke("side location conflict",i.getCoordinate());s===S.NONE&&d.shouldNeverReachHere("found single null side (at "+i.getCoordinate()+")"),o=s}else d.isTrue(r.getLocation(t,Ye.LEFT)===S.NONE,"found single null side"),r.setLocation(t,Ye.RIGHT,o),r.setLocation(t,Ye.LEFT,o)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){D.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel(),r=i.getLocation(t,Ye.LEFT);d.isTrue(r!==S.NONE,"Found unlabelled area edge");for(var o=r,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();d.isTrue(u.isArea(t),"Found non-area edge");var h=u.getLocation(t,Ye.LEFT),c=u.getLocation(t,Ye.RIGHT);if(h===c)return!1;if(c!==o)return!1;o=h}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new b(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===S.NONE&&(this.ptInAreaLocation[t]=hn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new L;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++)r.isLine(o)&&r.getLocation(o)===S.BOUNDARY&&(e[o]=!0);for(var n=this.iterator();n.hasNext();)for(var i=n.next(),r=i.getLabel(),o=0;o<2;o++)if(r.isAnyNull(o)){var s=S.NONE;if(e[o])s=S.EXTERIOR;else{var a=i.getCoordinate();s=this.getLocation(o,a,t)}r.setAllLocationsIfNull(o,s)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return cn}}),a(ln,cn),e(ln.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new ke("no outgoing dirEdge found",this.getCoordinate());d.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Te.isNorthern(r)&&Te.isNorthern(o)?n:Te.isNorthern(r)||Te.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(d.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){D.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new b;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;0<=n;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(Ye.LEFT)),i=t.getDepth(Ye.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n),o=this.computeDepths(0,e,r);if(o!==i)throw new ke("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],a=arguments[1],u=arguments[2],h=u,c=s;c<a;c++){var l=this.edgeList.get(c);l.getLabel(),l.setEdgeDepths(Ye.RIGHT,h),h=l.getDepth(Ye.LEFT)}return h}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;0<=r;r--){var o=this.resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(d.isTrue(null!==e,"found null for first outgoing dirEdge"),d.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var i=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===i&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=S.NONE,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=S.INTERIOR;break}if(i.isInResult()){t=S.EXTERIOR;break}}}if(t===S.NONE)return null;for(var r=t,e=this.iterator();e.hasNext();){var n=e.next(),i=n.getSym();n.isLineEdge()?n.getEdge().setCovered(r===S.INTERIOR):(n.isInResult()&&(r=S.EXTERIOR),i.isInResult()&&(r=S.INTERIOR))}},computeLabelling:function(t){cn.prototype.computeLabelling.call(this,t),this.label=new We(S.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge(),r=i.getLabel(),o=0;o<2;o++){var s=r.getLocation(o);s!==S.INTERIOR&&s!==S.BOUNDARY||this.label.setLocation(o,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return ln}}),a(fn,nn),e(fn.prototype,{createNode:function(t){return new Qe(t,new ln)},interfaces_:function(){return[]},getClass:function(){return fn}}),e(dn.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return dn}}),e(gn.prototype,{isDelete:function(){return this.eventType===gn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===gn.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[n]},getClass:function(){return gn}}),gn.INSERT=1,gn.DELETE=2,e(pn.prototype,{interfaces_:function(){return[]},getClass:function(){return pn}}),e(vn.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(vn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinate();if(t.isIntersection(r))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return vn}}),vn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},a(yn,pn),e(yn.prototype,{prepareEvents:function(){Vo.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof vn&&N(arguments[0],y)&&N(arguments[1],y)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&N(arguments[0],y)&&arguments[1]instanceof vn){var s=arguments[0],a=arguments[1],u=arguments[2];u?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new dn(n,r),s=new gn(e,n.getMinX(r),o);this.events.add(s),this.events.add(new gn(n.getMaxX(r),s))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],e=i.iterator();e.hasNext();){var n=e.next();this.addEdge(n,r)}},interfaces_:function(){return[]},getClass:function(){return yn}}),e(mn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return jt.toLineString(new I(this.min,0),new I(this.max,0))},interfaces_:function(){return[]},getClass:function(){return mn}}),e(xn.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,o=(i.min+i.max)/2;return r<o?-1:o<r?1:0},interfaces_:function(){return[o]},getClass:function(){return xn}}),mn.NodeComparator=xn,a(En,mn),e(En.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return En}}),a(wn,mn),e(wn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return wn}}),e(_n.prototype,{buildTree:function(){Vo.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new b;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new En(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){D.out.println(jt.toLineString(new I(t.min,this.level),new I(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n),r=n+1<t.size()?t.get(n):null;if(null===r)e.add(i);else{var o=new wn(t.get(n),t.get(n+1));e.add(o)}}},interfaces_:function(){return[]},getClass:function(){return _n}}),e(In.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Mt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof xt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[q]},getClass:function(){return In}}),In.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(In.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(In.getLines(e,n))}},In.getLines=function(){if(1===arguments.length){var t=arguments[0];return In.getLines(t,!1)}if(2===arguments.length){if(N(arguments[0],v)&&N(arguments[1],v)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();In.getLines(r,n)}return n}if(arguments[0]instanceof k&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new b;return o.apply(new In(a,s)),a}if(arguments[0]instanceof k&&N(arguments[1],v)){var u=arguments[0],h=arguments[1];return u instanceof xt?h.add(u):u.apply(new In(h)),h}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&N(arguments[0],v)&&N(arguments[1],v)){for(var c=arguments[0],l=arguments[1],f=arguments[2],i=c.iterator();i.hasNext();){var r=i.next();In.getLines(r,l,f)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof k&&N(arguments[1],v)){var d=arguments[0],g=arguments[1],p=arguments[2];return d.apply(new In(g,p)),g}}},e(bn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[ye]},getClass:function(){return bn}}),e(Mn.prototype,{locate:function(t){var e=new Yt(t),n=new Sn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[un]},getClass:function(){return Mn}}),e(Sn.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[ye]},getClass:function(){return Sn}}),e(Nn.prototype,{init:function(t){for(var e=In.getLines(t),n=e.iterator();n.hasNext();){var i=n.next(),r=i.getCoordinates();this.addLine(r)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new Wt(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new bn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.index.query(i,r,o)}},interfaces_:function(){return[]},getClass:function(){return Nn}}),Mn.SegmentVisitor=Sn,Mn.IntervalIndexedGeometry=Nn,e(Cn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[n]},getClass:function(){return Cn}}),e(Ln.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=0<e.dist||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new I(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new Tn(o,new We(this.edge.label))},add:function(t,e,n){var i=new Cn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Ln}}),e(Pn.prototype,{getChainStartIndices:function(t){var e=0,n=new b;n.add(new P(e));do{var i=this.findChainEnd(t,e);n.add(new P(i)),e=i}while(e<t.length-1);var r=Pn.toIntArray(n);return r},findChainEnd:function(t,e){for(var n=Te.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){var r=Te.quadrant(t[i-1],t[i]);if(r!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Pn}}),Pn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(On.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],h=arguments[5],c=this.pts[r],l=this.pts[o],f=s.pts[a],d=s.pts[u];if(o-r==1&&u-a==1)return h.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,l),this.env2.init(f,d),!this.env1.intersects(this.env2))return null;var g=Math.trunc((r+o)/2),p=Math.trunc((a+u)/2);r<g&&(a<p&&this.computeIntersectsForChain(r,g,s,a,p,h),p<u&&this.computeIntersectsForChain(r,g,s,p,u,h)),g<o&&(a<p&&this.computeIntersectsForChain(g,o,s,a,p,h),p<u&&this.computeIntersectsForChain(g,o,s,p,u,h))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return On}}),e(Rn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this.depth[t][e]!==Rn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Rn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===Rn.NULL_VALUE}},normalize:function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][Ye.RIGHT]-this.depth[t][Ye.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?S.EXTERIOR:S.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var n=1;n<3;n++){var i=t.getLocation(e,n);i!==S.EXTERIOR&&i!==S.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Rn.depthAtLocation(i):this.depth[e][n]+=Rn.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];s===S.INTERIOR&&this.depth[r][o]++}},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.depthAtLocation=function(t){return t===S.EXTERIOR?0:t===S.INTERIOR?1:Rn.NULL_VALUE},Rn.NULL_VALUE=-1,a(Tn,Ze),e(Tn.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Tn(t,We.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Tn))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Tn.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new On(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new w;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new I(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)},toString:function(){var t=new L;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return Tn}}),Tn.updateIM=function(){if(2!==arguments.length)return Ze.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Ye.ON),t.getLocation(1,Ye.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Ye.LEFT),t.getLocation(1,Ye.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Ye.RIGHT),t.getLocation(1,Ye.RIGHT),2))},a(An,rn),e(An.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),i=n.getLabel(),r=1;i.getLocation(t,Ye.ON)===S.BOUNDARY&&r++;var o=An.determineBoundary(this.boundaryNodeRule,r);i.setLocation(t,o)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new vn(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this.parentGeom instanceof Mt||this.parentGeom instanceof It||this.parentGeom instanceof St,u=i||!a;return s.computeIntersections(this.edges,o,u),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new vn(e,n,!0);i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var r=this.createEdgeSetIntersector();return r.computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof wt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,S.INTERIOR)}else if(arguments[0]instanceof I){var n=arguments[0];this.insertPoint(this.argIndex,n,S.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),S.EXTERIOR,S.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,S.INTERIOR,S.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],S.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],S.BOUNDARY)},addLineString:function(t){var e=X.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Tn(e,new We(this.argIndex,S.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),d.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===S.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=X.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,o=n;Xt.isCCW(i)&&(r=n,o=e);var s=new Tn(i,new We(this.argIndex,S.BOUNDARY,r,o));this.lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this.argIndex,i[0],S.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new We(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new yn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},add:function(){if(1!==arguments.length)return rn.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof St&&(this.useBoundaryDeterminationRule=!1),t instanceof It)this.addPolygon(t);else if(t instanceof xt)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof bt)this.addCollection(t);else if(t instanceof dt)this.addCollection(t);else if(t instanceof St)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return N(this.parentGeom,_t)&&50<this.parentGeom.getNumGeometries()?(null===this.areaPtLocator&&(this.areaPtLocator=new Mn(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return rn.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return An}}),An.determineBoundary=function(t,e){return t.isInBoundary(e)?S.BOUNDARY:S.INTERIOR},e(Dn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Dn}}),e(Fn.prototype,{compareTo:function(t){var e=t,n=Fn.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[n]},getClass:function(){return Fn}}),Fn.orientation=function(t){return 1===X.increasingDirection(t)},Fn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,h=i?0:n.length-1;;){var c=t[u].compareTo(n[h]);if(0!==c)return c;var l=(u+=r)===s,f=(h+=o)===a;if(l&&!f)return-1;if(!l&&f)return 1;if(l&&f)return 0}},e(Gn.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);0<e&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)0<r&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Fn(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new Fn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Gn}}),a(qn,Dn),e(qn.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new We(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new b;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?qn.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next(),r=this.ptLocator.locate(t,i);if(r!==S.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new b,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new b;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ue.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new on(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new sn(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new an(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.graph.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&qn.isResultOfOp(i.getLocation(0,Ye.RIGHT),i.getLocation(1,Ye.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;r<2;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(d.isTrue(!i.isNull(r,Ye.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,Ye.LEFT,i.getLocation(r,Ye.LEFT)),d.isTrue(!i.isNull(r,Ye.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,Ye.RIGHT,i.getLocation(r,Ye.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return qn}}),qn.overlayOp=function(t,e,n){var i=new qn(t,e),r=i.getResultGeometry(n);return r},qn.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return qn.createEmptyResult(qn.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Ve.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zn.overlayOp(t,e,qn.INTERSECTION)},qn.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return qn.createEmptyResult(qn.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zn.overlayOp(t,e,qn.SYMDIFFERENCE)},qn.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case qn.INTERSECTION:o=Math.min(i,r);break;case qn.UNION:o=Math.max(i,r);break;case qn.DIFFERENCE:o=i;break;case qn.SYMDIFFERENCE:o=Math.max(i,r)}return o},qn.createEmptyResult=function(t,e,n,i){var r=null;switch(qn.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},qn.difference=function(t,e){return t.isEmpty()?qn.createEmptyResult(qn.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zn.overlayOp(t,e,qn.DIFFERENCE))},qn.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return qn.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===S.BOUNDARY&&(r=S.INTERIOR),o===S.BOUNDARY&&(o=S.INTERIOR),s){case qn.INTERSECTION:return r===S.INTERIOR&&o===S.INTERIOR;case qn.UNION:return r===S.INTERIOR||o===S.INTERIOR;case qn.DIFFERENCE:return r===S.INTERIOR&&o!==S.INTERIOR;case qn.SYMDIFFERENCE:return r===S.INTERIOR&&o!==S.INTERIOR||r!==S.INTERIOR&&o===S.INTERIOR}return!1}},qn.INTERSECTION=1,qn.UNION=2,qn.DIFFERENCE=3,qn.SYMDIFFERENCE=4,e(kn.prototype,{selfSnap:function(t){var e=new ie(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new se,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=qn.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||D.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=ie.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=ie.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return kn}}),kn.overlayOp=function(t,e,n){var i=new kn(t,e);return i.getResultGeometry(n)},kn.union=function(t,e){return kn.overlayOp(t,e,qn.UNION)},kn.intersection=function(t,e){return kn.overlayOp(t,e,qn.INTERSECTION)},kn.symDifference=function(t,e){return kn.overlayOp(t,e,qn.SYMDIFFERENCE)},kn.difference=function(t,e){return kn.overlayOp(t,e,qn.DIFFERENCE)},e(zn.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=qn.overlayOp(this.geom[0],this.geom[1],t),n=!0}catch(t){if(!(t instanceof x))throw t;i=t}if(!n)try{e=kn.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof x?i:t}return e},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.overlayOp=function(t,e,n){var i=new zn(t,e);return i.getResultGeometry(n)},zn.union=function(t,e){return zn.overlayOp(t,e,qn.UNION)},zn.intersection=function(t,e){return zn.overlayOp(t,e,qn.INTERSECTION)},zn.symDifference=function(t,e){return zn.overlayOp(t,e,qn.SYMDIFFERENCE)},zn.difference=function(t,e){return zn.overlayOp(t,e,qn.DIFFERENCE)},e(jn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=zn.overlayOp(i,t,qn.INTERSECTION),o=this.widestGeometry(r);n=o.getEnvelopeInternal().getWidth(),e=jn.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ft){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof k){var i=arguments[0];return i instanceof ft?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=Bn.getBisectorY(t);return this.factory.createLineString([new I(e.getMinX(),n),new I(e.getMaxX(),n)])},add:function(t){if(t instanceof It)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return jn}}),jn.centre=function(t){return new I(jn.avg(t.getMinX(),t.getMaxX()),jn.avg(t.getMinY(),t.getMaxY()))},jn.avg=function(t,e){return(t+e)/2},e(Bn.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=jn.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return Bn}}),Bn.getBisectorY=function(t){var e=new Bn(t);return e.getBisectorY()},jn.SafeBisectorFinder=Bn,e(Un.prototype,{addEndpoints:function(){if(arguments[0]instanceof k){var t=arguments[0];if(t instanceof xt)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof k){var t=arguments[0];if(t instanceof xt)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var i=arguments[0],n=1;n<i.length-1;n++)this.add(i[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new I(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Un}}),e(Vn.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof k){var t=arguments[0];if(t instanceof wt)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof I){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new I(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return Vn}}),e(Yn.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return Yn}}),e(Xn.prototype,{hasChildren:function(){for(var t=0;t<2;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<2;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<2;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<2;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();t<n&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;e<2;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(Wn.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof Wn){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,(this.max=e)<t&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return Wn}}),Hn.exponent=function(t){return function(t,e){var n,i,r,o,s={32:8,64:11}[t];if(o||(n=e<0||1/e<0,isFinite(e)||(o={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}}[t],n&&(o.d+=1<<t/4-1),i=Math.pow(2,s)-1,r=0)),!o){for(i={32:127,64:1023}[t],r=Math.abs(e);2<=r;)i++,r/=2;for(;r<1&&0<i;)i--,r*=2;i<=0&&(r/=2),32===t&&254<i&&(o={d:n?255:127,c:128,b:0,a:0},i=Math.pow(2,s)-1,r=0)}return i}(64,t)-1023},Hn.powerOf2=function(t){return Math.pow(2,t)},e(Jn.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Jn.computeLevel(t),this.interval=new Wn,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=Hn.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Jn}}),Jn.computeLevel=function(t){var e=t.getWidth(),n=Hn.exponent(e)+1;return n},a(Kn,Xn),e(Kn.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Xn.getSubnodeIndex(t,this.centre);if(-1===e)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){d.isTrue(null===this.interval||this.interval.contains(t.interval));var e=Xn.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Xn.getSubnodeIndex(t,this.centre);if(-1!==e){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var i=new Wn(e,n),r=new Kn(i,this.level-1);return r},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.createNode=function(t){var e=new Jn(t),n=new Kn(e.getInterval(),e.getLevel());return n},Kn.createExpanded=function(t,e){var n=new Wn(e);null!==t&&n.expandToInclude(t.interval);var i=Kn.createNode(n);return null!==t&&i.insert(t),i},e(Zn.prototype,{interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=Math.max(Math.abs(t),Math.abs(e)),r=n/i,o=Hn.exponent(r);return o<=Zn.MIN_BINARY_EXPONENT},Zn.MIN_BINARY_EXPONENT=-50,a(Qn,Xn),e(Qn.prototype,{insert:function(t,e){var n=Xn.getSubnodeIndex(t,Qn.origin);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=Kn.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){d.isTrue(t.getInterval().contains(e));var i=Zn.isZeroWidth(e.getMin(),e.getMax());(i?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.origin=0,e($n.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=$n.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new Wn(t,t))}if(arguments[0]instanceof Wn){var e=arguments[0],n=new b;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new b;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=$n.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&0<e&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(i=(n-=e/2)+e/2),new Wn(n,i))},e(ti.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return ti}}),e(ei.prototype,{testLineSegment:function(t,e){var n=null,i=null,r=null,o=null,s=e.p0,a=e.p1;n=s.x-t.x,i=s.y-t.y,r=a.x-t.x,o=a.y-t.y,(0<i&&o<=0||0<o&&i<=0)&&0<Vt.signOfDet2x2(n,i,r,o)/(o-i)&&this.crossings++},buildIndex:function(){this.tree=new $n;for(var t=X.removeRepeatedPoints(this.ring.getCoordinates()),e=Ae.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new w(m.NEGATIVE_INFINITY,m.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new ni(this,t),r=n.iterator();r.hasNext();){var o=r.next();this.testMonotoneChain(e,i,o)}return this.crossings%2==1},interfaces_:function(){return[ti]},getClass:function(){return ei}}),a(ni,Yn),e(ni.prototype,{select:function(){if(1!==arguments.length)return Yn.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return ni}}),ei.MCSelecter=ni,e(ii.prototype,{interfaces_:function(){return[]},getClass:function(){return ii}}),ii.toDegrees=function(t){return 180*t/Math.PI},ii.normalize=function(t){for(;t>Math.PI;)t-=ii.PI_TIMES_2;for(;t<=-Math.PI;)t+=ii.PI_TIMES_2;return t},ii.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},ii.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=i*o+r*s;return 0<a},ii.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=i*o+r*s;return a<0},ii.interiorAngle=function(t,e,n){var i=ii.angle(e,t),r=ii.angle(e,n);return Math.abs(r-i)},ii.normalizePositive=function(t){if(t<0){for(;t<0;)t+=ii.PI_TIMES_2;ii.PI_TIMES_2<=t&&(t=0)}else{for(;ii.PI_TIMES_2<=t;)t-=ii.PI_TIMES_2;t<0&&(t=0)}return t},ii.angleBetween=function(t,e,n){var i=ii.angle(e,t),r=ii.angle(e,n);return ii.diff(i,r)},ii.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},ii.toRadians=function(t){return t*Math.PI/180},ii.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?ii.COUNTERCLOCKWISE:n<0?ii.CLOCKWISE:ii.NONE},ii.angleBetweenOriented=function(t,e,n){var i=ii.angle(e,t),r=ii.angle(e,n),o=r-i;return o<=-Math.PI?o+ii.PI_TIMES_2:o>Math.PI?o-ii.PI_TIMES_2:o},ii.PI_TIMES_2=2*Math.PI,ii.PI_OVER_2=Math.PI/2,ii.PI_OVER_4=Math.PI/4,ii.COUNTERCLOCKWISE=Xt.COUNTERCLOCKWISE,ii.CLOCKWISE=Xt.CLOCKWISE,ii.NONE=Xt.COLLINEAR,e(ri.prototype,{area:function(){return ri.area(this.p0,this.p1,this.p2)},signedArea:function(){return ri.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new l("Supplied point is null.");return ri.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return ri.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return ri.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return ri.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return ri.area3D(this.p0,this.p1,this.p2)},centroid:function(){return ri.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return ri.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},ri.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},ri.det=function(t,e,n,i){return t*i-e*n},ri.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,h=i.y-o,c=s*h-a*u,l=t.x-r,f=t.y-o,d=(h*l-a*f)/c,g=(-u*l+s*f)/c,p=e.z+d*(n.z-e.z)+g*(i.z-e.z);return p},ri.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return s<r&&(s=r),s<o&&(s=o),s},ri.isAcute=function(t,e,n){return!!ii.isAcute(t,e,n)&&!!ii.isAcute(e,n,t)&&!!ii.isAcute(n,t,e)},ri.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,h=2*ri.det(o,s,a,u),c=ri.det(s,o*o+s*s,u,a*a+u*u),l=ri.det(o,o*o+s*s,a,a*a+u*u),f=i-c/h,d=r+l/h;return new I(f,d)},ri.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new F(t.x+n/2,t.y+i/2,1),o=new F(t.x-i+n/2,t.y+n+i/2,1);return new F(r,o)},ri.angleBisector=function(t,e,n){var i=e.distance(t),r=e.distance(n),o=i/(i+r),s=n.x-t.x,a=n.y-t.y,u=new I(t.x+o*s,t.y+o*a);return u},ri.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,h=r*u-o*a,c=o*s-i*u,l=i*a-r*s,f=h*h+c*c+l*l,d=Math.sqrt(f)/2;return d},ri.centroid=function(t,e,n){var i=(t.x+e.x+n.x)/3,r=(t.y+e.y+n.y)/3;return new I(i,r)},ri.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o,a=(i*t.x+r*e.x+o*n.x)/s,u=(i*t.y+r*e.y+o*n.y)/s;return new I(a,u)},e(oi.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new I(t[0])],null}var e=this.input.convexHull(),n=e.getCoordinates(),t=n;if(n[0].equals2D(n[n.length-1])&&(t=new Array(n.length-1).fill(null),X.copyDeep(n,0,t,0,n.length-1)),t.length<=2)return this.extremalPts=X.copyDeep(t),null;for(var i=oi.lowestPoint(t),r=oi.pointWitMinAngleWithX(t,i),o=0;o<t.length;o++){var s=oi.pointWithMinAngleWithSegment(t,i,r);if(ii.isObtuse(i,s,r))return this.extremalPts=[new I(i),new I(r)],null;if(ii.isObtuse(s,i,r))i=s;else{if(!ii.isObtuse(s,r,i))return this.extremalPts=[new I(i),new I(r),new I(s)],null;r=s}}d.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new I((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=ri.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.pointWitMinAngleWithX=function(t,e){for(var n=m.MAX_VALUE,i=null,r=0;r<t.length;r++){var o=t[r];if(o!==e){var s=o.x-e.x,a=o.y-e.y;a<0&&(a=-a);var u=Math.sqrt(s*s+a*a),h=a/u;h<n&&(n=h,i=o)}}return i},oi.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},oi.pointWithMinAngleWithSegment=function(t,e,n){for(var i=m.MAX_VALUE,r=null,o=0;o<t.length;o++){var s=t[o];if(s!==e&&s!==n){var a=ii.angleBetween(e,s,n);a<i&&(i=a,r=s)}}return r},e(si.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=t instanceof It?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=m.MAX_VALUE;for(var e=1,n=new Wt,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new $t(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,o=n,s=o;i<=r;)i=r,s=si.nextIndex(t,o=s),r=e.distancePerpendicular(t[s]);return i<this.minWidth&&(this.minPtIndex=o,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new Wt(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=m.MAX_VALUE,i=-m.MAX_VALUE,r=m.MAX_VALUE,o=-m.MAX_VALUE,s=0;s<this.convexHullPts.length;s++){var a=si.computeC(t,e,this.convexHullPts[s]);i<a&&(i=a),a<n&&(n=a);var u=si.computeC(-e,t,this.convexHullPts[s]);o<u&&(o=u),u<r&&(r=u)}var h=si.computeSegmentForLine(-t,-e,o),c=si.computeSegmentForLine(-t,-e,r),l=si.computeSegmentForLine(-e,t,i),f=si.computeSegmentForLine(-e,t,n),d=l.lineIntersection(h),g=f.lineIntersection(h),p=f.lineIntersection(c),v=l.lineIntersection(c),y=this.inputGeom.getFactory().createLinearRing([d,g,p,v,d]);return this.inputGeom.getFactory().createPolygon(y,null)},interfaces_:function(){return[]},getClass:function(){return si}}),si.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},si.computeC=function(t,e,n){return t*n.y-e*n.x},si.getMinimumDiameter=function(t){return new si(t).getDiameter()},si.getMinimumRectangle=function(t){return new si(t).getMinimumRectangle()},si.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new I(0,n/e),r=new I(1,n/e-t/e)):(i=new I(n/t,0),r=new I(n/t-e/t,1)),new Wt(i,r)};var Yo=Object.freeze({Centroid:Jt,CGAlgorithms:Xt,ConvexHull:$t,InteriorPointArea:jn,InteriorPointLine:Un,InteriorPointPoint:Vn,RobustLineIntersector:Ut,MCPointInRing:ei,MinimumBoundingCircle:oi,MinimumDiameter:si});e(ai.prototype,{getResultGeometry:function(){return new ui(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<=0)throw new l("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.densifyPoints=function(t,e,n){for(var i=new Wt,r=new E,o=0;o<t.length-1;o++){i.p0=t[o],i.p1=t[o+1],r.add(i.p0,!1);var s=i.getLength(),a=Math.trunc(s/e)+1;if(1<a)for(var u=s/a,h=1;h<a;h++){var c=h*u/s,l=i.pointAlong(c);n.makePrecise(l),r.add(l,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},ai.densify=function(t,e){var n=new ai(t);return n.setDistanceTolerance(e),n.getResultGeometry()},a(ui,ee),e(ui.prototype,{transformMultiPolygon:function(t,e){var n=ee.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=ee.prototype.transformPolygon.call(this,t,e);return e instanceof St?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=ai.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof xt&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return ui}}),ai.DensifyTransformer=ui;var Xo=Object.freeze({Densifier:ai});e(hi.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext(),r=i.compareTo(t);if(r!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);d.shouldNeverReachHere()},insertAfter:function(t){d.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){for(var t=0,e=this;t++,(e=e.oNext())!==this;);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var o=Te.quadrant(e,n),s=Te.quadrant(i,r);return s<o?1:o<s?-1:Xt.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},hi.create=function(t,e){var n=new hi(t),i=new hi(e);return n.init(i),n},a(ci,hi),e(ci.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},ci.isMarked=function(t){return t.isMarked()},ci.setMark=function(t,e){t.setMark(e)},ci.markBoth=function(t){t.mark(),t.sym().mark()},ci.mark=function(t){t.mark()},e(li.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return hi.init(n,i),n},createEdge:function(t){return new hi(t)},addEdge:function(t,e){if(!li.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;if(null!==n&&(i=n.find(e)),null!==i)return i;var r=this.insert(t,e,n);return r},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return li}}),li.isValidEdge=function(t,e){var n=e.compareTo(t);return 0!==n},a(fi,ci),e(fi.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return fi}}),a(di,li),e(di.prototype,{createEdge:function(t){return new fi(t)},interfaces_:function(){return[]},getClass:function(){return di}}),e(gi.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new E,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new E,n=t;for(this.ringStartEdge=null,ci.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),ci.markBoth(n=i)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){for(var e=t;ci.isMarked(e)||this.nodeEdgeStack.add(e),(e=e.oNext())!==t;);},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();ci.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();ci.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof k){var t=arguments[0];t.apply({interfaces_:function(){return[q]},filter:function(t){t instanceof xt&&this.add(t)}})}else if(N(arguments[0],v))for(var e=arguments[0],n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}else if(arguments[0]instanceof xt){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory());for(var o=r.getCoordinateSequence(),s=!1,n=1;n<o.size();n++){var a=this.graph.addEdge(o.getCoordinate(n-1),o.getCoordinate(n));null!==a&&(s||(a.setStart(),s=!0))}}},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.dissolve=function(t){var e=new gi;return e.add(t),e.getResult()};var Wo=Object.freeze({LineDissolver:gi}),Ho=Object.freeze({GeometryGraph:An});e(pi.prototype,{hasChildren:function(){for(var t=0;t<4;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;e<4;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;e<4;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;i<4;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;n<4;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;e<4;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();t<n&&(t=n)}return t+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;e<4;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[s]},getClass:function(){return pi}}),pi.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},e(vi.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=vi.computeQuadLevel(t),this.env=new w,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=Hn.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new I((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=n<e?e:n,r=Hn.exponent(i)+1;return r},a(yi,pi),e(yi.prototype,{find:function(t){var e=pi.getSubnodeIndex(t,this.centrex,this.centrey);if(-1===e)return this;if(null!==this.subnode[e]){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=pi.getSubnodeIndex(t,this.centrex,this.centrey);if(-1!==e){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}var o=new w(e,n,i,r),s=new yi(o,this.level-1);return s},insertNode:function(t){d.isTrue(null===this.env||this.env.contains(t.env));var e=pi.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return yi}}),yi.createNode=function(t){var e=new vi(t),n=new yi(e.getEnvelope(),e.getLevel());return n},yi.createExpanded=function(t,e){var n=new w(e);null!==t&&n.expandToInclude(t.env);var i=yi.createNode(n);return null!==t&&i.insertNode(t),i},a(mi,pi),e(mi.prototype,{insert:function(t,e){var n=pi.getSubnodeIndex(t,mi.origin.x,mi.origin.y);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=yi.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){d.isTrue(t.getEnvelope().contains(e));var i=Zn.isZeroWidth(e.getMinX(),e.getMaxX()),r=Zn.isZeroWidth(e.getMinY(),e.getMaxY());(i||r?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return mi}}),mi.origin=new I(0,0),e(xi.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=xi.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new bn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new b;return this.root.addAllItems(t),t},remove:function(t,e){var n=xi.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&0<e&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&0<n&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[me,s]},getClass:function(){return xi}}),xi.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return n!==i&&r!==o?t:(n===i&&(i=(n-=e/2)+e/2),r===o&&(o=(r-=e/2)+e/2),new w(n,i,r,o))},xi.serialVersionUID=-0x678b60c967a25400;var Jo=Object.freeze({Quadtree:xi}),Ko=Object.freeze({STRtree:Ie}),Zo=Object.freeze({quadtree:Jo,strtree:Ko}),Qo=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(Ei.prototype,{read:function(t){var e=void 0,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!$o[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Qo.indexOf(n)?$o[n].apply(this,[e.coordinates]):"GeometryCollection"===n?$o[n].apply(this,[e.geometries]):$o[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!ts[e])throw new Error("Geometry is not supported");return ts[e].apply(this,[t])}});var $o={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!$o[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=$o.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new I(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new I(t[0],t[1]),new I(t[2],t[1]),new I(t[2],t[3]),new I(t[0],t[3]),new I(t[0],t[1])])},Point:function(t){var e=new I(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push($o.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=$o.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push($o.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=$o.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=$o.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push($o.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},ts={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=ts.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ts.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(ts.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ts.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ts.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],o=ts.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ts.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(ts[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(wi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Gt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])}}),e(_i.prototype,{write:function(t){return this.parser.write(t)}}),e(Ii.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Gt.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;e<n;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;i<r;i++)this.reducePrecision(t.geometries[i])}}),e(Mi.prototype,{read:function(t){var e=this.ol;return t instanceof e.geom.Point?this.convertFromPoint(t):t instanceof e.geom.LineString?this.convertFromLineString(t):t instanceof e.geom.LinearRing?this.convertFromLinearRing(t):t instanceof e.geom.Polygon?this.convertFromPolygon(t):t instanceof e.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof e.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof e.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof e.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new I(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new I(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new I(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?n=o:i.push(o)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new this.ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(bi);return new this.ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(bi);return new this.ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(bi)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(bi));return new this.ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new this.ol.geom.MultiPoint(t.getCoordinates().map(bi))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new this.ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new this.ol.geom.GeometryCollection(e)}});var es=Object.freeze({GeoJSONReader:wi,GeoJSONWriter:_i,OL3Parser:Mi,WKTReader:Ii,WKTWriter:jt});e(Si.prototype,{rescale:function(){if(N(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var i=arguments[0];2===i.length&&(new I(i[0]),new I(i[1]));for(var e=0;e<i.length;e++)i[e].x=i[e].x/this.scaleFactor+this.offsetX,i[e].y=i[e].y/this.scaleFactor+this.offsetY;2===i.length&&i[0].equals2D(i[1])&&D.out.println(i)}},scale:function(){if(N(arguments[0],v)){for(var t=arguments[0],e=new b,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Pe(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),n=0;n<r.length;n++)o[n]=new I(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);var s=X.removeRepeatedPoints(o);return s}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[De]},getClass:function(){return Si}});var ns=Object.freeze({MCIndexNoder:Ge,ScaledNoder:Si,SegmentString:fe});e(Ni.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new at,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n),r=i.getCoordinate();if(e.contains(r))return this.nonSimpleLocation=r,!1;e.add(r)}return!0},isSimplePolygonal:function(t){for(var e=In.getLines(t),n=e.iterator();n.hasNext();){var i=n.next();if(!this.isSimpleLinearGeometry(i))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(e,o,r);var s=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,s,r)}for(var n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new An(0,t),n=new Ut,i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(i))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new Ci(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof xt?this.isSimpleLinearGeometry(t):t instanceof dt?this.isSimpleLinearGeometry(t):t instanceof bt?this.isSimpleMultiPoint(t):N(t,_t)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Ni}}),e(Ci.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ni.EndpointInfo=Ci,e(Li.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Li.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Li.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),t<=0&&(this.quadrantSegments=1),this.joinStyle!==Li.JOIN_ROUND&&(this.quadrantSegments=Li.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=t<0?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Li.CAP_ROUND=1,Li.CAP_FLAT=2,Li.CAP_SQUARE=3,Li.JOIN_ROUND=1,Li.JOIN_MITRE=2,Li.JOIN_BEVEL=3,Li.DEFAULT_QUADRANT_SEGMENTS=8,Li.DEFAULT_MITRE_LIMIT=5,Li.DEFAULT_SIMPLIFY_FACTOR=.01,e(Pi.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();d.isTrue(0<this.minIndex&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=Xt.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===Xt.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===Xt.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),i=n.getCoordinates();if(e<0||e+1>=i.length)return-1;if(i[e].y===i[e+1].y)return-1;var r=Ye.LEFT;return i[e].y<i[e+1].y&&(r=Ye.RIGHT),r},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}d.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var i=this.getRightmostSide(this.minDe,this.minIndex);i===Ye.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Pi}}),Oi.prototype.addLast=function(t){this.array_.push(t)},Oi.prototype.removeFirst=function(){return this.array_.shift()},Oi.prototype.isEmpty=function(){return 0===this.array_.length},e(Ri.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var i=n.next();if(i.isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new ke("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();i.setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(Ye.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Ye.RIGHT)&&e.getDepth(Ye.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Q,n=new Oi,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next(),a=s.getSym();if(!a.isVisited()){var u=a.getNode();e.contains(u)||(n.addLast(u),e.add(u))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new w,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),i=n.getEdge().getCoordinates(),r=0;r<i.length-1;r++)t.expandToInclude(i[r]);this.env=t}return this.env},addReachable:function(t){var e=new Zt;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(Ye.LEFT,t.getDepth(Ye.RIGHT)),e.setDepth(Ye.RIGHT,t.getDepth(Ye.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym(),o=r.getNode();o.isVisited()||e.push(o)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[n]},getClass:function(){return Ri}}),e(Ti.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],o=this.inputLine[e],s=this.inputLine[n];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,i)&&this.isShallowSampled(r,o,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Ti.DELETE,i=r=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){var r=Xt.computeOrientation(t,e,n),o=r===this.angleOrientation;if(!o)return!1;var s=Xt.distancePointLine(e,t,n);return s<i},isShallowSampled:function(t,e,n,i,r){var o=Math.trunc((i-n)/Ti.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=n;s<i;s+=o)if(!this.isShallow(t,e,this.inputLine[s],r))return!1;return!0},isConcave:function(t,e,n){var i=Xt.computeOrientation(t,e,n),r=i===this.angleOrientation;return r},simplify:function(t){for(this.distanceTol=Math.abs(t),t<0&&(this.angleOrientation=Xt.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);this.deleteShallowConcavities(););return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Ti.DELETE;)e++;return e},isShallow:function(t,e,n,i){var r=Xt.distancePointLine(e,t,n);return r<i},collapseLine:function(){for(var t=new E,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Ti.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.simplify=function(t,e){var n=new Ti(t);return n.simplify(e)},Ti.INIT=0,Ti.DELETE=1,Ti.KEEP=1,Ti.NUM_PTS_TO_CHECK=10,e(Ai.prototype,{getCoordinates:function(){var t=this.ptList.toArray(Ai.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new I(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;0<=n;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new kt,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new I(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return 2<=this.ptList.size()&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Ai}}),Ai.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(Di.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=Xt.computeOrientation(this.s0,this.s1,this.s2),i=n===Xt.CLOCKWISE&&this.side===Ye.LEFT||n===Xt.COUNTERCLOCKWISE&&this.side===Ye.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new Wt(t,e),i=new Wt;this.computeOffsetSegment(n,Ye.LEFT,this.distance,i);var r=new Wt;this.computeOffsetSegment(n,Ye.RIGHT,this.distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this.bufParams.getEndCapStyle()){case Li.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Xt.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Li.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Li.CAP_SQUARE:var u=new I;u.x=Math.abs(this.distance)*Math.cos(a),u.y=Math.abs(this.distance)*Math.sin(a);var h=new I(i.p1.x+u.x,i.p1.y+u.y),c=new I(r.p1.x+u.x,r.p1.y+u.y);this.segList.addPt(h),this.segList.addPt(c)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,i){var r=!0,o=null;try{o=F.intersection(e.p0,e.p1,n.p0,n.p1);var s=i<=0?1:o.distance(t)/Math.abs(i);s>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof M))throw t;o=new I(0,0),r=!1}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,h=n.y-t.y,c=Math.atan2(h,u);i===Xt.CLOCKWISE?a<=c&&(a+=2*Math.PI):c<=a&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,c,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Di.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Li.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Li.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new I(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new I(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new I(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new I(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,o=ii.angle(r,this.seg0.p0),s=(ii.angle(r,this.seg1.p1),ii.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1)),a=s/2,u=ii.normalize(o+a),h=ii.normalize(u+Math.PI),c=i*n,l=c*Math.abs(Math.sin(a)),f=n-l,d=r.x+c*Math.cos(h),g=r.y+c*Math.sin(h),p=new I(d,g),v=new Wt(r,p),y=v.pointAlongOffset(1,f),m=v.pointAlongOffset(1,-f);this.side===Ye.LEFT?(this.segList.addPt(y),this.segList.addPt(m)):(this.segList.addPt(m),this.segList.addPt(y))},computeOffsetSegment:function(t,e,n,i){var r=e===Ye.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,h=r*n*s/a;i.p0.x=t.p0.x-h,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-h,i.p1.y=t.p1.y+u},addFilletArc:function(t,e,n,i,r){var o=i===Xt.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this.filletAngleQuantum+.5);if(a<1)return null;var u=null;u=s/a;for(var h=0,c=new I;h<s;){var l=e+o*h;c.x=t.x+r*Math.cos(l),c.y=t.y+r*Math.sin(l),this.segList.addPt(c),h+=u}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Di.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),0<this.closingSegLengthFactor){var n=new I((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new I((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new I(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Ai,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Di.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();2<=e&&(this.bufParams.getJoinStyle()===Li.JOIN_BEVEL||this.bufParams.getJoinStyle()===Li.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Xt.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Di}}),Di.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Di.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Di.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Di.MAX_CLOSING_SEG_LEN_FACTOR=80,e(Fi.prototype,{getOffsetCurve:function(t,e){if(0===(this.distance=e))return null;var n=e<0,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&X.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=Ti.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ye.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=Ti.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Ye.LEFT),n.addFirstSegment();for(var s=2;s<=u;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===Ye.RIGHT&&(i=-i);var r=Ti.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=Ti.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],Ye.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=Ti.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],Ye.LEFT);for(var o=a-2;0<=o;o--)e.addNextSegment(s[o],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Li.CAP_ROUND:e.createCircle(t);break;case Li.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if((this.distance=e)<0&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);var o=i.getCoordinates();return o},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Fi.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=Ti.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],Ye.LEFT),n.addFirstSegment();for(var s=o-2;0<=s;s--)n.addNextSegment(r[s],!0)}else{var a=Ti.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],Ye.LEFT),n.addFirstSegment();for(var s=2;s<=u;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},getSegGen:function(t){return new Di(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return Fi}}),Fi.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new I(t[n]);return e},e(Gi.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new b,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(N(arguments[2],y)&&arguments[0]instanceof I&&arguments[1]instanceof en)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates(),n=0;n<u.length-1;n++){this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var h=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(h<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||Xt.computeOrientation(this.seg.p0,this.seg.p1,o)===Xt.RIGHT)){var c=s.getDepth(Ye.LEFT);this.seg.p0.equals(u[n])||(c=s.getDepth(Ye.RIGHT));var l=new qi(this.seg,c);a.add(l)}}else if(N(arguments[2],y)&&arguments[0]instanceof I&&N(arguments[1],y))for(var f=arguments[0],d=arguments[1],g=arguments[2],n=d.iterator();n.hasNext();){var p=n.next();p.isForward()&&this.findStabbedSegments(f,p,g)}},getDepth:function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;var n=Vo.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return Gi}}),e(qi.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:0!=(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg))?n:this.upwardSeg.compareTo(e.upwardSeg)},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[n]},getClass:function(){return qi}}),Gi.DepthSegment=qi,e(ki.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},addPolygon:function(t){var e=this.distance,n=Ye.LEFT;this.distance<0&&(e=-this.distance,n=Ye.RIGHT);var i=t.getExteriorRing(),r=X.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,S.EXTERIOR,S.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=X.removeRepeatedPoints(s.getCoordinates());0<this.distance&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,Ye.opposite(n),S.INTERIOR,S.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new ri(t[0],t[1],t[2]),i=n.inCentre(),r=Xt.distancePointLine(i,n.p0,n.p1);return r<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=X.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,S.EXTERIOR,S.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Pe(t,new We(0,S.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<Mt.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=Mt.MINIMUM_VALID_SIZE&&Xt.isCCW(t)&&(o=r,s=i,n=Ye.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},add:function(t){if(t.isEmpty())return null;if(t instanceof It)this.addPolygon(t);else if(t instanceof xt)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof bt)this.addCollection(t);else if(t instanceof dt)this.addCollection(t);else if(t instanceof St)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return e<0&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return ki}}),e(zi.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(zi.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[ze]},getClass:function(){return zi}}),zi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(ji.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new We(t.getLabel())).flip(),n.merge(i);var r=ji.depthDelta(i),o=e.getDepthDelta(),s=o+r;e.setDepthDelta(s)}else this.edgeList.add(t),t.setDepthDelta(ji.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new b,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Gi(n),a=s.getDepth(o);r.computeDepth(a),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new b,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Ri;r.create(i),e.add(r)}}return Vo.sort(e,Vo.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new Ge,n=new Ut;return n.setPrecisionModel(t),e.setSegmentIntersector(new zi(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new Fi(n,this.bufParams),r=new ki(t,e,i),o=r.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new rn(new fn),this.graph.addEdges(this.edgeList.getEdges());var s=this.createSubgraphs(this.graph),a=new on(this.geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var h=this.geomFact.buildGeometry(u);return h},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings(),r=i.iterator();r.hasNext();){var o=r.next(),s=o.getCoordinates();if(2!==s.length||!s[0].equals2D(s[1])){var a=o.getData(),u=new Tn(o.getCoordinates(),new We(a));this.insertUniqueEdge(u)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return ji}}),ji.depthDelta=function(t){var e=t.getLocation(0,Ye.LEFT),n=t.getLocation(0,Ye.RIGHT);return e===S.INTERIOR&&n===S.EXTERIOR?1:e===S.EXTERIOR&&n===S.INTERIOR?-1:0},ji.convertSegStrings=function(t){for(var e=new kt,n=new b;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(Bi.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(2===arguments.length)for(var i=arguments[0],r=arguments[1],t=r.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(i))throw new x("found endpt/interior pt intersection at index "+o+" :pt "+i)},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var h=0;h<a.length-1;h++)this.checkInteriorIntersections(r,u,o,h);else if(4===arguments.length){var c=arguments[0],l=arguments[1],f=arguments[2],d=arguments[3];if(c===f&&l===d)return null;var g=c.getCoordinates()[l],p=c.getCoordinates()[l+1],v=f.getCoordinates()[d],y=f.getCoordinates()[d+1];if(this.li.computeIntersection(g,p,v,y),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,g,p)||this.hasInteriorIntersection(this.li,v,y)))throw new x("found non-noded intersection at "+g+"-"+p+" and "+v+"-"+y)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0],i=n.getCoordinates(),t=0;t<i.length-2;t++)this.checkCollapse(i[t],i[t+1],i[t+2])},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new x("found non-noded collapse at "+Bi.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Bi}}),Bi.fact=new kt,e(Ui.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this.maxx<n||this.minx>i||this.maxy<r||this.miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return d.isTrue(!(s&&a),"Found bad envelope test"),a},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new I(this.maxx,this.maxy),this.corner[1]=new I(this.minx,this.maxy),this.corner[2]=new I(this.minx,this.miny),this.corner[3]=new I(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=Ui.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new w(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&i||t.equals(this.pt)||e.equals(this.pt)))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return Ui}}),Ui.SAFE_ENV_EXPANSION_FACTOR=.75,e(Vi.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new Yi(e,n,i);return this.index.query(r,{interfaces_:function(){return[ye]},visitItem:function(t){var e=t;e.select(r,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Vi}}),a(Yi,Yn),e(Yi.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return Yn.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return Yi}}),Vi.HotPixelSnapAction=Yi,e(Xi.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[ze]},getClass:function(){return Xi}}),e(Wi.prototype,{checkCorrectness:function(t){var e=Pe.getNodedSubstrings(t),n=new Bi(e);try{n.checkValid()}catch(t){if(!(t instanceof _))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return Pe.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new Xi(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(N(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Pe)for(var i=arguments[0],r=i.getCoordinates(),o=0;o<r.length;o++){var s=new Ui(r[o],this.scaleFactor,this.li),a=this.pointSnapper.snap(s,i,o);a&&i.addIntersection(r[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Ge,this.pointSnapper=new Vi(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=new Ui(n,this.scaleFactor,this.li);this.pointSnapper.snap(i)}},interfaces_:function(){return[De]},getClass:function(){return Wi}}),e(Hi.prototype,{bufferFixedPrecision:function(t){var e=new Si(new Wi(new Gt(1)),t.getScale()),n=new ji(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=Hi.MAX_PRECISION_DIGITS;0<=t;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof ke))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=Hi.precisionScaleFactor(this.argGeom,this.distance,e),i=new Gt(n);this.bufferFixedPrecision(i)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Gt.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new ji(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof x))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Hi}}),Hi.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Hi(t),i=n.getResultGeometry(e);return i}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof k&&"number"==typeof arguments[1]){var r=arguments[0],o=arguments[1],s=arguments[2],a=new Hi(r);a.setQuadrantSegments(s);var i=a.getResultGeometry(o);return i}if(arguments[2]instanceof Li&&arguments[0]instanceof k&&"number"==typeof arguments[1]){var u=arguments[0],h=arguments[1],c=arguments[2],a=new Hi(u,c),i=a.getResultGeometry(h);return i}}else if(4===arguments.length){var l=arguments[0],f=arguments[1],d=arguments[2],g=arguments[3],a=new Hi(l);a.setQuadrantSegments(d),a.setEndCapStyle(g);var i=a.getResultGeometry(f);return i}},Hi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=C.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY())),o=0<e?e:0,s=r+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,h=Math.pow(10,u);return h},Hi.CAP_ROUND=Li.CAP_ROUND,Hi.CAP_BUTT=Li.CAP_FLAT,Hi.CAP_FLAT=Li.CAP_FLAT,Hi.CAP_SQUARE=Li.CAP_SQUARE,Hi.MAX_PRECISION_DIGITS=12;var is=Object.freeze({BufferOp:Hi,BufferParameters:Li});e(Ji.prototype,{filter:function(t){t instanceof It&&this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return Ji}}),Ji.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Ji.getPolygons(t,new b)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof It?n.add(e):e instanceof ft&&e.apply(new Ji(n)),n}},e(Ki.prototype,{isInsideArea:function(){return this.segIndex===Ki.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return Ki}}),Ki.INSIDE_AREA=-1,e(Zi.prototype,{filter:function(t){t instanceof wt&&this.pts.add(t)},interfaces_:function(){return[ct]},getClass:function(){return Zi}}),Zi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof wt?Vo.singletonList(t):Zi.getPoints(t,new b)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof wt?n.add(e):e instanceof ft&&e.apply(new Zi(n)),n}},e(Qi.prototype,{filter:function(t){(t instanceof wt||t instanceof xt||t instanceof It)&&this.locations.add(new Ki(t,0,t.getCoordinate()))},interfaces_:function(){return[ct]},getClass:function(){return Qi}}),Qi.getLocations=function(t){var e=new b;return t.apply(new Qi(e)),e},e($i.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=Ji.getPolygons(this.geom[e]);if(0<r.size()){var o=Qi.getLocations(this.geom[i]);if(this.computeContainmentDistance(o,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&N(arguments[0],y)&&N(arguments[1],y)){for(var s=arguments[0],a=arguments[1],u=arguments[2],h=0;h<s.size();h++)for(var c=s.get(h),l=0;l<a.size();l++)if(this.computeContainmentDistance(c,a.get(l),u),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Ki&&arguments[1]instanceof It){var f=arguments[0],d=arguments[1],g=arguments[2],p=f.getCoordinate();if(S.EXTERIOR!==this.ptLocator.locate(p,d))return this.minDistance=0,g[0]=f,g[1]=new Ki(d,p),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=In.getLines(this.geom[0]),n=In.getLines(this.geom[1]),i=Zi.getPoints(this.geom[0]),r=Zi.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof xt&&arguments[1]instanceof wt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){var s=Xt.distancePointLine(r,i[o],i[o+1]);if(s<this.minDistance){this.minDistance=s;var a=new Wt(i[o],i[o+1]),u=a.closestPoint(r);n[0]=new Ki(t,o,u),n[1]=new Ki(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof xt&&arguments[1]instanceof xt){var h=arguments[0],c=arguments[1],l=arguments[2];if(h.getEnvelopeInternal().distance(c.getEnvelopeInternal())>this.minDistance)return null;for(var i=h.getCoordinates(),f=c.getCoordinates(),o=0;o<i.length-1;o++)for(var d=0;d<f.length-1;d++){var s=Xt.distanceLineLine(i[o],i[o+1],f[d],f[d+1]);if(s<this.minDistance){this.minDistance=s;var g=new Wt(i[o],i[o+1]),p=new Wt(f[d],f[d+1]),v=g.closestPoints(p);l[0]=new Ki(h,o,v[0]),l[1]=new Ki(c,d,v[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new Ki(r,0,r.getCoordinate()),n[1]=new Ki(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new l("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return $i}}),$i.distance=function(t,e){var n=new $i(t,e);return n.distance()},$i.isWithinDistance=function(t,e,n){var i=new $i(t,e,n);return i.distance()<=n},$i.nearestPoints=function(t,e){var n=new $i(t,e);return n.nearestPoints()};var rs=Object.freeze({DistanceOp:$i});e(tr.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new E,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),t<e&&X.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return tr}}),e(er.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return er}}),er.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},er.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},er.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},a(nr,er),e(nr.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Xt.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[n]},getClass:function(){return nr}}),nr.toEdges=function(t){for(var e=new b,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},a(ir,nr),e(ir.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(d.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return ir}}),a(rr,er),e(rr.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof sr){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return rr}}),e(or.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Vo.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof rr){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof nr){var i=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===i)return e}return-1}if(Number.isInteger(arguments[0])){var r=arguments[0],o=r%this.outEdges.size();return o<0&&(o+=this.outEdges.size()),o}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return or}}),a(sr,er),e(sr.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.getEdgesBetween=function(t,e){var n=nr.toEdges(t.getOutEdges().getEdges()),i=new Q(n),r=nr.toEdges(e.getOutEdges().getEdges());return i.retainAll(r),i},a(ar,rr),e(ar.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return ar}}),e(ur.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return ur}}),e(hr.prototype,{findNodesOfDegree:function(t){for(var e=new b,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof rr){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof nr){var e=arguments[0],n=e.getSym();null!==n&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof sr){for(var i=arguments[0],r=i.getOutEdges().getEdges(),o=r.iterator();o.hasNext();){var s=o.next(),n=s.getSym();null!==n&&this.remove(n),this.dirEdges.remove(s);var a=s.getEdge();null!==a&&this.edges.remove(a)}this.nodeMap.remove(i.getCoordinate()),i.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof rr){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof nr){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof sr){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof rr){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof nr){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return hr}}),a(cr,hr),e(cr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=X.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new ir(r,o,e[1],!0),a=new ir(o,r,e[e.length-2],!1),u=new ar(t);u.setDirectedEdges(s,a),this.add(u)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new sr(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return cr}}),e(lr.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(d.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;er.setMarked(this.graph.nodeIterator(),!1),er.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new b,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new b;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){for(var e=new tr(this.factory),n=t;e.add(n),n.getEdge().setMarked(!0),null!==(n=n.getNext())&&n!==t;);return e},add:function(){if(arguments[0]instanceof k){var t=arguments[0];t.apply({interfaces_:function(){return[q]},filter:function(t){t instanceof xt&&this.add(t)}})}else if(N(arguments[0],v)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var i=n.next();this.add(i)}}else if(arguments[0]instanceof xt){var r=arguments[0];null===this.factory&&(this.factory=r.getFactory()),this.graph.addEdge(r)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return lr}});var os=Object.freeze({LineMerger:lr}),ss=Object.freeze({OverlayOp:qn});a(fr,nr),e(fr.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return fr}}),a(dr,rr),e(dr.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return dr}}),e(gr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=gr.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),s=e.findEdgeEnd(o),a=null;s.getLabel().getLocation(0,Ye.RIGHT)===S.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,Ye.RIGHT)===S.INTERIOR&&(a=s.getSym()),d.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof It){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof St)for(var i=t,r=0;r<i.getNumGeometries();r++){var n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,Ye.RIGHT)===S.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){for(var e=t,n=t;d.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),(n=n.getNext())!==e;);},buildEdgeRings:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new Ke(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,Ye.RIGHT)===S.INTERIOR)for(var o=0;o<i.size();o++)if(!(r=i.get(o)).isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new b;this.geomGraph.computeSplitEdges(t);var e=new rn(new fn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return gr}}),gr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(pr.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var s=new tn(t,n.coord,o,new We(t.getLabel()));e.add(s)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var s=new We(t.getLabel());s.flip();var a=new tn(t,n.coord,o,s);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new b,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getEdgeIntersectionList();s.addEndpoints();var a=s.iterator(),u=null,h=null;if(!a.hasNext())return null;for(var c=a.next();u=h,h=c,c=null,a.hasNext()&&(c=a.next()),null!==h&&(this.createEdgeEndForPrev(r,o,h,u),this.createEdgeEndForNext(r,o,h,c)),null!==h;);}},interfaces_:function(){return[]},getClass:function(){return pr}}),a(vr,tn),e(vr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){var o=r.next(),s=o.getLabel().getLocation(t);s===S.BOUNDARY&&n++,s===S.INTERIOR&&(i=!0)}var s=S.NONE;i&&(s=S.INTERIOR),0<n&&(s=An.determineBoundary(e,n)),this.label.setLocation(t,s)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===S.INTERIOR)return this.label.setLocation(t,e,S.INTERIOR),null;r===S.EXTERIOR&&this.label.setLocation(t,e,S.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,Ye.LEFT),this.computeLabelSide(t,Ye.RIGHT)},updateIM:function(t){Tn.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().isArea()&&(e=!0)}this.label=e?new We(S.NONE,S.NONE,S.NONE):new We(S.NONE);for(var r=0;r<2;r++)this.computeLabelOn(r,t),e&&this.computeLabelSides(r)},interfaces_:function(){return[]},getClass:function(){return vr}}),a(yr,cn),e(yr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new vr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return yr}}),a(mr,Qe),e(mr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return mr}}),a(xr,nn),e(xr.prototype,{createNode:function(t){return new mr(t,new yr)},interfaces_:function(){return[]},getClass:function(){return xr}}),e(Er.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next(),r=this.nodes.addNode(i.getCoordinate());r.setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new pr,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next(),a=this.nodes.addNode(s.coord);r===S.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,S.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Er}}),e(wr.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var i=n.next();if(1<i.getEdgeEnds().size())return this.invalidPoint=i.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return wr}}),e(_r.prototype,{buildIndex:function(){this.index=new Ie;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),s=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var a=br.findPtNotNode(n,o,this.graph);if(null!==a){var u=Xt.isPointInRing(a,s);if(u)return this.nestedPt=a,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return _r}}),e(Ir.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return Ir.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.ERROR=0,Ir.REPEATED_POINT=1,Ir.HOLE_OUTSIDE_SHELL=2,Ir.NESTED_HOLES=3,Ir.DISCONNECTED_INTERIOR=4,Ir.SELF_INTERSECTION=5,Ir.RING_SELF_INTERSECTION=6,Ir.NESTED_SHELLS=7,Ir.DUPLICATE_RINGS=8,Ir.TOO_FEW_POINTS=9,Ir.INVALID_COORDINATE=10,Ir.RING_NOT_CLOSED=11,Ir.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(br.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!br.isValid(t[e]))return this.validErr=new Ir(Ir.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof It){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new _r(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}var o=n.isNonNested();o||(this.validErr=new Ir(Ir.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new wr(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new Ir(Ir.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new Ir(Ir.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),o=br.findPtNotNode(i,e,n);if(null!==o){var s=Xt.isPointInRing(o,r);if(!s)return o}var a=br.findPtNotNode(r,t,n);if(null!==a){var u=Xt.isPointInRing(a,i);return u?a:null}return d.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new gr(t);e.isInteriorsConnected()||(this.validErr=new Ir(Ir.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new at,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new Ir(Ir.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new ei(n),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),s=br.findPtNotNode(o.getCoordinates(),n,e);if(null===s)return null;var a=!i.isInside(s);if(a)return this.validErr=new Ir(Ir.HOLE_OUTSIDE_SHELL,s),null}},checkTooFewPoints:function(t){if(t.hasTooFewPoints())return this.validErr=new Ir(Ir.TOO_FEW_POINTS,t.getInvalidPoint()),null},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof wt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof bt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Mt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new An(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new Ut;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof xt){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;var i=new An(0,o);this.checkTooFewPoints(i)}else if(arguments[0]instanceof It){var s=arguments[0];if(this.checkInvalidCoordinates(s),null!==this.validErr)return null;if(this.checkClosedRings(s),null!==this.validErr)return null;var i=new An(0,s);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(s,i),null!==this.validErr)return null;if(this.checkHolesNotNested(s,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof St){for(var a=arguments[0],u=0;u<a.getNumGeometries();u++){var h=a.getGeometryN(u);if(this.checkInvalidCoordinates(h),null!==this.validErr)return null;if(this.checkClosedRings(h),null!==this.validErr)return null}var i=new An(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(var u=0;u<a.getNumGeometries();u++){var h=a.getGeometryN(u);if(this.checkHolesInShell(h,i),null!==this.validErr)return null}for(var u=0;u<a.getNumGeometries();u++){var h=a.getGeometryN(u);if(this.checkHolesNotNested(h,i),null!==this.validErr)return null}if(this.checkShellsNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof ft)for(var c=arguments[0],u=0;u<c.getNumGeometries();u++){var l=c.getGeometryN(u);if(this.checkValid(l),null!==this.validErr)return null}else if(arguments[0]instanceof k){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof wt)this.checkValid(f);else if(f instanceof bt)this.checkValid(f);else if(f instanceof Mt)this.checkValid(f);else if(f instanceof xt)this.checkValid(f);else if(f instanceof It)this.checkValid(f);else if(f instanceof St)this.checkValid(f);else{if(!(f instanceof ft))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),s=br.findPtNotNode(i,r,n);if(null===s)return null;var a=Xt.isPointInRing(s,o);if(!a)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new Ir(Ir.NESTED_SHELLS,s),null;for(var u=null,h=0;h<e.getNumInteriorRing();h++){var c=e.getInteriorRingN(h);if(null===(u=this.checkShellInsideHole(t,c,n)))return null}this.validErr=new Ir(Ir.NESTED_SHELLS,u)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;1<=t.getNumPoints()&&(e=t.getCoordinateN(0)),this.validErr=new Ir(Ir.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n),r=i.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(n!==o){var s=t.getGeometryN(o);if(this.checkShellNotNested(r,s,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return br}}),br.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e),r=i.getEdgeIntersectionList(),o=0;o<t.length;o++){var s=t[o];if(!r.isIntersection(s))return s}return null},br.isValid=function(){if(arguments[0]instanceof k){var t=arguments[0],e=new br(t);return e.isValid()}if(arguments[0]instanceof I){var n=arguments[0];return!(m.isNaN(n.x)||m.isInfinite(n.x)||m.isNaN(n.y)||m.isInfinite(n.y))}},e(Mr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new E,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();Mr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),br.isValid(this.ring))},build:function(t){for(var e=t;this.add(e),e.setRing(this),e=e.getNext(),d.isTrue(null!==e,"found null DE in ring"),d.isTrue(e===t||!e.isInRing(),"found DE already in ring"),e!==t;);},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Mt){var t=arguments[0];null===this.holes&&(this.holes=new b),this.holes.add(t)}else if(arguments[0]instanceof Mr){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new b),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=Xt.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return jt.toLineString(new Rt(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&D.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof _))throw t;D.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(null!==n&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.findDirEdgesInRing=function(t){for(var e=t,n=new b;n.add(e),e=e.getNext(),d.isTrue(null!==e,"found null DE in ring"),d.isTrue(e===t||!e.isInRing(),"found DE already in ring"),e!==t;);return n},Mr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(var i=t.length-1;0<=i;i--)n.add(t[i],!1)},Mr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),h=u.getRing(),c=h.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=X.ptNotInList(n.getCoordinates(),h.getCoordinates());var l=!1;Xt.isPointInRing(r,h.getCoordinates())&&(l=!0),l&&(null===o||s.contains(c))&&(s=(o=u).getRing().getEnvelopeInternal())}}return o},e(Sr.prototype,{compare:function(t,e){var n=t,i=e;return n.getRing().getEnvelope().compareTo(i.getRing().getEnvelope())},interfaces_:function(){return[o]},getClass:function(){return Sr}}),Mr.EnvelopeComparator=Sr,a(Nr,hr),e(Nr.prototype,{findEdgeRing:function(t){var e=new Mr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;)return null;else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Nr.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=X.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new fr(r,o,e[1],!0),a=new fr(o,r,e[e.length-2],!1),u=new dr(t);u.setDirectedEdges(s,a),this.add(u)},deleteCutEdges:function(){this.computeNextCWEdges(),Nr.findLabeledEdgeRings(this.dirEdges);for(var t=new b,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Nr.label(this.dirEdges,-1);var t=Nr.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new b,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new sr(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=Nr.findIntersectionNodes(n,i);if(null!==r)for(var o=r.iterator();o.hasNext();){var s=o.next();Nr.computeNextCCWEdges(s,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Q,n=new Zt,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();Nr.deleteAllEdges(r);for(var o=r.getOutEdges().getEdges(),i=o.iterator();i.hasNext();){var s=i.next();s.setMarked(!0);var a=s.getSym();null!==a&&a.setMarked(!0);var u=s.getEdge();e.add(u.getLine());var h=s.getToNode();1===Nr.getDegreeNonDeleted(h)&&n.push(h)}}return e},interfaces_:function(){return[]},getClass:function(){return Nr}}),Nr.findLabeledEdgeRings=function(t){for(var e=new b,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||0<=r.getLabel())){e.add(r);var o=Mr.findDirEdgesInRing(r);Nr.label(o,n),n++}}return e},Nr.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,i=e.iterator();i.hasNext();){var r=i.next();r.isMarked()||n++}return n},Nr.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var i=n.next();i.setMarked(!0);var r=i.getSym();null!==r&&r.setMarked(!0)}},Nr.label=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();i.setLabel(e)}},Nr.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,i=null,r=e.getEdges().iterator();r.hasNext();){var o=r.next();if(!o.isMarked()){if(null===n&&(n=o),null!==i){var s=i.getSym();s.setNext(o)}i=o}}if(null!==i){var s=i.getSym();s.setNext(n)}},Nr.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),i=null,r=null,o=n.getEdges(),s=o.size()-1;0<=s;s--){var a=o.get(s),u=a.getSym(),h=null;a.getLabel()===e&&(h=a);var c=null;u.getLabel()===e&&(c=u),null===h&&null===c||(null!==c&&(r=c),null!==h&&(null!==r&&(r.setNext(h),r=null),null===i&&(i=h)))}null!==r&&(d.isTrue(null!==i),r.setNext(i))},Nr.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),i=0,r=n.iterator();r.hasNext();){var o=r.next();o.getLabel()===e&&i++}return i},Nr.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();1<Nr.getDegree(r,e)&&(null===i&&(i=new b),i.add(r)),n=n.getNext(),d.isTrue(null!==n,"found null DE in ring"),d.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(Cr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new kt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(kt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new b,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new b;this.invalidRingLines=new b,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),Cr.assignHolesToShells(this.holeList,this.shellList),Vo.sort(this.shellList,new Mr.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(Cr.findDisjointShells(this.shellList),n=!1),this.polyList=Cr.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(N(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof xt){var i=arguments[0];this.geomFactory=i.getFactory(),null===this.graph&&(this.graph=new Nr(this.geomFactory)),this.graph.addEdge(i)}else if(arguments[0]instanceof k){var r=arguments[0];r.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new b,this.shellList=new b;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},Cr.extractPolygons=function(t,e){for(var n=new b,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},Cr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();Cr.assignHoleToShell(i,e)}},Cr.assignHoleToShell=function(t,e){var n=Mr.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},Cr.findDisjointShells=function(t){Cr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(Lr.prototype,{filter:function(t){t instanceof xt&&this.p.add(t)},interfaces_:function(){return[q]},getClass:function(){return Lr}}),Cr.LineStringAdder=Lr;var as=Object.freeze({Polygonizer:Cr});e(Pr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(0<n.getDimension()){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,S.EXTERIOR)},computeIM:function(){var t=new Ht;if(t.set(S.EXTERIOR,S.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new pr,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),i=this.nodes.addNode(n.getCoordinate());i.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.find(o.coord);s.getLabel().isNull(t)&&(i===S.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,S.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.addNode(o.coord);i===S.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,S.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();d.isTrue(0<n.getGeometryCount(),"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var i=this.nodes.iterator();i.hasNext();){var r=i.next();r.updateIM(t),r.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(S.INTERIOR,S.EXTERIOR,e.getDimension()),t.set(S.BOUNDARY,S.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(S.EXTERIOR,S.INTERIOR,n.getDimension()),t.set(S.EXTERIOR,S.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return Pr}}),e(Or.prototype,{isContainedInBoundary:function(t){if(t instanceof It)return!1;if(t instanceof wt)return this.isPointContainedInBoundary(t);if(t instanceof xt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new I,i=new I,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof I){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return Or}}),Or.contains=function(t,e){var n=new Or(t);return n.contains(e)},e(Rr.prototype,{intersects:function(t,e){var n=new w(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(0<t.compareTo(e)){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Rr}}),e(Tr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return Tr}}),e(Ar.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Dr(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Fr(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new Gr(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.intersects=function(t,e){var n=new Ar(t);return n.intersects(e)},a(Dr,Tr),e(Dr.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Dr}}),a(Fr,Tr),e(Fr.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof It))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new I,i=0;i<4;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&hn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Fr}}),a(Gr,Tr),e(Gr.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=In.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Gr}}),a(qr,Dn),e(qr.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return qr}}),qr.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||qr.relate(t,e).isCovers())},qr.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Ar.intersects(t,e):e.isRectangle()?Ar.intersects(e,t):qr.relate(t,e).isIntersects())},qr.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&qr.relate(t,e).isTouches(t.getDimension(),e.getDimension())},qr.within=function(t,e){return e.contains(t)},qr.coveredBy=function(t,e){return qr.covers(e,t)},qr.relate=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new qr(t,e),i=n.getIntersectionMatrix();return i}if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof k&&arguments[1]instanceof k){var r=arguments[0],o=arguments[1],s=arguments[2];return qr.relateWithCheck(r,o).matches(s)}if(N(arguments[2],j)&&arguments[0]instanceof k&&arguments[1]instanceof k){var a=arguments[0],u=arguments[1],h=arguments[2],n=new qr(a,u,h),i=n.getIntersectionMatrix();return i}}},qr.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&qr.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},qr.disjoint=function(t,e){return!t.intersects(e)},qr.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),qr.relate(t,e)},qr.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&qr.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},qr.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?Or.contains(t,e):qr.relate(t,e).isContains())};var us=Object.freeze({RelateOp:qr});e(kr.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new b,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return kr}}),kr.combine=function(){if(1===arguments.length){var t=arguments[0],e=new kr(t);return e.combine()}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=new kr(kr.createList(n,i));return e.combine()}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],e=new kr(kr.createList(r,o,s));return e.combine()}},kr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},kr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new b;return n.add(t),n.add(e),n}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],n=new b;return n.add(i),n.add(r),n.add(o),n}},e(zr.prototype,{union:function(){for(var t=new ce,e=new at,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n),r=i.getCoordinate(),o=t.locate(r,this.otherGeom);o===S.EXTERIOR&&e.add(r)}if(0===e.size())return this.otherGeom;var s=null,a=X.toCoordinateArray(e);return s=1===a.length?this.geomFact.createPoint(a[0]):this.geomFact.createMultiPointFromCoords(a),kr.combine(s,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return zr}}),zr.union=function(t,e){var n=new zr(t,e);return n.union()},e(jr.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return jr}}),jr.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return jr.extract(t,e,new b)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof ft&&n.apply(new jr(i,r)),r}},e(Br.prototype,{reduceToGeometries:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next(),r=null;N(i,y)?r=this.unionTree(i):i instanceof k&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new b,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i)){var r=kr.combine(t,e);return r}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,o)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Ie(Br.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree(),r=this.unionTree(i);return r},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(i-n<=1){var r=Br.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Br.getGeometry(e,n),Br.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),r=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,i);return this.unionSafe(r,s)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Br.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var i=new b,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);i.add(s);var a=kr.combine(i);return a},bufferUnion:function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),i=n.buffer(0);return i}if(2===arguments.length){var r=arguments[0],o=arguments[1],e=r.getFactory(),n=e.createGeometryCollection([r,o]),i=n.buffer(0);return i}},interfaces_:function(){return[]},getClass:function(){return Br}}),Br.restrictToPolygons=function(t){if(N(t,_t))return t;var e=Ji.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(kt.toPolygonArray(e))},Br.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Br.union=function(t){var e=new Br(t);return e.union()},Br.STRTREE_NODE_CAPACITY=4,e(Ur.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return zn.overlayOp(t,e,qn.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(N(arguments[0],v))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof k){var i=arguments[0];null===this.geomFact&&(this.geomFact=i.getFactory()),jr.extract(i,k.SORTINDEX_POLYGON,this.polygons),jr.extract(i,k.SORTINDEX_LINESTRING,this.lines),jr.extract(i,k.SORTINDEX_POINT,this.points)}},union:function(){if(null===this.geomFact)return null;var t=null;if(0<this.points.size()){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e)}var n=null;if(0<this.lines.size()){var i=this.geomFact.buildGeometry(this.lines);n=this.unionNoOpt(i)}var r=null;0<this.polygons.size()&&(r=Br.union(this.polygons));var o=this.unionWithNull(n,r),s=null;return s=null===t?o:null===o?t:zr.union(t,o),null===s?this.geomFact.createGeometryCollection():s},interfaces_:function(){return[]},getClass:function(){return Ur}}),Ur.union=function(){if(1===arguments.length){if(N(arguments[0],v)){var t=arguments[0],e=new Ur(t);return e.union()}if(arguments[0]instanceof k){var n=arguments[0],e=new Ur(n);return e.union()}}else if(2===arguments.length){var i=arguments[0],r=arguments[1],e=new Ur(i,r);return e.union()}};var hs=Object.freeze({UnaryUnionOp:Ur}),cs=Object.freeze({IsValidOp:br,ConsistentAreaTester:wr}),ls=Object.freeze({BoundaryOp:gt,IsSimpleOp:Ni,buffer:is,distance:rs,linemerge:os,overlay:ss,polygonize:as,relate:us,union:hs,valid:cs});a(Vr,Nt.CoordinateOperation),e(Vr.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new I(t[i]);this.targetPM.makePrecise(r),n[i]=r}var o=new E(n,!1),s=o.toCoordinateArray(),a=0;e instanceof xt&&(a=2),e instanceof Mt&&(a=4);var u=n;return this.removeCollapsed&&(u=null),s.length<a?u:s},interfaces_:function(){return[]},getClass:function(){return Vr}}),e(Yr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=this.changePM(n,t.getPrecisionModel())),i},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new Nt(n)}else e=new Nt;var i=this.removeCollapsed;2<=t.getDimension()&&(i=!0);var r=e.edit(t,new Vr(this.targetPM,i));return r},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new Nt.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new kt(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:N(e,_t)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new Nt;var n=this.createFactory(t,e),i=new Nt(n);return i},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.reduce=function(t,e){var n=new Yr(e);return n.reduce(t)},Yr.reducePointwise=function(t,e){var n=new Yr(e);return n.setPointwise(!0),n.reduce(t)};var fs=Object.freeze({GeometryPrecisionReducer:Yr});e(Xr.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;r<e;r++){var o=this.seg.distance(this.pts[r]);n<o&&(n=o,i=r)}if(n<=this.distanceTolerance)for(var r=t+1;r<e;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new E,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new I(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.simplify=function(t,e){var n=new Xr(t);return n.setDistanceTolerance(e),n.simplify()},e(Wr.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Hr(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(t<0)throw new l("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.simplify=function(t,e){var n=new Wr(t);return n.setDistanceTolerance(e),n.getResultGeometry()},a(Hr,ee),e(Hr.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=ee.prototype.transformPolygon.call(this,t,e);return e instanceof St?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=null;return i=0===n.length?new Array(0).fill(null):Xr.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(i)},transformMultiPolygon:function(t,e){var n=ee.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof It,i=ee.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof Mt?i:null},interfaces_:function(){return[]},getClass:function(){return Hr}}),Wr.DPTransformer=Hr,a(Jr,Wt),e(Jr.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return Jr}}),e(Kr.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(Kr.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(Kr.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new Jr(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return Kr.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return Kr}}),Kr.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(Zr.prototype,{remove:function(t){this.index.remove(new w(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof Kr)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var i=e[n];this.add(i)}else if(arguments[0]instanceof Wt){var r=arguments[0];this.index.insert(new w(r.p0,r.p1),r)}},query:function(t){var e=new w(t.p0,t.p1),n=new Qr(t);this.index.query(e,n);var i=n.getItems();return i},interfaces_:function(){return[]},getClass:function(){return Zr}}),e(Qr.prototype,{visitItem:function(t){var e=t;w.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[ye]},getClass:function(){return Qr}}),e($r.prototype,{flatten:function(t,e){var n=this.linePts[t],i=this.linePts[e],r=new Wt(n,i);return this.remove(this.line,t,e),this.outputIndex.add(r),r},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var o=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var s=n+1;s<this.line.getMinimumSize()&&(o=!1)}var a=new Array(1).fill(null),u=this.findFurthestPoint(this.linePts,t,e,a);a[0]>this.distanceTolerance&&(o=!1);var h=new Wt;if(h.p0=this.linePts[t],h.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,h)&&(o=!1),o){var r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,u,n),this.simplifySection(u,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var i=n.next();if(this.hasInteriorIntersection(i,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new Wt;r.p0=t[e],r.p1=t[n];for(var o=-1,s=e,a=e+1;a<n;a++){var u=t[a],h=r.distance(u);o<h&&(o=h,s=a)}return i[0]=o,s},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;i<n;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n),r=i.iterator();r.hasNext();){var o=r.next();if(this.hasInteriorIntersection(o,n)){if($r.isInLineSection(t,e,o))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return $r}}),$r.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(to.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new $r(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return to}}),e(eo.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new Ft,this.inputGeom.apply(new io(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new no(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(t<0)throw new l("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return eo}}),eo.simplify=function(t,e){var n=new eo(t);return n.setDistanceTolerance(e),n.getResultGeometry()},a(no,ee),e(no.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof xt){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return ee.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return no}}),e(io.prototype,{filter:function(t){if(t instanceof xt){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new Kr(e,n);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[q]},getClass:function(){return io}}),eo.LineStringTransformer=no,eo.LineStringMapBuilderFilter=io;var ds=Object.freeze({DouglasPeuckerSimplifier:Wr,TopologyPreservingSimplifier:eo});e(ro.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=ro.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n),o=r/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(o):this.splitPt=ro.pointAlongReverse(this.seg,o)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return ro}}),ro.pointAlongReverse=function(t,e){var n=new I;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(oo.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return oo}}),e(so.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength(),r=i/2,o=new ro(n),s=so.projectedSplitPoint(t,e),a=2*s.distance(e)*.8,u=a;return r<u&&(u=r),o.setMinimumLength(u),o.splitAt(s),o.getSplitPoint()},interfaces_:function(){return[oo]},getClass:function(){return so}}),so.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),i=n.project(e);return i},e(ao.prototype,{interfaces_:function(){return[]},getClass:function(){return ao}}),ao.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},ao.isInCircleDDNormalized=function(t,e,n,i){var r=R.valueOf(t.x).selfSubtract(i.x),o=R.valueOf(t.y).selfSubtract(i.y),s=R.valueOf(e.x).selfSubtract(i.x),a=R.valueOf(e.y).selfSubtract(i.y),u=R.valueOf(n.x).selfSubtract(i.x),h=R.valueOf(n.y).selfSubtract(i.y),c=r.multiply(a).selfSubtract(s.multiply(o)),l=s.multiply(h).selfSubtract(u.multiply(a)),f=u.multiply(o).selfSubtract(r.multiply(h)),d=r.multiply(r).selfAdd(o.multiply(o)),g=s.multiply(s).selfAdd(a.multiply(a)),p=u.multiply(u).selfAdd(h.multiply(h)),v=d.selfMultiply(l).selfAdd(g.selfMultiply(f)).selfAdd(p.selfMultiply(c)),y=0<v.doubleValue();return y},ao.checkRobustInCircle=function(t,e,n,i){var r=ao.isInCircleNonRobust(t,e,n,i),o=ao.isInCircleDDSlow(t,e,n,i),s=ao.isInCircleCC(t,e,n,i),a=ri.circumcentre(t,e,n);D.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===o&&r===s||(D.out.println("inCircle robustness failure (double result = "+r+", DD result = "+o+", CC result = "+s+")"),D.out.println(jt.toLineString(new Rt([t,e,n,i]))),D.out.println("Circumcentre = "+jt.toPoint(a)+" radius = "+t.distance(a)),D.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),D.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),D.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),D.out.println())},ao.isInCircleDDFast=function(t,e,n,i){var r=R.sqr(t.x).selfAdd(R.sqr(t.y)).selfMultiply(ao.triAreaDDFast(e,n,i)),o=R.sqr(e.x).selfAdd(R.sqr(e.y)).selfMultiply(ao.triAreaDDFast(t,n,i)),s=R.sqr(n.x).selfAdd(R.sqr(n.y)).selfMultiply(ao.triAreaDDFast(t,e,i)),a=R.sqr(i.x).selfAdd(R.sqr(i.y)).selfMultiply(ao.triAreaDDFast(t,e,n)),u=r.selfSubtract(o).selfAdd(s).selfSubtract(a),h=0<u.doubleValue();return h},ao.isInCircleCC=function(t,e,n,i){var r=ri.circumcentre(t,e,n),o=t.distance(r),s=i.distance(r)-o;return s<=0},ao.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,s=e.x-i.x,a=e.y-i.y,u=n.x-i.x,h=n.y-i.y,c=r*a-s*o,l=s*h-u*a,f=u*o-r*h,d=r*r+o*o,g=s*s+a*a,p=u*u+h*h,v=d*l+g*f+p*c;return 0<v},ao.isInCircleDDSlow=function(t,e,n,i){var r=R.valueOf(i.x),o=R.valueOf(i.y),s=R.valueOf(t.x),a=R.valueOf(t.y),u=R.valueOf(e.x),h=R.valueOf(e.y),c=R.valueOf(n.x),l=R.valueOf(n.y),f=s.multiply(s).add(a.multiply(a)).multiply(ao.triAreaDDSlow(u,h,c,l,r,o)),d=u.multiply(u).add(h.multiply(h)).multiply(ao.triAreaDDSlow(s,a,c,l,r,o)),g=c.multiply(c).add(l.multiply(l)).multiply(ao.triAreaDDSlow(s,a,u,h,r,o)),p=r.multiply(r).add(o.multiply(o)).multiply(ao.triAreaDDSlow(s,a,u,h,c,l)),v=f.subtract(d).add(g).subtract(p),y=0<v.doubleValue();return y},ao.isInCircleNonRobust=function(t,e,n,i){var r=0<(t.x*t.x+t.y*t.y)*ao.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*ao.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*ao.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*ao.triArea(t,e,n);return r},ao.isInCircleRobust=function(t,e,n,i){return ao.isInCircleNormalized(t,e,n,i)},ao.triAreaDDSlow=function(t,e,n,i,r,o){return n.subtract(t).multiply(o.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},ao.triAreaDDFast=function(t,e,n){var i=R.valueOf(e.x).selfSubtract(t.x).selfMultiply(R.valueOf(n.y).selfSubtract(t.y)),r=R.valueOf(e.y).selfSubtract(t.y).selfMultiply(R.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(uo.prototype,{circleCenter:function(t,e){var n=new uo(this.getX(),this.getY()),i=this.bisector(n,t),r=this.bisector(t,e),o=new F(i,r),s=null;try{s=new uo(o.getX(),o.getY())}catch(i){if(!(i instanceof M))throw i;D.err.println("a: "+n+"  b: "+t+"  c: "+e),D.err.println(i)}return s},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),r=new F(t.getX()+n/2,t.getY()+i/2,1),o=new F(t.getX()-i+n/2,t.getY()+n+i/2,1);return new F(r,o)},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return ao.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),o=e.getX()-i,s=n.getX()-i,a=e.getY()-r,u=n.getY()-r,h=o*u-s*a,c=this.getX()-i,l=this.getY()-r,f=(u*c-s*l)/h,d=(-a*c+o*l)/h,g=t.getZ()+f*(e.getZ()-t.getZ())+d*(n.getZ()-t.getZ());return g},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,i=(this.p.z+t.getZ())/2;return new uo(e,n,i)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return 0<(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new uo(t*this.p.x,t*this.p.y)},cross:function(){return new uo(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new uo(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=e.sub(t),i=this.sub(t),r=n.crossProduct(i);return 0<r?uo.LEFT:r<0?uo.RIGHT:n.getX()*i.getX()<0||n.getY()*i.getY()<0?uo.BEHIND:n.magn()<i.magn()?uo.BEYOND:t.equals(this)?uo.ORIGIN:e.equals(this)?uo.DESTINATION:uo.BETWEEN},sum:function(t){return new uo(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),o=this.distance(t,e);return o<r&&(r=o),(o=this.distance(e,this))<r&&(r=o),i/r},interfaces_:function(){return[]},getClass:function(){return uo}}),uo.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),o=n.z-e.z,s=e.z+o*(r/i);return s}if(4===arguments.length){var a=arguments[0],u=arguments[1],h=arguments[2],c=arguments[3],l=u.x,f=u.y,d=h.x-l,g=c.x-l,p=h.y-f,v=c.y-f,y=d*v-g*p,m=a.x-l,x=a.y-f,E=(v*m-g*x)/y,w=(-p*m+d*x)/y,_=u.z+E*(h.z-u.z)+w*(c.z-u.z);return _}},uo.LEFT=0,uo.RIGHT=1,uo.BEYOND=2,uo.BEHIND=3,uo.BETWEEN=4,uo.ORIGIN=5,uo.DESTINATION=6,a(ho,uo),e(ho.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return ho}}),e(co.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new Wt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return jt.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return co}}),co.makeEdge=function(t,e){var n=new co,i=new co,r=new co,o=new co;((((n._rot=i)._rot=r)._rot=o)._rot=n).setNext(n),i.setNext(o),r.setNext(r),o.setNext(i);var s=n;return s.setOrig(t),s.setDest(e),s},co.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();co.splice(t,e),co.splice(t.sym(),n),co.splice(t,e.lNext()),co.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},co.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),o=t.oNext(),s=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(o),n.setNext(s),i.setNext(a)},co.connect=function(t,e){var n=co.makeEdge(t.dest(),e.orig());return co.splice(n,t.lNext()),co.splice(n.sym(),e),n},e(lo.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);co.splice(n,e);for(var i=n;n=this.subdiv.connect(e,n.sym()),(e=n.oPrev()).lNext()!==i;);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))co.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return lo}}),e(fo.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return fo}}),e(go.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[fo]},getClass:function(){return go}}),a(po,x),e(po.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return po}}),po.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(vo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return vo}}),e(yo.prototype,{getTriangleVertices:function(t){var e=new Eo;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=co.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new b,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var o=new E;o.addAll(n,!1),o.closeRing(),o.size()<4&&(D.out.println(o),o.add(o.get(o.size()-1),!0));var s=o.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(s),null),u=i.orig();return a.setUserData(u.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);co.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return co.splice(e.sym(),n),co.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);yo.getTriangleEdges(t,e);var n=new Array(3).fill(null);yo.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=co.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new Zt;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=this.fetchTriangleToVisit(r,n,e,i);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new w(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),i=0;i=n<e?10*e:10*n,this.frameVertex[0]=new uo((t.getMaxX()+t.getMinX())/2,t.getMaxY()+i),this.frameVertex[1]=new uo(t.getMinX()-i,t.getMinY()-i),this.frameVertex[2]=new uo(t.getMaxX()+i,t.getMinY()-i),this.frameEnv=new w(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new wo;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Q,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var o=i.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,o=0,s=!1;do{this.triEdges[o]=r,this.isFrameEdge(r)&&(s=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),o++,r=r.lNext()}while(r!==t);return s&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new b,n=new Q,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),o=r.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(r));var s=r.sym(),a=s.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(s))}return e},getTriangleEdges:function(t){var e=new xo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new b,n=new Zt;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=r.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){co.splice(t,t.oPrev()),co.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(i<++n)throw new po(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new mo,!0);for(var e=new b,n=this.getVertexUniqueEdges(!1),i=n.iterator();i.hasNext();){var r=i.next();e.add(this.getVoronoiCellPolygon(r,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(kt.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);co.splice(n,e);for(var i=n;n=this.connect(e,n.sym()),(e=n.oPrev()).lNext()!==i;);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof uo){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof I){var e=arguments[0];return this.locator.locate(new uo(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new uo(n));if(null===r)return null;var o=r;r.dest().getCoordinate().equals2D(n)&&(o=r.sym());var s=o;do{if(s.dest().getCoordinate().equals2D(i))return s;s=s.oNext()}while(s!==o);return null}},interfaces_:function(){return[]},getClass:function(){return yo}}),yo.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new l("Edges do not form a triangle")},e(mo.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=ri.circumcentre(e,n,i),o=new uo(r),s=0;s<3;s++)t[s].rot().setOrig(o)},interfaces_:function(){return[vo]},getClass:function(){return mo}}),e(xo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[vo]},getClass:function(){return xo}}),e(Eo.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[vo]},getClass:function(){return Eo}}),e(wo.prototype,{checkTriangleSize:function(t){2<=t.length?jt.toLineString(t[0],t[1]):1<=t.length&&jt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;e<3;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(0<this.coordList.size()){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[vo]},getClass:function(){return wo}}),yo.TriangleCircumcentreVisitor=mo,yo.TriangleEdgesListVisitor=xo,yo.TriangleVertexListVisitor=Eo,yo.TriangleCoordinatesVisitor=wo,yo.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(_o.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return _o}}),e(Io.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Io}}),e(bo.prototype,{isRepeated:function(){return 1<this.count},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return bo}}),e(Mo.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new bo(e,n),this.root;if(0<this.tolerance){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){var t,e,n=arguments,i=this;if(1===arguments.length){var r=arguments[0],o=new b;return this.query(r,o),o}if(2===arguments.length)if(arguments[0]instanceof w&&N(arguments[1],y))t=n[0],e=n[1],i.queryNode(i.root,t,!0,{interfaces_:function(){return[Io]},visit:function(t){e.add(t)}});else if(arguments[0]instanceof w&&N(arguments[1],Io)){var s=arguments[0],a=arguments[1];this.queryNode(this.root,s,!0,a)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,o=null,s=null;n?(r=e.getMinX(),o=e.getMaxX(),s=t.getX()):(r=e.getMinY(),o=e.getMaxY(),s=t.getY());var a=r<s,u=s<=o;a&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),u&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new So(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,o=!0;null!==n;){if(null!==n){var s=t.distance(n.getCoordinate())<=this.tolerance;if(s)return n.increment(),n}o=r?t.x<n.getX():t.y<n.getY(),i=n,n=o?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var a=new bo(t,e);return o?i.setLeft(a):i.setRight(a),a},interfaces_:function(){return[]},getClass:function(){return Mo}}),Mo.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Mo.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new E,r=e.iterator();r.hasNext();)for(var o=r.next(),s=n?o.getCount():1,a=0;a<s;a++)i.add(o.getCoordinate(),!0);return i.toCoordinateArray()}},e(So.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var i=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(i=!0),i&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new w(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Io]},getClass:function(){return So}}),Mo.BestMatchVisitor=So,e(No.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();for(var t=0,e=0;e=this.enforceGabriel(this.segments),t++,0<e&&t<No.MAX_SPLIT_ITER;);},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){var i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new kt,e=this.getPointArray(),n=new $t(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new I((e.x+n.x)/2,(e.y+n.y)/2),r=e.distance(i),o=new w(i);o.expandBy(r);for(var s=this.kdt.query(o),a=null,u=m.MAX_VALUE,h=s.iterator();h.hasNext();){var c=h.next(),l=c.getCoordinate();if(!l.equals2D(e)&&!l.equals2D(n)){var f=i.distance(l);if(f<r){var d=f;(null===a||d<u)&&(a=l,u=d)}}}return a},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new b,n=0,i=new b,r=t.iterator();r.hasNext();){var o=r.next(),s=this.findNonGabrielPoint(o);if(null!==s){this.splitPt=this.splitFinder.findSplitPoint(o,s);var a=this.createVertex(this.splitPt,o),u=(this.insertSite(a),new _o(o.getStartX(),o.getStartY(),o.getStartZ(),a.getX(),a.getY(),a.getZ(),o.getData())),h=new _o(a.getX(),a.getY(),a.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(u),e.add(h),i.add(o),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return e=null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new ho(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1],e=null;return(e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new ho(n)).setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=No.computeVertexEnvelope(this.initialVertices),e=No.computeVertexEnvelope(this.segVertices),n=new w(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),o=Math.max(i,r);this.computeAreaEnv=new w(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new yo(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new go(this.subdiv)),this.incDel=new lo(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof ho){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof I){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return No}}),No.computeVertexEnvelope=function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},No.MAX_SPLIT_ITER=99,e(Co.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Co.envelope(this.siteCoords),e=Co.toVertices(this.siteCoords);this.subdiv=new yo(t,this.tolerance);var n=new lo(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof k){var t=arguments[0];this.siteCoords=Co.extractUniqueCoordinates(t)}else if(N(arguments[0],v)){var e=arguments[0];this.siteCoords=Co.unique(X.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Co}}),Co.extractUniqueCoordinates=function(t){if(null===t)return new E;var e=t.getCoordinates();return Co.unique(e)},Co.envelope=function(t){for(var e=new w,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},Co.unique=function(t){var e=X.copyDeep(t);ut.sort(e);var n=new E(e,!1);return n},Co.toVertices=function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();e.add(new uo(i))}return e},e(Lo.prototype,{createSiteVertices:function(t){for(var e=new b,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new ho(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=Co.envelope(this.siteCoords),e=new b;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Lo.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),i=new No(n,this.tolerance);i.setConstraints(e,new b(this.constraintVertexMap.values())),i.formInitialDelaunay(),i.enforceConstraints(),this.subdiv=i.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Co.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new ho(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return Lo}}),Lo.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=In.getLines(t),n=new b,i=e.iterator();i.hasNext();){var r=i.next();Lo.createConstraintSegments(r,n)}return n}if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),i=1;i<a.length;i++)s.add(new _o(a[i-1],a[i]))},e(Po.prototype,{create:function(){if(null!==this.subdiv)return null;var t=Co.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Co.toVertices(this.siteCoords);this.subdiv=new yo(t,this.tolerance);var i=new lo(this.subdiv);i.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Po.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof k){var t=arguments[0];this.siteCoords=Co.extractUniqueCoordinates(t)}else if(N(arguments[0],v)){var e=arguments[0];this.siteCoords=Co.unique(X.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Po}}),Po.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new b,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),s=null;e.contains(o.getEnvelopeInternal())?s=o:e.intersects(o.getEnvelopeInternal())&&(s=n.intersection(o)).setUserData(o.getUserData()),null===s||s.isEmpty()||i.add(s)}return t.getFactory().createGeometryCollection(kt.toGeometryArray(i))};var gs=Object.freeze({Vertex:uo}),ps=Object.freeze({ConformingDelaunayTriangulationBuilder:Lo,DelaunayTriangulationBuilder:Co,VoronoiDiagramBuilder:Po,quadedge:gs});e(Oo.prototype,{interfaces_:function(){return[]},getClass:function(){return Oo}}),Oo.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return qn.createEmptyResult(qn.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),zn.overlayOp(t,e,qn.UNION)},e(k.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&qr.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return Ur.union(this);if(1===arguments.length){var t=arguments[0];return Oo.union(this,t)}},isValid:function(){return br.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return qn.createEmptyResult(qn.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Ve.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),zn.overlayOp(this,t,qn.INTERSECTION)},covers:function(t){return qr.covers(this,t)},coveredBy:function(t){return qr.coveredBy(this,t)},touches:function(t){return qr.touches(this,t)},intersects:function(t){return qr.intersects(this,t)},within:function(t){return qr.within(this,t)},overlaps:function(t){return qr.overlaps(this,t)},disjoint:function(t){return qr.disjoint(this,t)},crosses:function(t){return qr.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return Hi.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return Hi.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return Hi.bufferOp(this,i,r,o)}},convexHull:function(){return new $t(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return qr.relate.apply(qr,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=Jt.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e){var n=new Vn(this);t=n.getInteriorPoint()}else if(1===e){var n=new Un(this);t=n.getInteriorPoint()}else{var n=new jn(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return qn.createEmptyResult(qn.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),zn.overlayOp(this,t,qn.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new jt;return t.write(this)},toString:function(){this.toText()},contains:function(t){return qr.contains(this,t)},difference:function(t){return this.isEmpty()?qn.createEmptyResult(qn.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),zn.overlayOp(this,t,qn.DIFFERENCE))},isSimple:function(){var t=new Ni(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return!(e<n)&&$i.isWithinDistance(this,t,e)},distance:function(t){return $i.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}}),t.version="1.3.0 (6e65adb)",t.algorithm=Yo,t.densify=Xo,t.dissolve=Wo,t.geom=Uo,t.geomgraph=Ho,t.index=Zo,t.io=es,t.noding=ns,t.operation=ls,t.precision=fs,t.simplify=ds,t.triangulate=ps,Object.defineProperty(t,"__esModule",{value:!0})}(e)});(oi=ci)&&oi.__esModule&&Object.prototype.hasOwnProperty.call(oi,"default")&&oi.default;var li=function(t,e){var n,i;n="Feature"===t.type?t.geometry:t,i="Feature"===e.type?e.geometry:e;var r=new ci.io.GeoJSONReader,o=r.read(JSON.stringify(n)),s=r.read(JSON.stringify(i)),a=o.intersection(s);if(!a.isEmpty())return{type:"Feature",properties:{},geometry:(new ci.io.GeoJSONWriter).write(a)}},fi=["toScreenPoint","toPointGeometry","addLayerType","newMap","setMapEvent","setNativeMapType","setBaseLayer","setExtent","getExtent","setLayerList","getLayerList","setGroupList","getGroupList","getZoom","getScale","getCenter","centerAt","zoomAt","updateMap","openInfoWindowByAny","addLayer","getLayer","setLayerEvent","setLayerVisible","setLayerOpacity","removeLayer","bringToFront","getLayerOption","addImage","clearImage","setWMSLayer","setDynamicLayer","setGroupEvent","setGroupVisible","setGroupOpacity","getGroupExtent","getGraphicList","getGroupOption","clearGroup","zoomToGroup","panToGroup","getGroup","drawStart","drawEnd","addGroup","removeGroup","addCircle","addLabel","addMarker","addPolygon","addPolyline","addMultiPolygon","addHolePolygon","addFeature","removeFeature","addCluster","removeCluster","addHeatMapByUrl","addHeatMapByData","removeHeatMap","removeImage","setImageVisible","getGraphic","setGraphicEvent","setGraphicVisible","setGraphicOpacity","setGraphicGeometry","setGraphicSymbol","getGraphicExtent","zoomToGraphic","panToGraphic","removeGraphic","getGeometryByID","getSymbolByID","getGraphicOption","openInfoWindow","closeInfoWindow","moveToFront","getAttribute","setDraggable","setInfoWindow","drawStartEdit","drawSaveEdit","drawCancelEdit","drawIsEditMode","measureArea","measureLine","measureMultiLine","removeEvent","getOriginInfo"],di="[object String]";var gi=function(t){return"string"==typeof t||!S(t)&&x(t)&&m(t)==di},pi="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var vi=function(){this.__data__=[],this.size=0};var yi=function(t,e){for(var n=t.length;n--;)if(bt(t[n][0],e))return n;return-1},mi=Array.prototype.splice;var xi=function(t){var e=this.__data__,n=yi(e,t);return!(n<0||(n==e.length-1?e.pop():mi.call(e,n,1),--this.size,0))};var Ei=function(t){var e=this.__data__,n=yi(e,t);return n<0?void 0:e[n][1]};var wi=function(t){return-1<yi(this.__data__,t)};var _i=function(t,e){var n=this.__data__,i=yi(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function Ii(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ii.prototype.clear=vi,Ii.prototype.delete=xi,Ii.prototype.get=Ei,Ii.prototype.has=wi,Ii.prototype.set=_i;var bi=Ii;var Mi=function(){this.__data__=new bi,this.size=0};var Si=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Ni=function(t){return this.__data__.get(t)};var Ci=function(t){return this.__data__.has(t)},Li=wt(a,"Map"),Pi=wt(Object,"create");var Oi=function(){this.__data__=Pi?Pi(null):{},this.size=0};var Ri=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Ti="__lodash_hash_undefined__",Ai=Object.prototype.hasOwnProperty;var Di=function(t){var e=this.__data__;if(Pi){var n=e[t];return n===Ti?void 0:n}return Ai.call(e,t)?e[t]:void 0},Fi=Object.prototype.hasOwnProperty;var Gi=function(t){var e=this.__data__;return Pi?void 0!==e[t]:Fi.call(e,t)},qi="__lodash_hash_undefined__";var ki=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Pi&&void 0===e?qi:e,this};function zi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}zi.prototype.clear=Oi,zi.prototype.delete=Ri,zi.prototype.get=Di,zi.prototype.has=Gi,zi.prototype.set=ki;var ji=zi;var Bi=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Ui=function(t,e){var n=t.__data__;return Bi(e)?n["string"==typeof e?"string":"hash"]:n.map};var Vi=function(t){var e=Ui(this,t).delete(t);return this.size-=e?1:0,e};var Yi=function(t){return Ui(this,t).get(t)};var Xi=function(t){return Ui(this,t).has(t)};var Wi=function(t,e){var n=Ui(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function Hi(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Hi.prototype.clear=function(){this.size=0,this.__data__={hash:new ji,map:new(Li||bi),string:new ji}},Hi.prototype.delete=Vi,Hi.prototype.get=Yi,Hi.prototype.has=Xi,Hi.prototype.set=Wi;var Ji=Hi,Ki=200;var Zi=function(t,e){var n=this.__data__;if(n instanceof bi){var i=n.__data__;if(!Li||i.length<Ki-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ji(i)}return n.set(t,e),this.size=n.size,this};function Qi(t){var e=this.__data__=new bi(t);this.size=e.size}Qi.prototype.clear=Mi,Qi.prototype.delete=Si,Qi.prototype.get=Ni,Qi.prototype.has=Ci,Qi.prototype.set=Zi;var $i=Qi,tr="__lodash_hash_undefined__";var er=function(t){return this.__data__.has(t)};function nr(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ji;++e<n;)this.add(t[e])}nr.prototype.add=nr.prototype.push=function(t){return this.__data__.set(t,tr),this},nr.prototype.has=er;var ir=nr;var rr=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1};var or=function(t,e){return t.has(e)},sr=1,ar=2;var ur=function(t,e,n,i,r,o){var s=n&sr,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var h=o.get(t);if(h&&o.get(e))return h==e;var c=-1,l=!0,f=n&ar?new ir:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var d=t[c],g=e[c];if(i)var p=s?i(g,d,c,e,t,o):i(d,g,c,t,e,o);if(void 0!==p){if(p)continue;l=!1;break}if(f){if(!rr(e,function(t,e){if(!or(f,e)&&(d===t||r(d,t,n,i,o)))return f.push(e)})){l=!1;break}}else if(d!==g&&!r(d,g,n,i,o)){l=!1;break}}return o.delete(t),o.delete(e),l},hr=a.Uint8Array;var cr=function(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i};var lr=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n},fr=1,dr=2,gr="[object Boolean]",pr="[object Date]",vr="[object Error]",yr="[object Map]",mr="[object Number]",xr="[object RegExp]",Er="[object Set]",wr="[object String]",_r="[object Symbol]",Ir="[object ArrayBuffer]",br="[object DataView]",Mr=i?i.prototype:void 0,Sr=Mr?Mr.valueOf:void 0;var Nr=function(t,e,n,i,r,o,s){switch(n){case br:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ir:return!(t.byteLength!=e.byteLength||!o(new hr(t),new hr(e)));case gr:case pr:case mr:return bt(+t,+e);case vr:return t.name==e.name&&t.message==e.message;case xr:case wr:return t==e+"";case yr:var a=cr;case Er:var u=i&fr;if(a||(a=lr),t.size!=e.size&&!u)return!1;var h=s.get(t);if(h)return h==e;i|=dr,s.set(t,e);var c=ur(a(t),a(e),i,r,o,s);return s.delete(t),c;case _r:if(Sr)return Sr.call(t)==Sr.call(e)}return!1};var Cr=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t};var Lr=function(t,e,n){var i=e(t);return S(t)?i:Cr(i,n(t))};var Pr=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o};var Or=function(){return[]},Rr=Object.prototype.propertyIsEnumerable,Tr=Object.getOwnPropertySymbols,Ar=Tr?function(e){return null==e?[]:(e=Object(e),Pr(Tr(e),function(t){return Rr.call(e,t)}))}:Or;var Dr=function(t){return Lr(t,nt,Ar)},Fr=1,Gr=Object.prototype.hasOwnProperty;var qr=function(t,e,n,i,r,o){var s=n&Fr,a=Dr(t),u=a.length;if(u!=Dr(e).length&&!s)return!1;for(var h=u;h--;){var c=a[h];if(!(s?c in e:Gr.call(e,c)))return!1}var l=o.get(t);if(l&&o.get(e))return l==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++h<u;){var g=t[c=a[h]],p=e[c];if(i)var v=s?i(p,g,c,e,t,o):i(g,p,c,t,e,o);if(!(void 0===v?g===p||r(g,p,n,i,o):v)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var y=t.constructor,m=e.constructor;y!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(e),f},kr=wt(a,"DataView"),zr=wt(a,"Promise"),jr=wt(a,"Set"),Br=wt(a,"WeakMap"),Ur="[object Map]",Vr="[object Promise]",Yr="[object Set]",Xr="[object WeakMap]",Wr="[object DataView]",Hr=ft(kr),Jr=ft(Li),Kr=ft(zr),Zr=ft(jr),Qr=ft(Br),$r=m;(kr&&$r(new kr(new ArrayBuffer(1)))!=Wr||Li&&$r(new Li)!=Ur||zr&&$r(zr.resolve())!=Vr||jr&&$r(new jr)!=Yr||Br&&$r(new Br)!=Xr)&&($r=function(t){var e=m(t),n="[object Object]"==e?t.constructor:void 0,i=n?ft(n):"";if(i)switch(i){case Hr:return Wr;case Jr:return Ur;case Kr:return Vr;case Zr:return Yr;case Qr:return Xr}return e});var to=$r,eo=1,no="[object Arguments]",io="[object Array]",ro="[object Object]",oo=Object.prototype.hasOwnProperty;var so=function(t,e,n,i,r,o){var s=S(t),a=S(e),u=s?io:to(t),h=a?io:to(e),c=(u=u==no?ro:u)==ro,l=(h=h==no?ro:h)==ro,f=u==h;if(f&&C(t)){if(!C(e))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new $i),s||k(t)?ur(t,e,n,i,r,o):Nr(t,e,u,n,i,r,o);if(!(n&eo)){var d=c&&oo.call(t,"__wrapped__"),g=l&&oo.call(e,"__wrapped__");if(d||g){var p=d?t.value():t,v=g?e.value():e;return o||(o=new $i),r(p,v,n,i,o)}}return!!f&&(o||(o=new $i),qr(t,e,n,i,r,o))};var ao=function t(e,n,i,r,o){return e===n||(null==e||null==n||!x(e)&&!x(n)?e!=e&&n!=n:so(e,n,i,r,t,o))};function uo(t){return"[object Number]"===Object.prototype.toString.call(t)}var ho=J,co=function(t,e){return ao(t,e)},lo=Object.prototype,fo=lo.hasOwnProperty,go=Gt(function(t,e){t=Object(t);var n=-1,i=e.length,r=2<i?e[2]:void 0;for(r&&qt(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],s=Ut(o),a=-1,u=s.length;++a<u;){var h=s[a],c=t[h];(void 0===c||bt(c,lo[h])&&!fo.call(t,h))&&(t[h]=o[h])}return t}),po="[object Number]";var vo=function(t){return"number"==typeof t||x(t)&&m(t)==po};var yo=function(t){return vo(t)&&t!=+t},mo="[object Boolean]";var xo=function(t){return!0===t||!1===t||x(t)&&m(t)==mo};var Eo=function(t,e,n){(void 0===n||bt(t[e],n))&&(void 0!==n||e in t)||It(t,e,n)},wo=t(function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?a.Buffer:void 0,o=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=o?o(n):new t.constructor(n);return t.copy(i),i}});var _o=function(t){var e=new t.constructor(t.byteLength);return new hr(e).set(new hr(t)),e};var Io=function(t,e){var n=e?_o(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var bo=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e},Mo=Object.create,So=function(){function n(){}return function(t){if(!J(t))return{};if(Mo)return Mo(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}}(),No=Y(Object.getPrototypeOf,Object);var Co=function(t){return"function"!=typeof t.constructor||V(t)?{}:So(No(t))};var Lo=function(t){return x(t)&&et(t)},Po="[object Object]",Oo=Function.prototype,Ro=Object.prototype,To=Oo.toString,Ao=Ro.hasOwnProperty,Do=To.call(Object);var Fo=function(t){if(!x(t)||m(t)!=Po)return!1;var e=No(t);if(null===e)return!0;var n=Ao.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&To.call(n)==Do};var Go=function(t,e){return"__proto__"==e?void 0:t[e]};var qo=function(t){return Nt(t,Ut(t))};var ko=function(t,e,n,i,r,o,s){var a=Go(t,n),u=Go(e,n),h=s.get(u);if(h)Eo(t,n,h);else{var c=o?o(a,u,n+"",t,e,s):void 0,l=void 0===c;if(l){var f=S(u),d=!f&&C(u),g=!f&&!d&&k(u);c=u,f||d||g?S(a)?c=a:Lo(a)?c=bo(a):d?(l=!1,c=wo(u,!0)):g?(l=!1,c=Io(u,!0)):c=[]:Fo(u)||M(u)?M(c=a)?c=qo(a):(!J(a)||i&&tt(a))&&(c=Co(u)):l=!1}l&&(s.set(u,c),r(c,u,i,o,s),s.delete(u)),Eo(t,n,c)}};var zo=function i(r,o,s,a,u){r!==o&&h(o,function(t,e){if(J(t))u||(u=new $i),ko(r,o,e,s,i,a,u);else{var n=a?a(Go(r,e),t,e+"",r,o,u):void 0;void 0===n&&(n=t),Eo(r,e,n)}},Ut)};var jo=function t(e,n,i,r,o,s){return J(e)&&J(n)&&(s.set(n,e),zo(e,n,void 0,t,s),s.delete(n)),e},Bo=kt(function(t,e,n,i){zo(t,e,n,i)}),Uo=Gt(function(t){return t.push(void 0,jo),Ct(Bo,void 0,t)}),Vo={wms:"wms",wmts:"wmts",image:"image",wmts_hex:"wmts_hex",tile:"tile",dynamic:"dynamic",general:"general"},Yo={graphic:"graphic",heatmap:"heatmap",cluster:"cluster",feature:"feature",general:"general"},Xo={marker:"marker",label:"label",polyline:"polyline",polygon:"polygon",circle:"circle",holepolygon:"holepolygon",multipolygon:"multipolygon",general:"general"},Wo={click:"click",extentchange:"extentchange",mousedrag:"mousedrag",mousemove:"mousemove",mouseup:"mouseup",panstart:"panstart",pan:"pan",panend:"panend",resize:"resize",updateend:"updateend",zoomend:"zoomend",rightclick:"rightclick"},Ho={loaded:"loaded",updated:"updated"},Jo={click:"click",mouseover:"mouseover",mouseout:"mouseout",dragstart:"dragstart",dragend:"dragend"},Ko=Jo;function Zo(t){if(yo(t=+t))throw new TypeError("( "+t+" ) 需為數值");return t}function Qo(t){if(0<=(t=Zo(t)))return t;throw new RangeError("("+t+") 需 >= 0")}function $o(t){if((t=Zo(t))<=1&&0<=t)return t;throw new RangeError("("+t+") 需介於 0 ~ 1")}function ts(t){if(!xo(t))throw new TypeError("("+t+") 需為 true 或 false");return t}function es(t){if(!gi(t))throw new TypeError("("+t+") 需為 String");return t}function ns(t){return es(t)}function is(t){if(!J(t))throw new TypeError("("+t+") 傳入格式需為 { index1: layer1, index2: layer2, ...}");var n={};return at(t,function(t,e){e=Zo(e),n[e]=t}),n}function rs(t){if(!tt(t))throw new TypeError("("+t+") 需為 Function");return t}function os(t){if(!J(t))throw new TypeError("("+t+") extent 需為物件");return{xmin:Zo(t.xmin),ymin:Zo(t.ymin),xmax:Zo(t.xmax),ymax:Zo(t.ymax)}}function ss(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Vo[t])throw new TypeError("("+arguments[0]+") layerType 不存在");return t}function as(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Xo[t])throw new TypeError("("+arguments[0]+") graphicType 不存在");return t}function us(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{content:void 0===t.content?void 0:es(t.content),title:void 0===t.title?void 0:es(t.title),width:void 0===t.width?void 0:Qo(t.width),height:void 0===t.height?void 0:Qo(t.height)}}function hs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{token:"",opacity:1,tileSize:256}),{token:es(e.token),opacity:$o(e.opacity),tileSize:Qo(e.tileSize),maxZoom:void 0===e.maxZoom?void 0:Qo(e.maxZoom),minZoom:void 0===e.minZoom?void 0:Qo(e.minZoom),loaded:void 0===e.loaded?void 0:rs(e.loaded)}}function cs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{opacity:1}),{opacity:$o(e.opacity),maxZoom:void 0===e.maxZoom?void 0:Qo(e.maxZoom),minZoom:void 0===e.minZoom?void 0:Qo(e.minZoom)}}function ls(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.opacity,n=t.index;return go({opacity:yo(+e)?void 0:+e,index:yo(+n)?void 0:+n},{opacity:1})}function fs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.distance,n=t.opacity,i=t.index;return go({distance:yo(+e)?void 0:+e,opacity:yo(+n)?void 0:+n,index:yo(+i)?void 0:+i},{distance:50,opacity:1})}function ds(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.colors,n=t.radius,i=t.maxIntensity,r=t.opacity,o=t.index;return Uo({colors:S(e)?e:void 0,radius:yo(+n)?void 0:+n,maxIntensity:yo(+i)?void 0:+i,opacity:yo(+r)?void 0:+r,index:yo(+o)?void 0:+o},{colors:["rgba(0, 0, 255, 0)","rgb(0, 0, 255)","rgb(255, 0, 255)","rgb(255, 0, 0)"],radius:20,maxIntensity:50,opacity:1})}function gs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{tooltip:"",draggable:!1}),{tooltip:es(e.tooltip),infoWindow:us(e.infoWindow),draggable:ts(e.draggable)}}function ps(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{tooltip:"",draggable:!1,clickable:!0}),{tooltip:es(e.tooltip),infoWindow:us(e.infoWindow),draggable:ts(e.draggable),clickable:ts(e.clickable)}}function vs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{text:"No Text",font:"新細明體",color:"#000000",backgroundColor:"",size:20,opacity:1,xoffset:0,yoffset:0,isBold:!1,isItalic:!1,hasUnderline:!1}),{text:es(e.text),font:es(e.font),color:ns(e.color),backgroundColor:ns(e.backgroundColor),size:Qo(e.size),opacity:$o(e.opacity),xoffset:Zo(e.xoffset),yoffset:Zo(e.yoffset),isBold:ts(e.isBold),isItalic:ts(e.isItalic),hasUnderline:ts(e.hasUnderline)}}function ys(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{url:"https://cdn2.iconfinder.com/data/icons/map-location-geo-points/154/double-border-point-map-32.png",width:32,height:32,opacity:1,xoffset:0,yoffset:0}),{url:es(e.url),width:Qo(e.width),height:Qo(e.height),opacity:$o(e.opacity),xoffset:Zo(e.xoffset),yoffset:Zo(e.yoffset)}}function ms(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{weight:2,opacity:1,color:"#FF0000",style:"STYLE_SOLID"}),{weight:Qo(e.weight),opacity:$o(e.opacity),color:ns(e.color),style:es(e.style)}}function xs(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{weight:2,opacity:1,fillOpacity:.2,color:"#FF0000",fillColor:"#000000",style:"STYLE_SOLID",fillStyle:"STYLE_SOLID"}),{weight:Qo(e.weight),opacity:$o(e.opacity),fillOpacity:$o(e.fillOpacity),color:ns(e.color),fillColor:ns(e.fillColor),style:es(e.style),fillStyle:es(e.fillStyle)}}function Es(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e={};return go(e,t,{weight:2,opacity:1,fillOpacity:.2,color:"#FF0000",fillColor:"#000000",style:"STYLE_SOLID",fillStyle:"STYLE_SOLID"}),{weight:Qo(e.weight),opacity:$o(e.opacity),fillOpacity:$o(e.fillOpacity),color:ns(e.color),fillColor:ns(e.fillColor),style:es(e.style),fillStyle:es(e.fillStyle)}}function ws(t){if(!S(t))throw new TypeError("pointData 參數需為 Array, ex [{x, y, attributes}...]");return t.map(function(t){return{x:+t.x,y:+t.y,attributes:J(t.attributes)?t.attributes:{}}})}var _s=Object.freeze({nativeObject:function(t){if(!J(t))throw new TypeError("("+t+") innerAPI 錯誤，需回傳原生物件");return t},nativeList:function(t){if(!S(t))throw new TypeError("("+t+") innerAPI 錯誤，需回傳原生物件陣列，[ _object, _object ... ] ");return t},toObject:function(t){if(!J(t))throw new TypeError("( "+t+" ) 需為物件");return t},toNumber:Zo,isPositiveZero:Qo,isOpacity:$o,isTrueFalse:ts,isText:es,isColor:ns,indexObj:is,orderObj:is,isCallback:rs,id:function(t){if(""===(t=es(t)))throw new Error("("+t+") id 不可為空值");return t},matchKey:function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString()},visibleLayerList:function(t){if(!S(t))throw new TypeError("("+t+") visibleLayerList 需為陣列");return t},intAry:function(t){if(!S(t))throw new TypeError("("+t+") intAry 需為陣列格式 [number, number, ...]");var e=[];return at(t,function(t){t=Zo(t),e.push(t)}),e},extent:os,layerType:ss,customLayerType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),Vo[t])throw new TypeError(arguments[0]+" 與現有 layerType 發生衝突，請重新命名");return t},graphicType:as,groupType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Yo[t])throw new TypeError("("+arguments[0]+") groupType 不存在");return t},isMapEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return t=t.toString().toLowerCase(),!!Wo[t]},mapEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Wo[t])throw new TypeError("("+arguments[0]+") mapEventType 不存在");return t},isLayerEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return t=t.toString().toLowerCase(),!!Ho[t]},layerEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Ho[t])throw new TypeError("("+arguments[0]+") layerEventType 不存在");return t},isGroupEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return t=t.toString().toLowerCase(),!!Jo[t]},groupEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Jo[t])throw new TypeError("("+arguments[0]+") groupEventType 不存在");return t},isGraphicEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return t=t.toString().toLowerCase(),!!Ko[t]},graphicEventType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(t=t.toString().toLowerCase(),!Ko[t])throw new TypeError("("+arguments[0]+") graphicEventType 不存在");return t},screenPoint:function(t){if(!S(t))throw new TypeError("("+t+") screenPoint 需為陣列格式 [left:number, top:number]");return[Zo(t[0]),Zo(t[1])]},infoWindowOption:us,layerOption:hs,groupOption:cs,featureOption:ls,clusterOption:fs,heatmapOption:ds,graphicOption:gs,imageOption:ps,labelSymbol:vs,markerSymbol:ys,polylineSymbol:ms,polygonSymbol:xs,circleSymbol:Es,holepolygonSymbol:xs,multipolygonSymbol:xs,pointData:ws});var Is=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},bs="[object Symbol]";var Ms=function(t){return"symbol"==typeof t||x(t)&&m(t)==bs},Ss=1/0,Ns=i?i.prototype:void 0,Cs=Ns?Ns.toString:void 0;var Ls=function t(e){if("string"==typeof e)return e;if(S(e))return Is(e,t)+"";if(Ms(e))return Cs?Cs.call(e):"";var n=e+"";return"0"==n&&1/e==-Ss?"-0":n};var Ps=function(t){return null==t?"":Ls(t)},Os=0;var Rs=function(t){var e=++Os;return Ps(t)+e},Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},As=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ds=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Fs=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Gs=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},qs=function t(e,n,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=arguments[4];As(this,t),e&&(this.id=e),n&&(this.type=n),i&&(this.class=i),o&&(this.parent=o),this.origin=r,this._events={}},ks=function(t){function r(t,e,n){As(this,r);var i=Fs(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t.divID,e,"map",n));return i.config=t,i}return Ds(r,qs),r}(),zs=function(t){function r(t,e,n,i){return As(this,r),Fs(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,"layer",n,i))}return Ds(r,qs),r}(),js=function(t){function i(t,e,n){return As(this,i),Fs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"dynamic",e,n))}return Ds(i,zs),i}(),Bs=function(t){function i(t,e,n){return As(this,i),Fs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"wms",e,n))}return Ds(i,zs),i}(),Us=function(t){function i(t,e,n){return As(this,i),Fs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"wmts",e,n))}return Ds(i,zs),i}(),Vs=function(t){function i(t,e,n){return As(this,i),Fs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"image",e,n))}return Ds(i,zs),i}(),Ys=function(t){function i(t,e,n){return As(this,i),Fs(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,"image","image",e,n))}return Ds(i,qs),i}(),Xs=function(t){function r(t,e,n,i){return As(this,r),Fs(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,"group",n,i))}return Ds(r,qs),r}(),Ws=function(t){function r(t,e,n,i){return As(this,r),Fs(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,e,"graphic",n,i))}return Ds(r,qs),r}();"function"==typeof pi.setTimeout&&setTimeout,"function"==typeof pi.clearTimeout&&clearTimeout;var Hs=pi.performance||{},Js=(Hs.now||Hs.mozNow||Hs.msNow||Hs.oNow||Hs.webkitNow,"object"==typeof pi&&pi&&pi.Object===Object&&pi),Ks="object"==typeof self&&self&&self.Object===Object&&self,Zs=(Js||Ks||Function("return this")()).Symbol,Qs=Object.prototype,$s=Qs.hasOwnProperty,ta=Qs.toString,ea=Zs?Zs.toStringTag:void 0;var na=Object.prototype.toString;var ia="[object Null]",ra="[object Undefined]",oa=Zs?Zs.toStringTag:void 0;function sa(t){return null==t?void 0===t?ra:ia:oa&&oa in Object(t)?function(t){var e=$s.call(t,ea),n=t[ea];try{t[ea]=void 0;var i=!0}catch(t){}var r=ta.call(t);return i&&(e?t[ea]=n:delete t[ea]),r}(t):(e=t,na.call(e));var e}var aa,ua,ha=(aa=Object.getPrototypeOf,ua=Object,function(t){return aa(ua(t))});var ca,la="[object Object]",fa=Function.prototype,da=Object.prototype,ga=fa.toString,pa=da.hasOwnProperty,va=ga.call(Object);ca="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==pi?pi:"undefined"!=typeof module?module:Function("return this")();var ya,ma,xa=("function"==typeof(ma=ca.Symbol)?ma.observable?ya=ma.observable:(ya=ma("observable"),ma.observable=ya):ya="@@observable",ya),Ea={INIT:"@@redux/INIT"};var wa=t(function(t,e){t.exports=function(){var i=Array.prototype.slice;function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function u(t){return c(t)?t:W(t)}function a(t){return l(t)?t:H(t)}function h(t){return f(t)?t:J(t)}function r(t){return c(t)&&!d(t)?t:K(t)}function c(t){return!(!t||!t[e])}function l(t){return!(!t||!t[n])}function f(t){return!(!t||!t[o])}function d(t){return l(t)||f(t)}function g(t){return!(!t||!t[s])}t(a,u),t(h,u),t(r,u),u.isIterable=c,u.isKeyed=l,u.isIndexed=f,u.isAssociative=d,u.isOrdered=g,u.Keyed=a,u.Indexed=h,u.Set=r;var e="@@__IMMUTABLE_ITERABLE__@@",n="@@__IMMUTABLE_KEYED__@@",o="@@__IMMUTABLE_INDEXED__@@",s="@@__IMMUTABLE_ORDERED__@@",p="delete",w=5,_=1<<w,x=_-1,m={},v={value:!1},y={value:!1};function E(t){return t.value=!1,t}function I(t){t&&(t.value=!0)}function b(){}function M(t,e){e=e||0;for(var n=Math.max(0,t.length-e),i=new Array(n),r=0;r<n;r++)i[r]=t[r+e];return i}function S(t){return void 0===t.size&&(t.size=t.__iterate(C)),t.size}function N(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?S(t)+e:e}function C(){return!0}function L(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&n<=e)}function P(t,e){return R(t,e,0)}function O(t,e){return R(t,e,e)}function R(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var T=0,A=1,D=2,F="function"==typeof Symbol&&Symbol.iterator,G="@@iterator",q=F||G;function k(t){this.next=t}function z(t,e,n,i){var r=0===t?e:1===t?n:[e,n];return i?i.value=r:i={value:r,done:!1},i}function j(){return{value:void 0,done:!0}}function B(t){return!!Y(t)}function U(t){return t&&"function"==typeof t.next}function V(t){var e=Y(t);return e&&e.call(t)}function Y(t){var e=t&&(F&&t[F]||t[G]);if("function"==typeof e)return e}function X(t){return t&&"number"==typeof t.length}function W(t){return null==t?st():c(t)?t.toSeq():function(t){var e=ht(t)||"object"==typeof t&&new nt(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function H(t){return null==t?st().toKeyedSeq():c(t)?l(t)?t.toSeq():t.fromEntrySeq():at(t)}function J(t){return null==t?st():c(t)?l(t)?t.entrySeq():t.toIndexedSeq():ut(t)}function K(t){return(null==t?st():c(t)?l(t)?t.entrySeq():t:ut(t)).toSetSeq()}k.prototype.toString=function(){return"[Iterator]"},k.KEYS=T,k.VALUES=A,k.ENTRIES=D,k.prototype.inspect=k.prototype.toSource=function(){return this.toString()},k.prototype[q]=function(){return this},t(W,u),W.of=function(){return W(arguments)},W.prototype.toSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq {","}")},W.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},W.prototype.__iterate=function(t,e){return ct(this,t,e,!0)},W.prototype.__iterator=function(t,e){return lt(this,t,e,!0)},t(H,W),H.prototype.toKeyedSeq=function(){return this},t(J,W),J.of=function(){return J(arguments)},J.prototype.toIndexedSeq=function(){return this},J.prototype.toString=function(){return this.__toString("Seq [","]")},J.prototype.__iterate=function(t,e){return ct(this,t,e,!1)},J.prototype.__iterator=function(t,e){return lt(this,t,e,!1)},t(K,W),K.of=function(){return K(arguments)},K.prototype.toSetSeq=function(){return this},W.isSeq=ot,W.Keyed=H,W.Set=K,W.Indexed=J;var Z,Q,$,tt="@@__IMMUTABLE_SEQ__@@";function et(t){this._array=t,this.size=t.length}function nt(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function it(t){this._iterable=t,this.size=t.length||t.size}function rt(t){this._iterator=t,this._iteratorCache=[]}function ot(t){return!(!t||!t[tt])}function st(){return Z||(Z=new et([]))}function at(t){var e=Array.isArray(t)?new et(t).fromEntrySeq():U(t)?new rt(t).fromEntrySeq():B(t)?new it(t).fromEntrySeq():"object"==typeof t?new nt(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function ut(t){var e=ht(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ht(t){return X(t)?new et(t):U(t)?new rt(t):B(t)?new it(t):void 0}function ct(t,e,n,i){var r=t._cache;if(r){for(var o=r.length-1,s=0;s<=o;s++){var a=r[n?o-s:s];if(!1===e(a[1],i?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,n)}function lt(t,e,n,i){var r=t._cache;if(r){var o=r.length-1,s=0;return new k(function(){var t=r[n?o-s:s];return s++>o?{value:void 0,done:!0}:z(e,i?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,n)}function ft(t,e){return e?function n(i,r,t,e){return Array.isArray(r)?i.call(e,t,J(r).map(function(t,e){return n(i,t,e,r)})):gt(r)?i.call(e,t,H(r).map(function(t,e){return n(i,t,e,r)})):r}(e,t,"",{"":t}):dt(t)}function dt(t){return Array.isArray(t)?J(t).map(dt).toList():gt(t)?H(t).map(dt).toMap():t}function gt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function pt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function vt(n,t){if(n===t)return!0;if(!c(t)||void 0!==n.size&&void 0!==t.size&&n.size!==t.size||void 0!==n.__hash&&void 0!==t.__hash&&n.__hash!==t.__hash||l(n)!==l(t)||f(n)!==f(t)||g(n)!==g(t))return!1;if(0===n.size&&0===t.size)return!0;var i=!d(n);if(g(n)){var r=n.entries();return t.every(function(t,e){var n=r.next().value;return n&&pt(n[1],t)&&(i||pt(n[0],e))})&&r.next().done}var o=!1;if(void 0===n.size)if(void 0===t.size)"function"==typeof n.cacheResult&&n.cacheResult();else{o=!0;var e=n;n=t,t=e}var s=!0,a=t.__iterate(function(t,e){if(i?!n.has(t):o?!pt(t,n.get(e,m)):!pt(n.get(e,m),t))return s=!1});return s&&n.size===a}function yt(t,e){if(!(this instanceof yt))return new yt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Q)return Q;Q=this}}function mt(t,e){if(!t)throw new Error(e)}function xt(t,e,n){if(!(this instanceof xt))return new xt(t,e,n);if(mt(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if($)return $;$=this}}function Et(){throw TypeError("Abstract")}function wt(){}function _t(){}function It(){}W.prototype[tt]=!0,t(et,J),et.prototype.get=function(t,e){return this.has(t)?this._array[N(this,t)]:e},et.prototype.__iterate=function(t,e){for(var n=this._array,i=n.length-1,r=0;r<=i;r++)if(!1===t(n[e?i-r:r],r,this))return r+1;return r},et.prototype.__iterator=function(t,e){var n=this._array,i=n.length-1,r=0;return new k(function(){return i<r?{value:void 0,done:!0}:z(t,r,n[e?i-r++:r++])})},t(nt,H),nt.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},nt.prototype.has=function(t){return this._object.hasOwnProperty(t)},nt.prototype.__iterate=function(t,e){for(var n=this._object,i=this._keys,r=i.length-1,o=0;o<=r;o++){var s=i[e?r-o:o];if(!1===t(n[s],s,this))return o+1}return o},nt.prototype.__iterator=function(e,n){var i=this._object,r=this._keys,o=r.length-1,s=0;return new k(function(){var t=r[n?o-s:s];return s++>o?{value:void 0,done:!0}:z(e,t,i[t])})},nt.prototype[s]=!0,t(it,J),it.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,i=V(n),r=0;if(U(i))for(var o;!(o=i.next()).done&&!1!==t(o.value,r++,this););return r},it.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,i=V(n);if(!U(i))return new k(j);var r=0;return new k(function(){var t=i.next();return t.done?t:z(e,r++,t.value)})},t(rt,J),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,i=this._iterator,r=this._iteratorCache,o=0;o<r.length;)if(!1===t(r[o],o++,this))return o;for(;!(n=i.next()).done;){var s=n.value;if(r[o]=s,!1===t(s,o++,this))break}return o},rt.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,i=this._iteratorCache,r=0;return new k(function(){if(r>=i.length){var t=n.next();if(t.done)return t;i[r]=t.value}return z(e,r,i[r++])})},t(yt,J),yt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},yt.prototype.get=function(t,e){return this.has(t)?this._value:e},yt.prototype.includes=function(t){return pt(this._value,t)},yt.prototype.slice=function(t,e){var n=this.size;return L(t,e,n)?this:new yt(this._value,O(e,n)-P(t,n))},yt.prototype.reverse=function(){return this},yt.prototype.indexOf=function(t){return pt(this._value,t)?0:-1},yt.prototype.lastIndexOf=function(t){return pt(this._value,t)?this.size:-1},yt.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},yt.prototype.__iterator=function(t,e){var n=this,i=0;return new k(function(){return i<n.size?z(t,i++,n._value):{value:void 0,done:!0}})},yt.prototype.equals=function(t){return t instanceof yt?pt(this._value,t._value):vt(t)},t(xt,J),xt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},xt.prototype.get=function(t,e){return this.has(t)?this._start+N(this,t)*this._step:e},xt.prototype.includes=function(t){var e=(t-this._start)/this._step;return 0<=e&&e<this.size&&e===Math.floor(e)},xt.prototype.slice=function(t,e){return L(t,e,this.size)?this:(t=P(t,this.size),(e=O(e,this.size))<=t?new xt(0,0):new xt(this.get(t,this._end),this.get(e,this._end),this._step))},xt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(0<=n&&n<this.size)return n}return-1},xt.prototype.lastIndexOf=function(t){return this.indexOf(t)},xt.prototype.__iterate=function(t,e){for(var n=this.size-1,i=this._step,r=e?this._start+n*i:this._start,o=0;o<=n;o++){if(!1===t(r,o,this))return o+1;r+=e?-i:i}return o},xt.prototype.__iterator=function(e,n){var i=this.size-1,r=this._step,o=n?this._start+i*r:this._start,s=0;return new k(function(){var t=o;return o+=n?-r:r,i<s?{value:void 0,done:!0}:z(e,s++,t)})},xt.prototype.equals=function(t){return t instanceof xt?this._start===t._start&&this._end===t._end&&this._step===t._step:vt(this,t)},t(Et,u),t(wt,Et),t(_t,Et),t(It,Et),Et.Keyed=wt,Et.Indexed=_t,Et.Set=It;var bt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),i=65535&(e|=0);return n*i+((t>>>16)*i+n*(e>>>16)<<16>>>0)|0};function Mt(t){return t>>>1&1073741824|3221225471&t}function St(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e,n,i=typeof t;if("number"===i){if(t!=t||t===1/0)return 0;var r=0|t;for(r!==t&&(r^=4294967295*t);4294967295<t;)r^=t/=4294967295;return Mt(r)}if("string"===i)return t.length>At?(void 0===(n=Gt[e=t])&&(n=Nt(e),Ft===Dt&&(Ft=0,Gt={}),Ft++,Gt[e]=n),n):Nt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===i)return function(t){var e;if(Ot&&void 0!==(e=Ct.get(t)))return e;if(void 0!==(e=t[Tt]))return e;if(!Pt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Tt]))return e;if(void 0!==(e=function(t){if(t&&0<t.nodeType)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Rt,1073741824&Rt&&(Rt=0),Ot)Ct.set(t,e);else{if(void 0!==Lt&&!1===Lt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Pt)Object.defineProperty(t,Tt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Tt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Tt]=e}}return e}(t);if("function"==typeof t.toString)return Nt(t.toString());throw new Error("Value type "+i+" cannot be hashed.")}function Nt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return Mt(e)}var Ct,Lt=Object.isExtensible,Pt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Ot="function"==typeof WeakMap;Ot&&(Ct=new WeakMap);var Rt=0,Tt="__immutablehash__";"function"==typeof Symbol&&(Tt=Symbol(Tt));var At=16,Dt=255,Ft=0,Gt={};function qt(t){mt(t!==1/0,"Cannot perform this action with an infinite size.")}function kt(e){return null==e?$t():zt(e)&&!g(e)?e:$t().withMutations(function(n){var t=a(e);qt(t.size),t.forEach(function(t,e){return n.set(e,t)})})}function zt(t){return!(!t||!t[Bt])}t(kt,wt),kt.of=function(){var n=i.call(arguments,0);return $t().withMutations(function(t){for(var e=0;e<n.length;e+=2){if(e+1>=n.length)throw new Error("Missing value for key: "+n[e]);t.set(n[e],n[e+1])}})},kt.prototype.toString=function(){return this.__toString("Map {","}")},kt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},kt.prototype.set=function(t,e){return te(this,t,e)},kt.prototype.setIn=function(t,e){return this.updateIn(t,m,function(){return e})},kt.prototype.remove=function(t){return te(this,t,m)},kt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return m})},kt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},kt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var i=function t(e,n,i,r){var o=e===m,s=n.next();if(s.done){var a=o?i:e,u=r(a);return u===a?e:u}mt(o||e&&e.set,"invalid keyPath");var h=s.value,c=o?m:e.get(h,m),l=t(c,n,i,r);return l===c?e:l===m?e.remove(h):(o?$t():e).set(h,l)}(this,rn(t),e,n);return i===m?void 0:i},kt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$t()},kt.prototype.merge=function(){return re(this,void 0,arguments)},kt.prototype.mergeWith=function(t){var e=i.call(arguments,1);return re(this,t,e)},kt.prototype.mergeIn=function(t){var e=i.call(arguments,1);return this.updateIn(t,$t(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},kt.prototype.mergeDeep=function(){return re(this,oe,arguments)},kt.prototype.mergeDeepWith=function(t){var e=i.call(arguments,1);return re(this,se(t),e)},kt.prototype.mergeDeepIn=function(t){var e=i.call(arguments,1);return this.updateIn(t,$t(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},kt.prototype.sort=function(t){return Pe(Xe(this,t))},kt.prototype.sortBy=function(t,e){return Pe(Xe(this,e,t))},kt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},kt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new b)},kt.prototype.asImmutable=function(){return this.__ensureOwner()},kt.prototype.wasAltered=function(){return this.__altered},kt.prototype.__iterator=function(t,e){return new Jt(this,t,e)},kt.prototype.__iterate=function(e,t){var n=this,i=0;return this._root&&this._root.iterate(function(t){return i++,e(t[1],t[0],n)},t),i},kt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Qt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},kt.isMap=zt;var jt,Bt="@@__IMMUTABLE_MAP__@@",Ut=kt.prototype;function Vt(t,e){this.ownerID=t,this.entries=e}function Yt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Xt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Wt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Ht(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Jt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Zt(t._root)}function Kt(t,e){return z(t,e[0],e[1])}function Zt(t,e){return{node:t,index:0,__prev:e}}function Qt(t,e,n,i){var r=Object.create(Ut);return r.size=t,r._root=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function $t(){return jt||(jt=Qt(0))}function te(t,e,n){var i,r;if(t._root){var o=E(v),s=E(y);if(i=ee(t._root,t.__ownerID,0,void 0,e,n,o,s),!s.value)return t;r=t.size+(o.value?n===m?-1:1:0)}else{if(n===m)return t;r=1,i=new Vt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=r,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?Qt(r,i):$t()}function ee(t,e,n,i,r,o,s,a){return t?t.update(e,n,i,r,o,s,a):o===m?t:(I(a),I(s),new Ht(e,i,[r,o]))}function ne(t){return t.constructor===Ht||t.constructor===Wt}function ie(t,e,n,i,r){if(t.keyHash===i)return new Wt(e,i,[t.entry,r]);var o,s=(0===n?t.keyHash:t.keyHash>>>n)&x,a=(0===n?i:i>>>n)&x,u=s===a?[ie(t,e,n+w,i,r)]:(o=new Ht(e,i,r),s<a?[t,o]:[o,t]);return new Yt(e,1<<s|1<<a,u)}function re(t,e,n){for(var i=[],r=0;r<n.length;r++){var o=n[r],s=a(o);c(o)||(s=s.map(function(t){return ft(t)})),i.push(s)}return ae(t,e,i)}function oe(t,e,n){return t&&t.mergeDeep&&c(e)?t.mergeDeep(e):pt(t,e)?t:e}function se(r){return function(t,e,n){if(t&&t.mergeDeepWith&&c(e))return t.mergeDeepWith(r,e);var i=r(t,e,n);return pt(t,i)?t:i}}function ae(t,r,n){return 0===(n=n.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(i){for(var t=r?function(e,n){i.update(n,m,function(t){return t===m?e:r(t,e,n)})}:function(t,e){i.set(e,t)},e=0;e<n.length;e++)n[e].forEach(t)}):t.constructor(n[0])}function ue(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function he(t,e,n,i){var r=i?t:M(t);return r[e]=n,r}Ut[Bt]=!0,Ut[p]=Ut.remove,Ut.removeIn=Ut.deleteIn,Vt.prototype.get=function(t,e,n,i){for(var r=this.entries,o=0,s=r.length;o<s;o++)if(pt(n,r[o][0]))return r[o][1];return i},Vt.prototype.update=function(t,e,n,i,r,o,s){for(var a=r===m,u=this.entries,h=0,c=u.length;h<c&&!pt(i,u[h][0]);h++);var l=h<c;if(l?u[h][1]===r:a)return this;if(I(s),(a||!l)&&I(o),!a||1!==u.length){if(!l&&!a&&u.length>=ce)return function(t,e,n,i){t||(t=new b);for(var r=new Ht(t,St(n),[n,i]),o=0;o<e.length;o++){var s=e[o];r=r.update(t,0,void 0,s[0],s[1])}return r}(t,u,i,r);var f=t&&t===this.ownerID,d=f?u:M(u);return l?a?h===c-1?d.pop():d[h]=d.pop():d[h]=[i,r]:d.push([i,r]),f?(this.entries=d,this):new Vt(t,d)}},Yt.prototype.get=function(t,e,n,i){void 0===e&&(e=St(n));var r=1<<((0===t?e:e>>>t)&x),o=this.bitmap;return 0==(o&r)?i:this.nodes[ue(o&r-1)].get(t+w,e,n,i)},Yt.prototype.update=function(t,e,n,i,r,o,s){void 0===n&&(n=St(i));var a=(0===e?n:n>>>e)&x,u=1<<a,h=this.bitmap,c=0!=(h&u);if(!c&&r===m)return this;var l=ue(h&u-1),f=this.nodes,d=c?f[l]:void 0,g=ee(d,t,e+w,n,i,r,o,s);if(g===d)return this;if(!c&&g&&f.length>=le)return function(t,e,n,i,r){for(var o=0,s=new Array(_),a=0;0!==n;a++,n>>>=1)s[a]=1&n?e[o++]:void 0;return s[i]=r,new Xt(t,o+1,s)}(t,f,h,a,g);if(c&&!g&&2===f.length&&ne(f[1^l]))return f[1^l];if(c&&g&&1===f.length&&ne(g))return g;var p=t&&t===this.ownerID,v=c?g?h:h^u:h|u,y=c?g?he(f,l,g,p):function(t,e,n){var i=t.length-1;if(n&&e===i)return t.pop(),t;for(var r=new Array(i),o=0,s=0;s<i;s++)s===e&&(o=1),r[s]=t[s+o];return r}(f,l,p):function(t,e,n,i){var r=t.length+1;if(i&&e+1===r)return t[e]=n,t;for(var o=new Array(r),s=0,a=0;a<r;a++)a===e?(o[a]=n,s=-1):o[a]=t[a+s];return o}(f,l,g,p);return p?(this.bitmap=v,this.nodes=y,this):new Yt(t,v,y)},Xt.prototype.get=function(t,e,n,i){void 0===e&&(e=St(n));var r=(0===t?e:e>>>t)&x,o=this.nodes[r];return o?o.get(t+w,e,n,i):i},Xt.prototype.update=function(t,e,n,i,r,o,s){void 0===n&&(n=St(i));var a=(0===e?n:n>>>e)&x,u=r===m,h=this.nodes,c=h[a];if(u&&!c)return this;var l=ee(c,t,e+w,n,i,r,o,s);if(l===c)return this;var f=this.count;if(c){if(!l&&--f<fe)return function(t,e,n,i){for(var r=0,o=0,s=new Array(n),a=0,u=1,h=e.length;a<h;a++,u<<=1){var c=e[a];void 0!==c&&a!==i&&(r|=u,s[o++]=c)}return new Yt(t,r,s)}(t,h,f,a)}else f++;var d=t&&t===this.ownerID,g=he(h,a,l,d);return d?(this.count=f,this.nodes=g,this):new Xt(t,f,g)},Wt.prototype.get=function(t,e,n,i){for(var r=this.entries,o=0,s=r.length;o<s;o++)if(pt(n,r[o][0]))return r[o][1];return i},Wt.prototype.update=function(t,e,n,i,r,o,s){void 0===n&&(n=St(i));var a=r===m;if(n!==this.keyHash)return a?this:(I(s),I(o),ie(this,t,e,n,[i,r]));for(var u=this.entries,h=0,c=u.length;h<c&&!pt(i,u[h][0]);h++);var l=h<c;if(l?u[h][1]===r:a)return this;if(I(s),(a||!l)&&I(o),a&&2===c)return new Ht(t,this.keyHash,u[1^h]);var f=t&&t===this.ownerID,d=f?u:M(u);return l?a?h===c-1?d.pop():d[h]=d.pop():d[h]=[i,r]:d.push([i,r]),f?(this.entries=d,this):new Wt(t,this.keyHash,d)},Ht.prototype.get=function(t,e,n,i){return pt(n,this.entry[0])?this.entry[1]:i},Ht.prototype.update=function(t,e,n,i,r,o,s){var a=r===m,u=pt(i,this.entry[0]);return(u?r===this.entry[1]:a)?this:(I(s),a?void I(o):u?t&&t===this.ownerID?(this.entry[1]=r,this):new Ht(t,this.keyHash,[i,r]):(I(o),ie(this,t,e,St(i),[i,r])))},Vt.prototype.iterate=Wt.prototype.iterate=function(t,e){for(var n=this.entries,i=0,r=n.length-1;i<=r;i++)if(!1===t(n[e?r-i:i]))return!1},Yt.prototype.iterate=Xt.prototype.iterate=function(t,e){for(var n=this.nodes,i=0,r=n.length-1;i<=r;i++){var o=n[e?r-i:i];if(o&&!1===o.iterate(t,e))return!1}},Ht.prototype.iterate=function(t,e){return t(this.entry)},t(Jt,k),Jt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,i=e.node,r=e.index++;if(i.entry){if(0===r)return Kt(t,i.entry)}else if(i.entries){if(n=i.entries.length-1,r<=n)return Kt(t,i.entries[this._reverse?n-r:r])}else if(n=i.nodes.length-1,r<=n){var o=i.nodes[this._reverse?n-r:r];if(o){if(o.entry)return Kt(t,o.entry);e=this._stack=Zt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ce=_/4,le=_/2,fe=_/4;function de(t){var e=Ie();if(null==t)return e;if(ge(t))return t;var i=h(t),r=i.size;return 0===r?e:(qt(r),0<r&&r<_?_e(0,r,w,null,new ye(i.toArray())):e.withMutations(function(n){n.setSize(r),i.forEach(function(t,e){return n.set(e,t)})}))}function ge(t){return!(!t||!t[pe])}t(de,_t),de.of=function(){return this(arguments)},de.prototype.toString=function(){return this.__toString("List [","]")},de.prototype.get=function(t,e){if(0<=(t=N(this,t))&&t<this.size){var n=Se(this,t+=this._origin);return n&&n.array[t&x]}return e},de.prototype.set=function(t,e){return function(t,e,n){if((e=N(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Ne(t,e).set(0,n):Ne(t,0,e+1).set(e,n)});e+=t._origin;var i=t._tail,r=t._root,o=E(y);return e>=Le(t._capacity)?i=be(i,t.__ownerID,0,e,n,o):r=be(r,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=r,t._tail=i,t.__hash=void 0,t.__altered=!0,t):_e(t._origin,t._capacity,t._level,r,i):t}(this,t,e)},de.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},de.prototype.insert=function(t,e){return this.splice(t,0,e)},de.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=w,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ie()},de.prototype.push=function(){var n=arguments,i=this.size;return this.withMutations(function(t){Ne(t,0,i+n.length);for(var e=0;e<n.length;e++)t.set(i+e,n[e])})},de.prototype.pop=function(){return Ne(this,0,-1)},de.prototype.unshift=function(){var n=arguments;return this.withMutations(function(t){Ne(t,-n.length);for(var e=0;e<n.length;e++)t.set(e,n[e])})},de.prototype.shift=function(){return Ne(this,1)},de.prototype.merge=function(){return Ce(this,void 0,arguments)},de.prototype.mergeWith=function(t){var e=i.call(arguments,1);return Ce(this,t,e)},de.prototype.mergeDeep=function(){return Ce(this,oe,arguments)},de.prototype.mergeDeepWith=function(t){var e=i.call(arguments,1);return Ce(this,se(t),e)},de.prototype.setSize=function(t){return Ne(this,0,t)},de.prototype.slice=function(t,e){var n=this.size;return L(t,e,n)?this:Ne(this,P(t,n),O(e,n))},de.prototype.__iterator=function(e,t){var n=0,i=we(this,t);return new k(function(){var t=i();return t===Ee?{value:void 0,done:!0}:z(e,n++,t)})},de.prototype.__iterate=function(t,e){for(var n,i=0,r=we(this,e);(n=r())!==Ee&&!1!==t(n,i++,this););return i},de.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?_e(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},de.isList=ge;var pe="@@__IMMUTABLE_LIST__@@",ve=de.prototype;function ye(t,e){this.array=t,this.ownerID=e}ve[pe]=!0,ve[p]=ve.remove,ve.setIn=Ut.setIn,ve.deleteIn=ve.removeIn=Ut.removeIn,ve.update=Ut.update,ve.updateIn=Ut.updateIn,ve.mergeIn=Ut.mergeIn,ve.mergeDeepIn=Ut.mergeDeepIn,ve.withMutations=Ut.withMutations,ve.asMutable=Ut.asMutable,ve.asImmutable=Ut.asImmutable,ve.wasAltered=Ut.wasAltered,ye.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var i=n>>>e&x;if(i>=this.array.length)return new ye([],t);var r,o=0===i;if(0<e){var s=this.array[i];if((r=s&&s.removeBefore(t,e-w,n))===s&&o)return this}if(o&&!r)return this;var a=Me(this,t);if(!o)for(var u=0;u<i;u++)a.array[u]=void 0;return r&&(a.array[i]=r),a},ye.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var i,r=n-1>>>e&x;if(r>=this.array.length)return this;if(0<e){var o=this.array[r];if((i=o&&o.removeAfter(t,e-w,n))===o&&r===this.array.length-1)return this}var s=Me(this,t);return s.array.splice(r+1),i&&(s.array[r]=i),s};var me,xe,Ee={};function we(t,p){var v=t._origin,y=t._capacity,m=Le(y),x=t._tail;return E(t._root,t._level,0);function E(t,e,n){return 0===e?(c=t,f=(l=n)===m?x&&x.array:c&&c.array,d=v<l?0:v-l,_<(g=y-l)&&(g=_),function(){if(d===g)return Ee;var t=p?--g:d++;return f&&f[t]}):(r=e,o=n,a=(i=t)&&i.array,u=v<o?0:v-o>>r,_<(h=1+(y-o>>r))&&(h=_),function(){for(;;){if(s){var t=s();if(t!==Ee)return t;s=null}if(u===h)return Ee;var e=p?--h:u++;s=E(a&&a[e],r-w,o+(e<<r))}});var i,r,o,s,a,u,h,c,l,f,d,g}}function _e(t,e,n,i,r,o,s){var a=Object.create(ve);return a.size=e-t,a._origin=t,a._capacity=e,a._level=n,a._root=i,a._tail=r,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function Ie(){return me||(me=_e(0,0,w))}function be(t,e,n,i,r,o){var s,a=i>>>n&x,u=t&&a<t.array.length;if(!u&&void 0===r)return t;if(0<n){var h=t&&t.array[a],c=be(h,e,n-w,i,r,o);return c===h?t:((s=Me(t,e)).array[a]=c,s)}return u&&t.array[a]===r?t:(I(o),s=Me(t,e),void 0===r&&a===s.array.length-1?s.array.pop():s.array[a]=r,s)}function Me(t,e){return e&&t&&e===t.ownerID?t:new ye(t?t.array.slice():[],e)}function Se(t,e){if(e>=Le(t._capacity))return t._tail;if(e<1<<t._level+w){for(var n=t._root,i=t._level;n&&0<i;)n=n.array[e>>>i&x],i-=w;return n}}function Ne(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var i=t.__ownerID||new b,r=t._origin,o=t._capacity,s=r+e,a=void 0===n?o:n<0?o+n:r+n;if(s===r&&a===o)return t;if(a<=s)return t.clear();for(var u=t._level,h=t._root,c=0;s+c<0;)h=new ye(h&&h.array.length?[void 0,h]:[],i),c+=1<<(u+=w);c&&(s+=c,r+=c,a+=c,o+=c);for(var l=Le(o),f=Le(a);1<<u+w<=f;)h=new ye(h&&h.array.length?[h]:[],i),u+=w;var d=t._tail,g=f<l?Se(t,a-1):l<f?new ye([],i):d;if(d&&l<f&&s<o&&d.array.length){for(var p=h=Me(h,i),v=u;w<v;v-=w){var y=l>>>v&x;p=p.array[y]=Me(p.array[y],i)}p.array[l>>>w&x]=d}if(a<o&&(g=g&&g.removeAfter(i,0,a)),f<=s)s-=f,a-=f,u=w,h=null,g=g&&g.removeBefore(i,0,s);else if(r<s||f<l){for(c=0;h;){var m=s>>>u&x;if(m!==f>>>u&x)break;m&&(c+=(1<<u)*m),u-=w,h=h.array[m]}h&&r<s&&(h=h.removeBefore(i,u,s-c)),h&&f<l&&(h=h.removeAfter(i,u,f-c)),c&&(s-=c,a-=c)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=h,t._tail=g,t.__hash=void 0,t.__altered=!0,t):_e(s,a,u,h,g)}function Ce(t,e,n){for(var i=[],r=0,o=0;o<n.length;o++){var s=n[o],a=h(s);a.size>r&&(r=a.size),c(s)||(a=a.map(function(t){return ft(t)})),i.push(a)}return r>t.size&&(t=t.setSize(r)),ae(t,e,i)}function Le(t){return t<_?0:t-1>>>w<<w}function Pe(e){return null==e?Te():Oe(e)?e:Te().withMutations(function(n){var t=a(e);qt(t.size),t.forEach(function(t,e){return n.set(e,t)})})}function Oe(t){return zt(t)&&g(t)}function Re(t,e,n,i){var r=Object.create(Pe.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=n,r.__hash=i,r}function Te(){return xe||(xe=Re($t(),Ie()))}function Ae(t,e,n){var i,r,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(n===m){if(!u)return t;s.size>=_&&s.size>=2*o.size?(r=s.filter(function(t,e){return void 0!==t&&a!==e}),i=r.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(i.__ownerID=r.__ownerID=t.__ownerID)):(i=o.remove(e),r=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(n===s.get(a)[1])return t;i=o,r=s.set(a,[e,n])}else i=o.set(e,s.size),r=s.set(s.size,[e,n]);return t.__ownerID?(t.size=i.size,t._map=i,t._list=r,t.__hash=void 0,t):Re(i,r)}function De(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function Fe(t){this._iter=t,this.size=t.size}function Ge(t){this._iter=t,this.size=t.size}function qe(t){this._iter=t,this.size=t.size}function ke(r){var t=tn(r);return t._iter=r,t.size=r.size,t.flip=function(){return r},t.reverse=function(){var t=r.reverse.apply(this);return t.flip=function(){return r.reverse()},t},t.has=function(t){return r.includes(t)},t.includes=function(t){return r.has(t)},t.cacheResult=en,t.__iterateUncached=function(n,t){var i=this;return r.__iterate(function(t,e){return!1!==n(e,t,i)},t)},t.__iteratorUncached=function(t,e){if(t===D){var n=r.__iterator(t,e);return new k(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return r.__iterator(t===A?T:A,e)},t}function ze(o,s,a){var t=tn(o);return t.size=o.size,t.has=function(t){return o.has(t)},t.get=function(t,e){var n=o.get(t,m);return n===m?e:s.call(a,n,t,o)},t.__iterateUncached=function(i,t){var r=this;return o.__iterate(function(t,e,n){return!1!==i(s.call(a,t,e,n),e,r)},t)},t.__iteratorUncached=function(i,t){var r=o.__iterator(D,t);return new k(function(){var t=r.next();if(t.done)return t;var e=t.value,n=e[0];return z(i,n,s.call(a,e[1],n,o),t)})},t}function je(r,n){var t=tn(r);return t._iter=r,t.size=r.size,t.reverse=function(){return r},r.flip&&(t.flip=function(){var t=ke(r);return t.reverse=function(){return r.flip()},t}),t.get=function(t,e){return r.get(n?t:-1-t,e)},t.has=function(t){return r.has(n?t:-1-t)},t.includes=function(t){return r.includes(t)},t.cacheResult=en,t.__iterate=function(n,t){var i=this;return r.__iterate(function(t,e){return n(t,e,i)},!t)},t.__iterator=function(t,e){return r.__iterator(t,!e)},t}function Be(a,u,h,c){var t=tn(a);return c&&(t.has=function(t){var e=a.get(t,m);return e!==m&&!!u.call(h,e,t,a)},t.get=function(t,e){var n=a.get(t,m);return n!==m&&u.call(h,n,t,a)?n:e}),t.__iterateUncached=function(i,t){var r=this,o=0;return a.__iterate(function(t,e,n){if(u.call(h,t,e,n))return o++,i(t,c?e:o-1,r)},t),o},t.__iteratorUncached=function(r,t){var o=a.__iterator(D,t),s=0;return new k(function(){for(;;){var t=o.next();if(t.done)return t;var e=t.value,n=e[0],i=e[1];if(u.call(h,i,n,a))return z(r,c?n:s++,i,t)}})},t}function Ue(a,t,e,u){var n=a.size;if(void 0!==t&&(t|=0),void 0!==e&&(e===1/0?e=n:e|=0),L(t,e,n))return a;var h=P(t,n),i=O(e,n);if(h!=h||i!=i)return Ue(a.toSeq().cacheResult(),t,e,u);var c,r=i-h;r==r&&(c=r<0?0:r);var o=tn(a);return o.size=0===c?c:a.size&&c||void 0,!u&&ot(a)&&0<=c&&(o.get=function(t,e){return 0<=(t=N(this,t))&&t<c?a.get(t+h,e):e}),o.__iterateUncached=function(n,t){var i=this;if(0===c)return 0;if(t)return this.cacheResult().__iterate(n,t);var r=0,o=!0,s=0;return a.__iterate(function(t,e){if(!o||!(o=r++<h))return s++,!1!==n(t,u?e:s-1,i)&&s!==c}),s},o.__iteratorUncached=function(e,t){if(0!==c&&t)return this.cacheResult().__iterator(e,t);var n=0!==c&&a.__iterator(e,t),i=0,r=0;return new k(function(){for(;i++<h;)n.next();if(++r>c)return{value:void 0,done:!0};var t=n.next();return u||e===A?t:z(e,r-1,e===T?void 0:t.value[1],t)})},o}function Ve(e,h,c,l){var t=tn(e);return t.__iterateUncached=function(i,t){var r=this;if(t)return this.cacheResult().__iterate(i,t);var o=!0,s=0;return e.__iterate(function(t,e,n){if(!o||!(o=h.call(c,t,e,n)))return s++,i(t,l?e:s-1,r)}),s},t.__iteratorUncached=function(r,t){var o=this;if(t)return this.cacheResult().__iterator(r,t);var s=e.__iterator(D,t),a=!0,u=0;return new k(function(){var t,e,n;do{if((t=s.next()).done)return l||r===A?t:z(r,u++,r===T?void 0:t.value[1],t);var i=t.value;e=i[0],n=i[1],a&&(a=h.call(c,n,e,o))}while(a);return r===D?t:z(r,e,n,t)})},t}function Ye(t,u,h){var e=tn(t);return e.__iterateUncached=function(o,e){var s=0,a=!1;return function n(t,i){var r=this;t.__iterate(function(t,e){return(!u||i<u)&&c(t)?n(t,i+1):!1===o(t,h?e:s++,r)&&(a=!0),!a},e)}(t,0),s},e.__iteratorUncached=function(n,i){var r=t.__iterator(n,i),o=[],s=0;return new k(function(){for(;r;){var t=r.next();if(!1===t.done){var e=t.value;if(n===D&&(e=e[1]),u&&!(o.length<u)||!c(e))return h?t:z(n,s++,e,t);o.push(r),r=e.__iterator(n,i)}else r=o.pop()}return{value:void 0,done:!0}})},e}function Xe(n,i,r){i||(i=nn);var t=l(n),o=0,s=n.toSeq().map(function(t,e){return[e,t,o++,r?r(t,e,n):t]}).toArray();return s.sort(function(t,e){return i(t[3],e[3])||t[2]-e[2]}).forEach(t?function(t,e){s[e].length=2}:function(t,e){s[e]=t[1]}),t?H(s):f(n)?J(s):K(s)}function We(n,i,r){if(i||(i=nn),r){var t=n.toSeq().map(function(t,e){return[t,r(t,e,n)]}).reduce(function(t,e){return He(i,t[1],e[1])?e:t});return t&&t[0]}return n.reduce(function(t,e){return He(i,t,e)?e:t})}function He(t,e,n){var i=t(n,e);return 0===i&&n!==e&&(null==n||n!=n)||0<i}function Je(t,s,a){var e=tn(t);return e.size=new et(a).map(function(t){return t.size}).min(),e.__iterate=function(t,e){for(var n,i=this.__iterator(A,e),r=0;!(n=i.next()).done&&!1!==t(n.value,r++,this););return r},e.__iteratorUncached=function(e,n){var i=a.map(function(t){return t=u(t),V(n?t.reverse():t)}),r=0,o=!1;return new k(function(){var t;return o||(t=i.map(function(t){return t.next()}),o=t.some(function(t){return t.done})),o?{value:void 0,done:!0}:z(e,r++,s.apply(null,t.map(function(t){return t.value})))})},e}function Ke(t,e){return ot(t)?e:t.constructor(e)}function Ze(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Qe(t){return qt(t.size),S(t)}function $e(t){return l(t)?a:f(t)?h:r}function tn(t){return Object.create((l(t)?H:f(t)?J:K).prototype)}function en(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):W.prototype.cacheResult.call(this)}function nn(t,e){return e<t?1:t<e?-1:0}function rn(t){var e=V(t);if(!e){if(!X(t))throw new TypeError("Expected iterable or array-like: "+t);e=V(u(t))}return e}function on(n,i){var r,o=function(t){if(t instanceof o)return t;if(!(this instanceof o))return new o(t);if(!r){r=!0;var e=Object.keys(n);!function(t,e){try{e.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){mt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,t))}catch(t){}}(s,e),s.size=e.length,s._name=i,s._keys=e,s._defaultValues=n}this._map=kt(t)},s=o.prototype=Object.create(sn);return s.constructor=o}t(Pe,kt),Pe.of=function(){return this(arguments)},Pe.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Pe.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Pe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Te()},Pe.prototype.set=function(t,e){return Ae(this,t,e)},Pe.prototype.remove=function(t){return Ae(this,t,m)},Pe.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Pe.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Pe.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Pe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Re(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Pe.isOrderedMap=Oe,Pe.prototype[s]=!0,Pe.prototype[p]=Pe.prototype.remove,t(De,H),De.prototype.get=function(t,e){return this._iter.get(t,e)},De.prototype.has=function(t){return this._iter.has(t)},De.prototype.valueSeq=function(){return this._iter.valueSeq()},De.prototype.reverse=function(){var t=this,e=je(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},De.prototype.map=function(t,e){var n=this,i=ze(this,t,e);return this._useKeys||(i.valueSeq=function(){return n._iter.toSeq().map(t,e)}),i},De.prototype.__iterate=function(n,e){var i,r=this;return this._iter.__iterate(this._useKeys?function(t,e){return n(t,e,r)}:(i=e?Qe(this):0,function(t){return n(t,e?--i:i++,r)}),e)},De.prototype.__iterator=function(e,n){if(this._useKeys)return this._iter.__iterator(e,n);var i=this._iter.__iterator(A,n),r=n?Qe(this):0;return new k(function(){var t=i.next();return t.done?t:z(e,n?--r:r++,t.value,t)})},De.prototype[s]=!0,t(Fe,J),Fe.prototype.includes=function(t){return this._iter.includes(t)},Fe.prototype.__iterate=function(e,t){var n=this,i=0;return this._iter.__iterate(function(t){return e(t,i++,n)},t)},Fe.prototype.__iterator=function(e,t){var n=this._iter.__iterator(A,t),i=0;return new k(function(){var t=n.next();return t.done?t:z(e,i++,t.value,t)})},t(Ge,K),Ge.prototype.has=function(t){return this._iter.includes(t)},Ge.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},Ge.prototype.__iterator=function(e,t){var n=this._iter.__iterator(A,t);return new k(function(){var t=n.next();return t.done?t:z(e,t.value,t.value,t)})},t(qe,H),qe.prototype.entrySeq=function(){return this._iter.toSeq()},qe.prototype.__iterate=function(n,t){var i=this;return this._iter.__iterate(function(t){if(t){Ze(t);var e=c(t);return n(e?t.get(1):t[1],e?t.get(0):t[0],i)}},t)},qe.prototype.__iterator=function(i,t){var r=this._iter.__iterator(A,t);return new k(function(){for(;;){var t=r.next();if(t.done)return t;var e=t.value;if(e){Ze(e);var n=c(e);return z(i,n?e.get(0):e[0],n?e.get(1):e[1],t)}}})},Fe.prototype.cacheResult=De.prototype.cacheResult=Ge.prototype.cacheResult=qe.prototype.cacheResult=en,t(on,wt),on.prototype.toString=function(){return this.__toString(un(this)+" {","}")},on.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},on.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},on.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=an(this,$t()))},on.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+un(this));if(this._map&&!this._map.has(t)){var n=this._defaultValues[t];if(e===n)return this}var i=this._map&&this._map.set(t,e);return this.__ownerID||i===this._map?this:an(this,i)},on.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:an(this,e)},on.prototype.wasAltered=function(){return this._map.wasAltered()},on.prototype.__iterator=function(t,e){var n=this;return a(this._defaultValues).map(function(t,e){return n.get(e)}).__iterator(t,e)},on.prototype.__iterate=function(t,e){var n=this;return a(this._defaultValues).map(function(t,e){return n.get(e)}).__iterate(t,e)},on.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?an(this,e,t):(this.__ownerID=t,this._map=e,this)};var sn=on.prototype;function an(t,e,n){var i=Object.create(Object.getPrototypeOf(t));return i._map=e,i.__ownerID=n,i}function un(t){return t._name||t.constructor.name||"Record"}function hn(n){return null==n?vn():cn(n)&&!g(n)?n:vn().withMutations(function(e){var t=r(n);qt(t.size),t.forEach(function(t){return e.add(t)})})}function cn(t){return!(!t||!t[fn])}sn[p]=sn.remove,sn.deleteIn=sn.removeIn=Ut.removeIn,sn.merge=Ut.merge,sn.mergeWith=Ut.mergeWith,sn.mergeIn=Ut.mergeIn,sn.mergeDeep=Ut.mergeDeep,sn.mergeDeepWith=Ut.mergeDeepWith,sn.mergeDeepIn=Ut.mergeDeepIn,sn.setIn=Ut.setIn,sn.update=Ut.update,sn.updateIn=Ut.updateIn,sn.withMutations=Ut.withMutations,sn.asMutable=Ut.asMutable,sn.asImmutable=Ut.asImmutable,t(hn,It),hn.of=function(){return this(arguments)},hn.fromKeys=function(t){return this(a(t).keySeq())},hn.prototype.toString=function(){return this.__toString("Set {","}")},hn.prototype.has=function(t){return this._map.has(t)},hn.prototype.add=function(t){return gn(this,this._map.set(t,!0))},hn.prototype.remove=function(t){return gn(this,this._map.remove(t))},hn.prototype.clear=function(){return gn(this,this._map.clear())},hn.prototype.union=function(){var n=i.call(arguments,0);return 0===(n=n.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==n.length?this.withMutations(function(e){for(var t=0;t<n.length;t++)r(n[t]).forEach(function(t){return e.add(t)})}):this.constructor(n[0])},hn.prototype.intersect=function(){var n=i.call(arguments,0);if(0===n.length)return this;n=n.map(function(t){return r(t)});var e=this;return this.withMutations(function(t){e.forEach(function(e){n.every(function(t){return t.includes(e)})||t.remove(e)})})},hn.prototype.subtract=function(){var n=i.call(arguments,0);if(0===n.length)return this;n=n.map(function(t){return r(t)});var e=this;return this.withMutations(function(t){e.forEach(function(e){n.some(function(t){return t.includes(e)})&&t.remove(e)})})},hn.prototype.merge=function(){return this.union.apply(this,arguments)},hn.prototype.mergeWith=function(t){var e=i.call(arguments,1);return this.union.apply(this,e)},hn.prototype.sort=function(t){return yn(Xe(this,t))},hn.prototype.sortBy=function(t,e){return yn(Xe(this,e,t))},hn.prototype.wasAltered=function(){return this._map.wasAltered()},hn.prototype.__iterate=function(n,t){var i=this;return this._map.__iterate(function(t,e){return n(e,e,i)},t)},hn.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},hn.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},hn.isSet=cn;var ln,fn="@@__IMMUTABLE_SET__@@",dn=hn.prototype;function gn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function pn(t,e){var n=Object.create(dn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function vn(){return ln||(ln=pn($t()))}function yn(n){return null==n?_n():mn(n)?n:_n().withMutations(function(e){var t=r(n);qt(t.size),t.forEach(function(t){return e.add(t)})})}function mn(t){return cn(t)&&g(t)}dn[fn]=!0,dn[p]=dn.remove,dn.mergeDeep=dn.merge,dn.mergeDeepWith=dn.mergeWith,dn.withMutations=Ut.withMutations,dn.asMutable=Ut.asMutable,dn.asImmutable=Ut.asImmutable,dn.__empty=vn,dn.__make=pn,t(yn,hn),yn.of=function(){return this(arguments)},yn.fromKeys=function(t){return this(a(t).keySeq())},yn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},yn.isOrderedSet=mn;var xn,En=yn.prototype;function wn(t,e){var n=Object.create(En);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function _n(){return xn||(xn=wn(Te()))}function In(t){return null==t?Ln():bn(t)?t:Ln().unshiftAll(t)}function bn(t){return!(!t||!t[Sn])}En[s]=!0,En.__empty=_n,En.__make=wn,t(In,_t),In.of=function(){return this(arguments)},In.prototype.toString=function(){return this.__toString("Stack [","]")},In.prototype.get=function(t,e){var n=this._head;for(t=N(this,t);n&&t--;)n=n.next;return n?n.value:e},In.prototype.peek=function(){return this._head&&this._head.value},In.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;0<=n;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Cn(t,e)},In.prototype.pushAll=function(t){if(0===(t=h(t)).size)return this;qt(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Cn(e,n)},In.prototype.pop=function(){return this.slice(1)},In.prototype.unshift=function(){return this.push.apply(this,arguments)},In.prototype.unshiftAll=function(t){return this.pushAll(t)},In.prototype.shift=function(){return this.pop.apply(this,arguments)},In.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ln()},In.prototype.slice=function(t,e){if(L(t,e,this.size))return this;var n=P(t,this.size),i=O(e,this.size);if(i!==this.size)return _t.prototype.slice.call(this,t,e);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):Cn(r,o)},In.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Cn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},In.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,i=this._head;i&&!1!==t(i.value,n++,this);)i=i.next;return n},In.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,i=this._head;return new k(function(){if(i){var t=i.value;return i=i.next,z(e,n++,t)}return{value:void 0,done:!0}})},In.isStack=bn;var Mn,Sn="@@__IMMUTABLE_STACK__@@",Nn=In.prototype;function Cn(t,e,n,i){var r=Object.create(Nn);return r.size=t,r._head=e,r.__ownerID=n,r.__hash=i,r.__altered=!1,r}function Ln(){return Mn||(Mn=Cn(0))}function Pn(e,n){var t=function(t){e.prototype[t]=n[t]};return Object.keys(n).forEach(t),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(t),e}Nn[Sn]=!0,Nn.withMutations=Ut.withMutations,Nn.asMutable=Ut.asMutable,Nn.asImmutable=Ut.asImmutable,Nn.wasAltered=Ut.wasAltered,u.Iterator=k,Pn(u,{toArray:function(){qt(this.size);var n=new Array(this.size||0);return this.valueSeq().__iterate(function(t,e){n[e]=t}),n},toIndexedSeq:function(){return new Fe(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new De(this,!0)},toMap:function(){return kt(this.toKeyedSeq())},toObject:function(){qt(this.size);var n={};return this.__iterate(function(t,e){n[e]=t}),n},toOrderedMap:function(){return Pe(this.toKeyedSeq())},toOrderedSet:function(){return yn(l(this)?this.valueSeq():this)},toSet:function(){return hn(l(this)?this.valueSeq():this)},toSetSeq:function(){return new Ge(this)},toSeq:function(){return f(this)?this.toIndexedSeq():l(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return In(l(this)?this.valueSeq():this)},toList:function(){return de(l(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var t=i.call(arguments,0);return Ke(this,function(t,e){var n=l(t),i=[t].concat(e).map(function(t){return c(t)?n&&(t=a(t)):t=n?at(t):ut(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var r=i[0];if(r===t||n&&l(r)||f(t)&&f(r))return r}var o=new et(i);return n?o=o.toKeyedSeq():f(t)||(o=o.toSetSeq()),(o=o.flatten(!0)).size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}(this,t))},includes:function(e){return this.some(function(t){return pt(t,e)})},entries:function(){return this.__iterator(D)},every:function(i,r){qt(this.size);var o=!0;return this.__iterate(function(t,e,n){if(!i.call(r,t,e,n))return o=!1}),o},filter:function(t,e){return Ke(this,Be(this,t,e,!0))},find:function(t,e,n){var i=this.findEntry(t,e);return i?i[1]:n},forEach:function(t,e){return qt(this.size),this.__iterate(e?t.bind(e):t)},join:function(e){qt(this.size),e=void 0!==e?""+e:",";var n="",i=!0;return this.__iterate(function(t){i?i=!1:n+=e,n+=null!=t?t.toString():""}),n},keys:function(){return this.__iterator(T)},map:function(t,e){return Ke(this,ze(this,t,e))},reduce:function(i,t,r){var o,s;return qt(this.size),arguments.length<2?s=!0:o=t,this.__iterate(function(t,e,n){s?(s=!1,o=t):o=i.call(r,o,t,e,n)}),o},reduceRight:function(t,e,n){var i=this.toKeyedSeq().reverse();return i.reduce.apply(i,arguments)},reverse:function(){return Ke(this,je(this,!0))},slice:function(t,e){return Ke(this,Ue(this,t,e,!0))},some:function(t,e){return!this.every(Dn(t),e)},sort:function(t){return Ke(this,Xe(this,t))},values:function(){return this.__iterator(A)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return S(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return n=this,i=t,r=e,o=kt().asMutable(),n.__iterate(function(t,e){o.update(i.call(r,t,e,n),0,function(t){return t+1})}),o.asImmutable();var n,i,r,o},equals:function(t){return vt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new et(t._cache);var e=t.toSeq().map(An).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Dn(t),e)},findEntry:function(i,r,t){var o=t;return this.__iterate(function(t,e,n){if(i.call(r,t,e,n))return o=[e,t],!1}),o},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(C)},flatMap:function(t,e){return Ke(this,(i=t,r=e,o=$e(n=this),n.toSeq().map(function(t,e){return o(i.call(r,t,e,n))}).flatten(!0)));var n,i,r,o},flatten:function(t){return Ke(this,Ye(this,t,!0))},fromEntrySeq:function(){return new qe(this)},get:function(n,t){return this.find(function(t,e){return pt(e,n)},void 0,t)},getIn:function(t,e){for(var n,i=this,r=rn(t);!(n=r.next()).done;){var o=n.value;if((i=i&&i.get?i.get(o,m):m)===m)return e}return i},groupBy:function(t,e){return function(i,t,r){var o=l(i),s=(g(i)?Pe():kt()).asMutable();i.__iterate(function(e,n){s.update(t.call(r,e,n,i),function(t){return(t=t||[]).push(o?[n,e]:e),t})});var e=$e(i);return s.map(function(t){return Ke(i,e(t))})}(this,t,e)},has:function(t){return this.get(t,m)!==m},hasIn:function(t){return this.getIn(t,m)!==m},isSubset:function(e){return e="function"==typeof e.includes?e:u(e),this.every(function(t){return e.includes(t)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:u(t)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return pt(t,e)})},keySeq:function(){return this.toSeq().map(Tn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return We(this,t)},maxBy:function(t,e){return We(this,e,t)},min:function(t){return We(this,t?Fn(t):kn)},minBy:function(t,e){return We(this,e?Fn(e):kn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ke(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Ke(this,Ve(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Dn(t),e)},sortBy:function(t,e){return Ke(this,Xe(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ke(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Ke(this,(u=t,h=e,(i=tn(n=this)).__iterateUncached=function(i,t){var r=this;if(t)return this.cacheResult().__iterate(i,t);var o=0;return n.__iterate(function(t,e,n){return u.call(h,t,e,n)&&++o&&i(t,e,r)}),o},i.__iteratorUncached=function(r,t){var o=this;if(t)return this.cacheResult().__iterator(r,t);var s=n.__iterator(D,t),a=!0;return new k(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var e=t.value,n=e[0],i=e[1];return u.call(h,i,n,o)?r===D?t:z(r,n,i,t):(a=!1,{value:void 0,done:!0})})},i));var n,u,h,i},takeUntil:function(t,e){return this.takeWhile(Dn(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e,n,i=g(t),r=l(t),o=i?1:0;return e=t.__iterate(r?i?function(t,e){o=31*o+zn(St(t),St(e))|0}:function(t,e){o=o+zn(St(t),St(e))|0}:i?function(t){o=31*o+St(t)|0}:function(t){o=o+St(t)|0}),n=bt(n=o,3432918353),n=bt(n<<15|n>>>-15,461845907),n=bt(n<<13|n>>>-13,5),n=bt((n=(n+3864292196|0)^e)^n>>>16,2246822507),n=Mt((n=bt(n^n>>>13,3266489909))^n>>>16)}(this))}});var On=u.prototype;On[e]=!0,On[q]=On.values,On.__toJS=On.toArray,On.__toStringMapper=Gn,On.inspect=On.toSource=function(){return this.toString()},On.chain=On.flatMap,On.contains=On.includes,Pn(a,{flip:function(){return Ke(this,ke(this))},mapEntries:function(n,i){var r=this,o=0;return Ke(this,this.toSeq().map(function(t,e){return n.call(i,[e,t],o++,r)}).fromEntrySeq())},mapKeys:function(n,i){var r=this;return Ke(this,this.toSeq().flip().map(function(t,e){return n.call(i,t,e,r)}).flip())}});var Rn=a.prototype;function Tn(t,e){return e}function An(t,e){return[e,t]}function Dn(t){return function(){return!t.apply(this,arguments)}}function Fn(t){return function(){return-t.apply(this,arguments)}}function Gn(t){return"string"==typeof t?JSON.stringify(t):String(t)}function qn(){return M(arguments)}function kn(t,e){return t<e?1:e<t?-1:0}function zn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Rn[n]=!0,Rn[q]=On.entries,Rn.__toJS=On.toObject,Rn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+Gn(t)},Pn(h,{toKeyedSeq:function(){return new De(this,!1)},filter:function(t,e){return Ke(this,Be(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ke(this,je(this,!1))},slice:function(t,e){return Ke(this,Ue(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=P(t,t<0?this.count():this.size);var i=this.slice(0,t);return Ke(this,1===n?i:i.concat(M(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Ke(this,Ye(this,t,!1))},get:function(n,t){return(n=N(this,n))<0||this.size===1/0||void 0!==this.size&&n>this.size?t:this.find(function(t,e){return e===n},void 0,t)},has:function(t){return 0<=(t=N(this,t))&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ke(this,(s=t,(e=tn(o=this)).size=o.size&&2*o.size-1,e.__iterateUncached=function(n,t){var i=this,r=0;return o.__iterate(function(t,e){return(!r||!1!==n(s,r++,i))&&!1!==n(t,r++,i)},t),r},e.__iteratorUncached=function(t,e){var n,i=o.__iterator(A,e),r=0;return new k(function(){return(!n||r%2)&&(n=i.next()).done?n:r%2?z(t,r++,s):z(t,r++,n.value,n)})},e));var o,s,e},interleave:function(){var t=[this].concat(M(arguments)),e=Je(this.toSeq(),J.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Ke(this,n)},keySeq:function(){return xt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Ke(this,Ve(this,t,e,!1))},zip:function(){return Ke(this,Je(this,qn,[this].concat(M(arguments))))},zipWith:function(t){var e=M(arguments);return Ke(e[0]=this,Je(this,t,e))}}),h.prototype[o]=!0,h.prototype[s]=!0,Pn(r,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),r.prototype.has=On.includes,r.prototype.contains=r.prototype.includes,Pn(H,a.prototype),Pn(J,h.prototype),Pn(K,r.prototype),Pn(wt,a.prototype),Pn(_t,h.prototype),Pn(It,r.prototype),{Iterable:u,Seq:W,Collection:Et,Map:kt,OrderedMap:Pe,List:de,Stack:In,Set:hn,OrderedSet:yn,Record:on,Range:xt,Repeat:yt,is:pt,fromJS:ft}}()}),_a="ADD_API",Ia="ADD_MAP",ba="REMOVE_MAP",Ma="SET_CENTER",Sa="SET_ZOOM_LEVEL",Na="SET_MAP_INSTANCE",Ca="SET_INFO_WINDOW",La="SET_EXTENT",Pa="ADD_LAYER",Oa="REMOVE_LAYER",Ra="SET_LAYER_INSTANCE",Ta="SET_LAYER_ORDER",Aa="SET_LAYER_OPACITY",Da="SET_LAYER_INDEX",Fa="SET_LAYER_VISIBLE",Ga="SET_ARGS",qa="ADD_GROUP",ka="REMOVE_GROUP",za="CLEAR_GROUP",ja="SET_GROUP_INSTANCE",Ba="SET_GROUP_ORDER",Ua="SET_GROUP_OPACITY",Va="SET_GROUP_INDEX",Ya="SET_GROUP_VISIBLE",Xa="SET_FOCUS_SYMBOL",Wa="ADD_GRAPHIC",Ha="REMOVE_GRAPHIC",Ja="SET_GRAPHIC_INDEX",Ka="SET_GRAPHIC_INSTANCE",Za="SET_GRAPHIC_OPACITY",Qa="SET_GRAPHIC_VISIBLE",$a="SET_GRAPHIC_ATTRIBUTE",tu="SET_GRAPHIC_SYMBOL",eu="SET_GRAPHIC_SR",nu="SET_GRAPHIC_DRAGGABLE",iu="SET_GRAPHIC_INFO_WINDOW",ru="SET_GRAPHIC_INFO_WINDOW_VISIBLE",ou="CLEAR_IMAGE",su="ADD_IMAGE",au="REMOVE_IMAGE",uu="SET_IMAGE_INSTANCE",hu="SET_IMAGE_VISIBLE",cu=wa.Map(),lu={},fu={map:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:cu,e=arguments[1];switch(e.type){case Ia:return t.set(e.payload.id,wa.fromJS(e.payload)).setIn([e.payload.id,"instance"],e.instance);case Na:return t.setIn([e.mapID,"instance"],e.payload.instance);case ba:return t.delete(e.mapID);case Ma:return t.setIn([e.mapID,"option","initMapCenter"],e.payload.center);case Sa:return t.setIn([e.mapID,"option","initMapLevel"],e.payload.zoomLevel);case La:return t.setIn([e.mapID,"option","initMapExtent"],e.payload.extent);case Ca:return t.setIn([e.mapID,"infoWindow"],e.payload);case Pa:return t.setIn([e.mapID,"layer",e.payload.id],wa.fromJS(e.payload)).setIn([e.mapID,"layer",e.payload.id,"instance"],e.instance);case Ra:return t.setIn([e.mapID,"layer",e.layerID,"instance"],e.payload.instance);case Oa:return t.deleteIn([e.mapID,"layer",e.layerID]);case Ta:return t.setIn([e.mapID,"layer",e.layerID,"order"],e.payload.order);case Da:return t.setIn([e.mapID,"layer",e.layerID,"index"],e.payload.index);case Fa:return t.setIn([e.mapID,"layer",e.layerID,"visible"],e.payload.isVisible);case Ga:return t.setIn([e.mapID,"layer",e.layerID,"args"],wa.fromJS(e.payload.args));case Aa:return t.setIn([e.mapID,"layer",e.layerID,"option","opacity"],e.payload.opacity);case ou:return t.setIn([e.mapID,"layer",e.layerID,"image"],wa.Map());case qa:return t.setIn([e.mapID,"group",e.payload.id],wa.fromJS(e.payload)).setIn([e.mapID,"group",e.payload.id,"instance"],e.instance);case ja:return t.setIn([e.mapID,"group",e.groupID,"instance"],e.payload.instance);case ka:return t.deleteIn([e.mapID,"group",e.groupID]);case za:return t.setIn([e.mapID,"group",e.groupID,"graphic"],wa.Map());case Ba:return t.setIn([e.mapID,"group",e.groupID,"order"],e.payload.order);case Va:return t.setIn([e.mapID,"group",e.groupID,"index"],e.payload.index);case Ya:return t.setIn([e.mapID,"group",e.groupID,"visible"],e.payload.isVisible);case Ua:return t.setIn([e.mapID,"group",e.groupID,"option","opacity"],e.payload.opacity);case Xa:return t.setIn([e.mapID,"group",e.groupID,"focus",e.payload.type],wa.fromJS(e.payload.symbol));case Wa:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.payload.id],wa.fromJS(e.payload)).setIn([e.mapID,"group",e.groupID,"graphic",e.payload.id,"instance"],e.instance);case Ka:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"instance"],e.payload.instance);case Ha:return t.deleteIn([e.mapID,"group",e.groupID,"graphic",e.graphicID]);case Ja:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"index"],e.payload.index);case Qa:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"visible"],e.payload.isVisible);case Za:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"option","opacity"],e.payload.opacity);case nu:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"option","draggable"],e.payload.draggable);case iu:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"option","infoWindow"],wa.fromJS(e.payload.infoWindow));case $a:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"attribute"],wa.fromJS(e.payload.attribute));case tu:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"symbol"],wa.fromJS(e.payload.symbol));case eu:return t.setIn([e.mapID,"group",e.groupID,"graphic",e.graphicID,"sr"],e.payload.sr);case su:return t.setIn([e.mapID,"layer",e.layerID,"image",e.payload.id],wa.fromJS(e.payload)).setIn([e.mapID,"layer",e.layerID,"image",e.payload.id,"instance"],e.instance);case uu:return t.setIn([e.mapID,"layer",e.layerID,"image",e.imageID,"instance"],e.payload.instance);case"SET_IMAGE_INDEX":return t.setIn([e.mapID,"layer",e.layerID,"image",e.imageID,"index"],e.payload.index);case au:return t.deleteIn([e.mapID,"layer",e.layerID,"image",e.imageID]);default:return t}},api:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:lu,e=arguments[1];switch(e.type){case _a:return e.payload;default:return t}}};var du={api:Object.freeze({addAPI:function(t){return{type:_a,payload:t}}}),map:Object.freeze({addMap:function(t,e,a){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!t)throw new Error("需傳入 map 初始化程式");if(!e)throw new Error("需傳入 HTML DIV id");var i=n.mapSet||{},r={id:e,type:a,option:{initMapCenter:i.initMapCenter,initMapExtent:i.initMapExtent,initMapLevel:i.initMapLevel&&+i.initMapLevel,maxZoom:0<=i.maxZoom&&+i.maxZoom,minZoom:0<=i.minZoom&&+i.minZoom,sr:+i.sr||4326,apiRoot:i.apiRoot},layer:{},group:{}};r[a]=n[a]||{};var u={divID:e,mapSet:r.option};u[a]=r[a];var o=new Promise(function(s){t(u).then(function(t){var e=new ks(u,a,t);if(pu(du.map.setInstance(u.divID,e)),"esri"!==a)return s(e);var n=u[a],i=n.baseLayerType,r=n.baseLayerURL,o=n.baseLayerToken;return i&&r?(pu(du.layer.addLayer(u.divID,{id:"baseLayer",type:i,url:r,option:{token:o,loaded:function(){return s(e)}}})),!1):s(e)})});return{action:{type:Ia,payload:r},promise:o}},removeMap:function(t){return{type:ba,mapID:t}},setInstance:function(t,e){return{type:Na,mapID:t,payload:{instance:e}}},setCenter:function(t,e){return{type:Ma,mapID:t,payload:{center:e}}},setZoomLevel:function(t,e){return{type:Sa,mapID:t,payload:{zoomLevel:e}}},setExtent:function(t,e){return{type:La,mapID:t,payload:{xmin:+e.xmin,ymin:+e.ymin,xmax:+e.xmax,ymax:+e.ymax}}},setInfoWindow:function(t,e,n){return{type:Ca,mapID:t,payload:{geometry:e,option:{title:n.title,content:n.content,width:+n.width,height:+n.height}}}},removeInfoWindow:function(t){return{type:Ca,mapID:t}}}),layer:Object.freeze({addLayer:function(t,e,n,i){var r=e.id,o=ss(e.type),s=e.url||"",a=e.option&&e.option.order,u=e.option&&e.option.index,h=hs(e.option);if(void 0!==a){var c=[];vu().map.getIn([t,"layer"]).forEach(function(t){c.push(t.get("order"))}),c.push(a),u=c.sort(function(t,e){return t-e}).lastIndexOf(a)}else a=0;h.index=u;var l=vu().map.getIn([t,"instance"]),f=void 0;f=n?vu().api.setBaseLayer.apply(l.origin,[o,s,h,r,i]):e.origin||vu().api.addLayer.apply(l.origin,[o,s,h,r]);var d=void 0;switch(o){case"wms":(d=new Bs(r,f,l))._url=s;break;case"wmts":d=new Us(r,f,l);break;case"dynamic":d=new js(r,f,l);break;case"image":d=new Vs(r,f,l);break;default:d=new zs(r,o,f,l)}return{type:Pa,mapID:t,instance:d,payload:{id:r,type:o,url:s,option:h,visible:!0,order:a,image:{}}}},removeLayer:function(t,e){var n=vu().map.getIn([t,"layer",e,"instance"]);return n&&(vu().api.removeLayer.call(n.origin,e),delete n.origin),{type:Oa,mapID:t,layerID:e}},setInstance:function(t,e,n){return{type:Ra,mapID:t,layerID:e,payload:{instance:n}}},setOrder:function(t,e,n){return{type:Ta,mapID:t,layerID:e,payload:{order:n}}},setIndex:function(t,e,n){return{type:Da,mapID:t,layerID:e,payload:{index:n}}},setOpacity:function(t,e,n,i){return i=$o(i),wm.call(t,"setLayerOpacity",[n,i]),{type:Aa,mapID:e,layerID:n,payload:{opacity:i}}},setVisible:function(t,e,n,i){return wm.call(t,"setLayerVisible",[n,i]),{type:Fa,mapID:e,layerID:n,payload:{isVisible:i}}},setArgs:function(t,e,n){return{type:Ga,mapID:t,layerID:e,payload:{args:n}}},clearImage:function(t,e,n){return wm.call(t,"clearImage"),{type:ou,mapID:e,layerID:n}}}),group:Object.freeze({addGroup:function(t,e,n){var i,r,o,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};void 0!==s.order?s.index=(i=t,r=s.order,o=[],vu().map.hasIn([i,"group"])&&vu().map.getIn([i,"group"]).forEach(function(t){o.push(t.get("order"))}),o.push(r),o.sort(function(t,e){return t-e}).lastIndexOf(r)):s.order=0;var a=vu().map.getIn([t,"instance"]),u=void 0;if(s.origin)u=s.origin;else switch(e){case"graphic":u=vu().api.addGroup.apply(a.origin,[n,cs(s)]);break;case"feature":u=vu().api.addFeature.apply(a.origin,[n,s.url,ls(s),s.loaded,s.updated]);break;case"cluster":u=vu().api.addCluster.apply(a.origin,[n,s.pointData,fs(s),s.loaded]);break;case"heatmap":u="string"==typeof s.url?vu().api.addHeatMapByUrl.apply(a.origin,[n,s.url,ds(s),s.loaded]):vu().api.addHeatMapByData.apply(a.origin,[n,s.pointData,ds(s),s.loaded])}var h=new Xs(n,e,u,a);void 0===s.maxZoom&&void 0===s.minZoom||a.on("zoomend",function t(){if(h.origin){var e=this.getZoom(),n=s.maxZoom||100,i=s.minZoom||0;n<e||e<i?h.hide():h.show()}else this.off("zoomend",t)});return delete s.loaded,delete s.updated,{type:qa,mapID:t,instance:h,payload:{id:n,type:e,order:s.order,visible:!0,option:s,graphic:{}}}},removeGroup:function(t,e){var n=vu().map.getIn([t,"group",e,"instance"]);switch(n.type){case"graphic":vu().api.removeGroup.call(n.origin,e);break;case"feature":vu().api.removeFeature.call(n.origin,e);break;case"cluster":vu().api.removeCluster.call(n.origin,e);break;case"heatmap":vu().api.removeHeatMap.call(n.origin,e)}return delete n.origin,{type:ka,mapID:t,groupID:e}},clearGroup:function(t,e,n){return wm.call(t,"clearGroup",[n]),{type:za,mapID:e,groupID:n}},setInstance:function(t,e,n){return{type:ja,mapID:t,groupID:e,payload:{instance:n}}},setOrder:function(t,e,n){return{type:Ba,mapID:t,groupID:e,payload:{order:n}}},setIndex:function(t,e,n){return{type:Va,mapID:t,groupID:e,payload:{index:n}}},setOpacity:function(t,e,n,i){return i=$o(i),wm.call(t,"setGroupOpacity",[n,i]),{type:Ua,mapID:e,groupID:n,payload:{opacity:i}}},setVisible:function(t,e,n,i){return wm.call(t,"setGroupVisible",[n,i]),{type:Ya,mapID:e,groupID:n,payload:{isVisible:i}}},setFocusSymbol:function(t,e,n,i){return{type:Xa,mapID:t,groupID:e,payload:{type:as(n),symbol:_s[n+"Symbol"](i)}}}}),graphic:Object.freeze({addGraphic:function(t,e,n){var i=n.id,r=as(n.type),o=n.geometry&&n.geometry.sr?+n.geometry.sr:vu().map.getIn([t,"option","sr"]),s=void 0,a=void 0,u=n.geometry.val(),h=void 0;switch(r){case"label":s="addLabel",a="point",h=vs(n.symbol);break;case"marker":s="addMarker",a="point",h=ys(n.symbol);break;case"circle":s="addCircle",a=r,h=Es(n.symbol);break;case"polyline":s="addPolyline",a=r,h=ms(n.symbol);break;case"polygon":s="addPolygon",a=r,h=xs(n.symbol);break;case"holepolygon":s="addHolePolygon",a=r,h=xs(n.symbol);break;case"multipolygon":s="addMultiPolygon",a=r,h=xs(n.symbol)}var c=n.attribute||{},l=gs(n.option),f=vu().map.getIn([t,"group",e,"instance"]),d=n.origin||vu().api[s].apply(f.origin,[e,u,h,c,l,i]),g=new Ws(i,r,d,f);g.geometry=n.geometry,g.geometry.link=g;var p=vu().map.getIn([t,"group",e,"graphic"]).size;return{type:Wa,mapID:t,groupID:e,instance:g,payload:{id:i,sr:o,type:r,index:p,geometryType:a,attribute:c,visible:!0,geometry:u,symbol:{},option:l}}},removeGraphic:function(t,e,n){var i=vu().map.getIn([t,"group",e,"graphic",n,"instance"]);return i&&(vu().api.removeGraphic.call(i.origin,n),delete i.origin),{type:Ha,mapID:t,groupID:e,graphicID:n}},setInstance:function(t,e,n,i){return{type:Ka,mapID:t,groupID:e,graphicID:n,payload:{instance:i}}},setIndex:function(t,e,n,i){return{type:Ja,mapID:t,groupID:e,graphicID:n,payload:{index:i}}},setVisible:function(t,e,n,i,r){return wm.call(t,"setGraphicVisible",[i,r]),{type:Qa,mapID:e,groupID:n,graphicID:i,payload:{isVisible:r}}},setOpacity:function(t,e,n,i,r){return r=$o(r),wm.call(t,"setGraphicOpacity",[i,r]),{type:Za,mapID:e,groupID:n,graphicID:i,payload:{opacity:r}}},setDraggable:function(t,e,n,i){return{type:nu,mapID:t,groupID:e,graphicID:n,payload:{draggable:i}}},setAttribute:function(t,e,n,i){return{type:$a,mapID:t,groupID:e,graphicID:n,payload:{attribute:i}}},setSymbol:function(t,e,n,i){return{type:tu,mapID:t,groupID:e,graphicID:n,payload:{symbol:i}}},setInfoWindow:function(t,e,n,i,r){var o=us(r);return wm.call(t,"setInfoWindow",[o]),{type:iu,mapID:e,groupID:n,graphicID:i,payload:{infoWindow:o}}},openInfoWindow:function(t,e,n,i,r){var o=us(r);return wm.call(t,"openInfoWindow",[i,o]),{type:ru}},removeInfoWindow:function(t,e,n,i){return wm.call(t,"closeInfoWindow",[i]),{type:ru}},setSR:function(t,e,n,i){return{type:eu,mapID:t,groupID:e,graphicID:n,payload:{sr:i}}}}),image:Object.freeze({addImage:function(t,e,n,i){var r=i.id,o=es(i.url),s=os(i.extent),a=ps(i.option),u=vu().map.getIn([e,"layer",n,"instance"]),h=i.origin||vu().api.addImage.apply(u.origin,[o,s,a]),c=new Ys(r,h,u),l=vu().map.getIn([e,"layer",n,"image"]).size;return{type:su,mapID:e,layerID:n,instance:c,payload:{id:r,url:o,index:l,extent:s,option:a}}},removeImage:function(t,e,n){var i=vu().map.getIn([t,"layer",e,"image",n,"instance"]);return i&&(vu().api.removeImage.call(i.origin,n),delete i.origin),{type:au,mapID:t,layerID:e,imageID:n}},setInstance:function(t,e,n,i){return{type:uu,mapID:t,layerID:e,imageID:n,payload:{instance:i}}},setVisible:function(t,e,n,i,r){return vu().api.setImageVisible.call(t,r),{type:hu,mapID:e,layerID:n,imageID:i,payload:{isVisible:r}}}})},gu=function t(e,n,i){var r;if("function"==typeof n&&void 0===i&&(i=n,n=void 0),void 0!==i){if("function"!=typeof i)throw new Error("Expected the enhancer to be a function.");return i(t)(e,n)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,s=n,a=[],u=a,h=!1;function c(){u===a&&(u=a.slice())}function l(){return s}function f(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var n=!0;return c(),u.push(e),function(){if(n){n=!1,c();var t=u.indexOf(e);u.splice(t,1)}}}function d(t){if(!function(t){if(null==(e=t)||"object"!=typeof e||sa(t)!=la)return!1;var e,n=ha(t);if(null===n)return!0;var i=pa.call(n,"constructor")&&n.constructor;return"function"==typeof i&&i instanceof i&&ga.call(i)==va}(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,s=o(s,t)}finally{h=!1}for(var e=a=u,n=0;n<e.length;n++)(0,e[n])();return t}return d({type:Ea.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");o=t,d({type:Ea.INIT})}})[xa]=function(){var t,n=f;return(t={subscribe:function(t){if("object"!=typeof t)throw new TypeError("Expected the observer to be an object.");function e(){t.next&&t.next(l())}return e(),{unsubscribe:n(e)}}})[xa]=function(){return this},t},r}(function(t){for(var e=Object.keys(t),d={},n=0;n<e.length;n++){var i=e[n];"function"==typeof t[i]&&(d[i]=t[i])}var r,g=Object.keys(d),p=void 0;try{r=d,Object.keys(r).forEach(function(t){var e=r[t];if(void 0===e(void 0,{type:Ea.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===e(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Ea.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}catch(t){p=t}return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];if(p)throw p;for(var n,i,r,o=!1,s={},a=0;a<g.length;a++){var u=g[a],h=d[u],c=t[u],l=h(c,e);if(void 0===l){var f=(n=u,r=void 0,"Given action "+((r=(i=e)&&i.type)&&'"'+r.toString()+'"'||"an action")+', reducer "'+n+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(f)}s[u]=l,o=o||l!==c}return o?s:t}}(fu)),pu=gu.dispatch,vu=gu.getState,yu=t(function(k,z){(function(){var es,ns=200,is="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",rs="Expected a function",os="__lodash_hash_undefined__",ss=500,as="__lodash_placeholder__",us=1,hs=2,cs=4,ls=1,fs=2,ds=1,gs=2,ps=4,vs=8,ys=16,ms=32,xs=64,Es=128,ws=256,_s=512,Is=30,bs="...",Ms=800,Ss=16,Ns=1,Cs=2,Ls=1/0,Ps=9007199254740991,Os=1.7976931348623157e308,Rs=NaN,Ts=4294967295,As=Ts-1,Ds=Ts>>>1,Fs=[["ary",Es],["bind",ds],["bindKey",gs],["curry",vs],["curryRight",ys],["flip",_s],["partial",ms],["partialRight",xs],["rearg",ws]],Gs="[object Arguments]",qs="[object Array]",ks="[object AsyncFunction]",zs="[object Boolean]",js="[object Date]",Bs="[object DOMException]",Us="[object Error]",Vs="[object Function]",Ys="[object GeneratorFunction]",Xs="[object Map]",Ws="[object Number]",Hs="[object Null]",Js="[object Object]",Ks="[object Promise]",Zs="[object Proxy]",Qs="[object RegExp]",$s="[object Set]",ta="[object String]",ea="[object Symbol]",na="[object Undefined]",ia="[object WeakMap]",ra="[object WeakSet]",oa="[object ArrayBuffer]",sa="[object DataView]",aa="[object Float32Array]",ua="[object Float64Array]",ha="[object Int8Array]",ca="[object Int16Array]",la="[object Int32Array]",fa="[object Uint8Array]",da="[object Uint8ClampedArray]",ga="[object Uint16Array]",pa="[object Uint32Array]",va=/\b__p \+= '';/g,ya=/\b(__p \+=) '' \+/g,ma=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xa=/&(?:amp|lt|gt|quot|#39);/g,Ea=/[&<>"']/g,wa=RegExp(xa.source),_a=RegExp(Ea.source),Ia=/<%-([\s\S]+?)%>/g,ba=/<%([\s\S]+?)%>/g,Ma=/<%=([\s\S]+?)%>/g,Sa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Na=/^\w*$/,Ca=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,La=/[\\^$.*+?()[\]{}|]/g,Pa=RegExp(La.source),Oa=/^\s+|\s+$/g,Ra=/^\s+/,Ta=/\s+$/,Aa=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Da=/\{\n\/\* \[wrapped with (.+)\] \*/,Fa=/,? & /,Ga=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qa=/\\(\\)?/g,ka=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,za=/\w*$/,ja=/^[-+]0x[0-9a-f]+$/i,Ba=/^0b[01]+$/i,Ua=/^\[object .+?Constructor\]$/,Va=/^0o[0-7]+$/i,Ya=/^(?:0|[1-9]\d*)$/,Xa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wa=/($^)/,Ha=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\ufe0e\\ufe0f",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+t+"]",u="["+s+"]",h="["+e+"]",c="\\d+",l="["+n+"]",f="["+i+"]",d="[^"+t+s+c+n+i+r+"]",g="\\ud83c[\\udffb-\\udfff]",p="[^"+t+"]",v="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",m="["+r+"]",x="(?:"+f+"|"+d+")",E="(?:"+m+"|"+d+")",w="(?:['’](?:d|ll|m|re|s|t|ve))?",_="(?:['’](?:D|LL|M|RE|S|T|VE))?",I="(?:"+h+"|"+g+")"+"?",b="["+o+"]?",M=b+I+("(?:\\u200d(?:"+[p,v,y].join("|")+")"+b+I+")*"),S="(?:"+[l,v,y].join("|")+")"+M,N="(?:"+[p+h+"?",h,v,y,a].join("|")+")",Ja=RegExp("['’]","g"),Ka=RegExp(h,"g"),C=RegExp(g+"(?="+g+")|"+N+M,"g"),Za=RegExp([m+"?"+f+"+"+w+"(?="+[u,m,"$"].join("|")+")",E+"+"+_+"(?="+[u,m+x,"$"].join("|")+")",m+"?"+x+"+"+w,m+"+"+_,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",c,S].join("|"),"g"),L=RegExp("[\\u200d"+t+e+o+"]"),Qa=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$a=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tu=-1,eu={};eu[aa]=eu[ua]=eu[ha]=eu[ca]=eu[la]=eu[fa]=eu[da]=eu[ga]=eu[pa]=!0,eu[Gs]=eu[qs]=eu[oa]=eu[zs]=eu[sa]=eu[js]=eu[Us]=eu[Vs]=eu[Xs]=eu[Ws]=eu[Js]=eu[Qs]=eu[$s]=eu[ta]=eu[ia]=!1;var nu={};nu[Gs]=nu[qs]=nu[oa]=nu[sa]=nu[zs]=nu[js]=nu[aa]=nu[ua]=nu[ha]=nu[ca]=nu[la]=nu[Xs]=nu[Ws]=nu[Js]=nu[Qs]=nu[$s]=nu[ta]=nu[ea]=nu[fa]=nu[da]=nu[ga]=nu[pa]=!0,nu[Us]=nu[Vs]=nu[ia]=!1;var P={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iu=parseFloat,ru=parseInt,O="object"==typeof j&&j&&j.Object===Object&&j,R="object"==typeof self&&self&&self.Object===Object&&self,ou=O||R||Function("return this")(),T=z&&!z.nodeType&&z,A=T&&k&&!k.nodeType&&k,su=A&&A.exports===T,D=su&&O.process,F=function(){try{return D&&D.binding&&D.binding("util")}catch(t){}}(),au=F&&F.isArrayBuffer,uu=F&&F.isDate,hu=F&&F.isMap,cu=F&&F.isRegExp,lu=F&&F.isSet,fu=F&&F.isTypedArray;function du(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function gu(t,e,n,i){for(var r=-1,o=null==t?0:t.length;++r<o;){var s=t[r];e(i,s,n(s),t)}return i}function pu(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function vu(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function yu(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function mu(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}function xu(t,e){return!!(null==t?0:t.length)&&-1<Cu(t,e,0)}function Eu(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function wu(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function _u(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function Iu(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}function bu(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function Mu(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}var G=Ru("length");function Su(t,i,e){var r;return e(t,function(t,e,n){if(i(t,e,n))return r=e,!1}),r}function Nu(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Cu(t,e,n){return e==e?function(t,e,n){var i=n-1,r=t.length;for(;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):Nu(t,Pu,n)}function Lu(t,e,n,i){for(var r=n-1,o=t.length;++r<o;)if(i(t[r],e))return r;return-1}function Pu(t){return t!=t}function Ou(t,e){var n=null==t?0:t.length;return n?Au(t,e)/n:Rs}function Ru(e){return function(t){return null==t?es:t[e]}}function q(e){return function(t){return null==e?es:e[t]}}function Tu(t,i,r,o,e){return e(t,function(t,e,n){r=o?(o=!1,t):i(r,t,e,n)}),r}function Au(t,e){for(var n,i=-1,r=t.length;++i<r;){var o=e(t[i]);o!==es&&(n=n===es?o:n+o)}return n}function Du(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function Fu(e){return function(t){return e(t)}}function Gu(e,t){return wu(t,function(t){return e[t]})}function qu(t,e){return t.has(e)}function ku(t,e){for(var n=-1,i=t.length;++n<i&&-1<Cu(e,t[n],0););return n}function zu(t,e){for(var n=t.length;n--&&-1<Cu(e,t[n],0););return n}var ju=q({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Bu=q({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Uu(t){return"\\"+P[t]}function Vu(t){return L.test(t)}function Yu(t){var n=-1,i=Array(t.size);return t.forEach(function(t,e){i[++n]=[e,t]}),i}function Xu(e,n){return function(t){return e(n(t))}}function Wu(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n];s!==e&&s!==as||(t[n]=as,o[r++]=n)}return o}function Hu(t,e){return"__proto__"==e?es:t[e]}function Ju(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Ku(t){return Vu(t)?function(t){var e=C.lastIndex=0;for(;C.test(t);)++e;return e}(t):G(t)}function Zu(t){return Vu(t)?t.match(C)||[]:t.split("")}var Qu=q({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var $u=function t(e){var n,C=(e=null==e?ou:$u.defaults(ou.Object(),e,$u.pick(ou,$a))).Array,i=e.Date,r=e.Error,v=e.Function,o=e.Math,b=e.Object,y=e.RegExp,c=e.String,L=e.TypeError,s=C.prototype,a=v.prototype,l=b.prototype,u=e["__core-js_shared__"],h=a.toString,M=l.hasOwnProperty,f=0,d=(n=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",g=l.toString,p=h.call(b),m=ou._,x=y("^"+h.call(M).replace(La,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=su?e.Buffer:es,w=e.Symbol,_=e.Uint8Array,I=E?E.allocUnsafe:es,S=Xu(b.getPrototypeOf,b),N=b.create,P=l.propertyIsEnumerable,O=s.splice,R=w?w.isConcatSpreadable:es,T=w?w.iterator:es,A=w?w.toStringTag:es,D=function(){try{var t=zn(b,"defineProperty");return t({},"",{}),t}catch(t){}}(),F=e.clearTimeout!==ou.clearTimeout&&e.clearTimeout,G=i&&i.now!==ou.Date.now&&i.now,q=e.setTimeout!==ou.setTimeout&&e.setTimeout,k=o.ceil,z=o.floor,j=b.getOwnPropertySymbols,B=E?E.isBuffer:es,U=e.isFinite,V=s.join,Y=Xu(b.keys,b),X=o.max,W=o.min,H=i.now,J=e.parseInt,K=o.random,Z=s.reverse,Q=zn(e,"DataView"),$=zn(e,"Map"),tt=zn(e,"Promise"),et=zn(e,"Set"),nt=zn(e,"WeakMap"),it=zn(b,"create"),rt=nt&&new nt,ot={},st=di(Q),at=di($),ut=di(tt),ht=di(et),ct=di(nt),lt=w?w.prototype:es,ft=lt?lt.valueOf:es,dt=lt?lt.toString:es;function gt(t){if(Pr(t)&&!xr(t)&&!(t instanceof mt)){if(t instanceof yt)return t;if(M.call(t,"__wrapped__"))return gi(t)}return new yt(t)}var pt=function(){function n(){}return function(t){if(!Lr(t))return{};if(N)return N(t);n.prototype=t;var e=new n;return n.prototype=es,e}}();function vt(){}function yt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=es}function mt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ts,this.__views__=[]}function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function _t(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wt;++e<n;)this.add(t[e])}function It(t){var e=this.__data__=new Et(t);this.size=e.size}function bt(t,e){var n=xr(t),i=!n&&mr(t),r=!n&&!i&&Ir(t),o=!n&&!i&&!r&&qr(t),s=n||i||r||o,a=s?Du(t.length,c):[],u=a.length;for(var h in t)!e&&!M.call(t,h)||s&&("length"==h||r&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Wn(h,u))||a.push(h);return a}function Mt(t){var e=t.length;return e?t[_e(0,e-1)]:es}function St(t,e){return ui(rn(t),Dt(e,0,t.length))}function Nt(t){return ui(rn(t))}function Ct(t,e,n){(n===es||pr(t[e],n))&&(n!==es||e in t)||Tt(t,e,n)}function Lt(t,e,n){var i=t[e];M.call(t,e)&&pr(i,n)&&(n!==es||e in t)||Tt(t,e,n)}function Pt(t,e){for(var n=t.length;n--;)if(pr(t[n][0],e))return n;return-1}function Ot(t,i,r,o){return zt(t,function(t,e,n){i(o,t,r(t),n)}),o}function Rt(t,e){return t&&on(e,so(e),t)}function Tt(t,e,n){"__proto__"==e&&D?D(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function At(t,e){for(var n=-1,i=e.length,r=C(i),o=null==t;++n<i;)r[n]=o?es:eo(t,e[n]);return r}function Dt(t,e,n){return t==t&&(n!==es&&(t=t<=n?t:n),e!==es&&(t=e<=t?t:e)),t}function Ft(n,i,r,t,e,o){var s,a=i&us,u=i&hs,h=i&cs;if(r&&(s=e?r(n,t,e,o):r(n)),s!==es)return s;if(!Lr(n))return n;var c,l,f,d,g,p,v,y,m,x=xr(n);if(x){if(y=(v=n).length,m=new v.constructor(y),y&&"string"==typeof v[0]&&M.call(v,"index")&&(m.index=v.index,m.input=v.input),s=m,!a)return rn(n,s)}else{var E=Un(n),w=E==Vs||E==Ys;if(Ir(n))return Ze(n,a);if(E==Js||E==Gs||w&&!e){if(s=u||w?{}:Yn(n),!a)return u?(p=f=n,d=(g=s)&&on(p,ao(p),g),on(f,Bn(f),d)):(l=Rt(s,c=n),on(c,jn(c),l))}else{if(!nu[E])return e?n:{};s=function(t,e,n){var i,r,o,s,a,u=t.constructor;switch(e){case oa:return Qe(t);case zs:case js:return new u(+t);case sa:return s=t,a=n?Qe(s.buffer):s.buffer,new s.constructor(a,s.byteOffset,s.byteLength);case aa:case ua:case ha:case ca:case la:case fa:case da:case ga:case pa:return $e(t,n);case Xs:return new u;case Ws:case ta:return new u(t);case Qs:return(o=new(r=t).constructor(r.source,za.exec(r))).lastIndex=r.lastIndex,o;case $s:return new u;case ea:return i=t,ft?b(ft.call(i)):{}}}(n,E,a)}}o||(o=new It);var _=o.get(n);if(_)return _;if(o.set(n,s),Dr(n))return n.forEach(function(t){s.add(Ft(t,i,r,t,n,o))}),s;if(Or(n))return n.forEach(function(t,e){s.set(e,Ft(t,i,r,e,n,o))}),s;var I=x?es:(h?u?Tn:Rn:u?ao:so)(n);return pu(I||n,function(t,e){I&&(t=n[e=t]),Lt(s,e,Ft(t,i,r,e,n,o))}),s}function Gt(t,e,n){var i=n.length;if(null==t)return!i;for(t=b(t);i--;){var r=n[i],o=e[r],s=t[r];if(s===es&&!(r in t)||!o(s))return!1}return!0}function qt(t,e,n){if("function"!=typeof t)throw new L(rs);return ri(function(){t.apply(es,n)},e)}function kt(t,e,n,i){var r=-1,o=xu,s=!0,a=t.length,u=[],h=e.length;if(!a)return u;n&&(e=wu(e,Fu(n))),i?(o=Eu,s=!1):e.length>=ns&&(o=qu,s=!1,e=new _t(e));t:for(;++r<a;){var c=t[r],l=null==n?c:n(c);if(c=i||0!==c?c:0,s&&l==l){for(var f=h;f--;)if(e[f]===l)continue t;u.push(c)}else o(e,l,i)||u.push(c)}return u}gt.templateSettings={escape:Ia,evaluate:ba,interpolate:Ma,variable:"",imports:{_:gt}},(gt.prototype=vt.prototype).constructor=gt,(yt.prototype=pt(vt.prototype)).constructor=yt,(mt.prototype=pt(vt.prototype)).constructor=mt,xt.prototype.clear=function(){this.__data__=it?it(null):{},this.size=0},xt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},xt.prototype.get=function(t){var e=this.__data__;if(it){var n=e[t];return n===os?es:n}return M.call(e,t)?e[t]:es},xt.prototype.has=function(t){var e=this.__data__;return it?e[t]!==es:M.call(e,t)},xt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=it&&e===es?os:e,this},Et.prototype.clear=function(){this.__data__=[],this.size=0},Et.prototype.delete=function(t){var e=this.__data__,n=Pt(e,t);return!(n<0||(n==e.length-1?e.pop():O.call(e,n,1),--this.size,0))},Et.prototype.get=function(t){var e=this.__data__,n=Pt(e,t);return n<0?es:e[n][1]},Et.prototype.has=function(t){return-1<Pt(this.__data__,t)},Et.prototype.set=function(t,e){var n=this.__data__,i=Pt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},wt.prototype.clear=function(){this.size=0,this.__data__={hash:new xt,map:new($||Et),string:new xt}},wt.prototype.delete=function(t){var e=qn(this,t).delete(t);return this.size-=e?1:0,e},wt.prototype.get=function(t){return qn(this,t).get(t)},wt.prototype.has=function(t){return qn(this,t).has(t)},wt.prototype.set=function(t,e){var n=qn(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},_t.prototype.add=_t.prototype.push=function(t){return this.__data__.set(t,os),this},_t.prototype.has=function(t){return this.__data__.has(t)},It.prototype.clear=function(){this.__data__=new Et,this.size=0},It.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},It.prototype.get=function(t){return this.__data__.get(t)},It.prototype.has=function(t){return this.__data__.has(t)},It.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Et){var i=n.__data__;if(!$||i.length<ns-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new wt(i)}return n.set(t,e),this.size=n.size,this};var zt=un(Ht),jt=un(Jt,!0);function Bt(t,i){var r=!0;return zt(t,function(t,e,n){return r=!!i(t,e,n)}),r}function Ut(t,e,n){for(var i=-1,r=t.length;++i<r;){var o=t[i],s=e(o);if(null!=s&&(a===es?s==s&&!Gr(s):n(s,a)))var a=s,u=o}return u}function Vt(t,i){var r=[];return zt(t,function(t,e,n){i(t,e,n)&&r.push(t)}),r}function Yt(t,e,n,i,r){var o=-1,s=t.length;for(n||(n=Xn),r||(r=[]);++o<s;){var a=t[o];0<e&&n(a)?1<e?Yt(a,e-1,n,i,r):_u(r,a):i||(r[r.length]=a)}return r}var Xt=hn(),Wt=hn(!0);function Ht(t,e){return t&&Xt(t,e,so)}function Jt(t,e){return t&&Wt(t,e,so)}function Kt(e,t){return mu(t,function(t){return Sr(e[t])})}function Zt(t,e){for(var n=0,i=(e=We(e,t)).length;null!=t&&n<i;)t=t[fi(e[n++])];return n&&n==i?t:es}function Qt(t,e,n){var i=e(t);return xr(t)?i:_u(i,n(t))}function $t(t){return null==t?t===es?na:Hs:A&&A in b(t)?function(t){var e=M.call(t,A),n=t[A];try{t[A]=es;var i=!0}catch(t){}var r=g.call(t);return i&&(e?t[A]=n:delete t[A]),r}(t):(e=t,g.call(e));var e}function te(t,e){return e<t}function ee(t,e){return null!=t&&M.call(t,e)}function ne(t,e){return null!=t&&e in b(t)}function ie(t,e,n){for(var i=n?Eu:xu,r=t[0].length,o=t.length,s=o,a=C(o),u=1/0,h=[];s--;){var c=t[s];s&&e&&(c=wu(c,Fu(e))),u=W(c.length,u),a[s]=!n&&(e||120<=r&&120<=c.length)?new _t(s&&c):es}c=t[0];var l=-1,f=a[0];t:for(;++l<r&&h.length<u;){var d=c[l],g=e?e(d):d;if(d=n||0!==d?d:0,!(f?qu(f,g):i(h,g,n))){for(s=o;--s;){var p=a[s];if(!(p?qu(p,g):i(t[s],g,n)))continue t}f&&f.push(g),h.push(d)}}return h}function re(t,e,n){var i=null==(t=ni(t,e=We(e,t)))?t:t[fi(Mi(e))];return null==i?es:du(i,t,n)}function oe(t){return Pr(t)&&$t(t)==Gs}function se(t,e,n,i,r){return t===e||(null==t||null==e||!Pr(t)&&!Pr(e)?t!=t&&e!=e:function(t,e,n,i,r,o){var s=xr(t),a=xr(e),u=s?qs:Un(t),h=a?qs:Un(e),c=(u=u==Gs?Js:u)==Js,l=(h=h==Gs?Js:h)==Js,f=u==h;if(f&&Ir(t)){if(!Ir(e))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new It),s||qr(t)?Pn(t,e,n,i,r,o):function(t,e,n,i,r,o,s){switch(n){case sa:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case oa:return!(t.byteLength!=e.byteLength||!o(new _(t),new _(e)));case zs:case js:case Ws:return pr(+t,+e);case Us:return t.name==e.name&&t.message==e.message;case Qs:case ta:return t==e+"";case Xs:var a=Yu;case $s:var u=i&ls;if(a||(a=Ju),t.size!=e.size&&!u)return!1;var h=s.get(t);if(h)return h==e;i|=fs,s.set(t,e);var c=Pn(a(t),a(e),i,r,o,s);return s.delete(t),c;case ea:if(ft)return ft.call(t)==ft.call(e)}return!1}(t,e,u,n,i,r,o);if(!(n&ls)){var d=c&&M.call(t,"__wrapped__"),g=l&&M.call(e,"__wrapped__");if(d||g){var p=d?t.value():t,v=g?e.value():e;return o||(o=new It),r(p,v,n,i,o)}}return!!f&&(o||(o=new It),function(t,e,n,i,r,o){var s=n&ls,a=Rn(t),u=a.length,h=Rn(e).length;if(u!=h&&!s)return!1;for(var c=u;c--;){var l=a[c];if(!(s?l in e:M.call(e,l)))return!1}var f=o.get(t);if(f&&o.get(e))return f==e;var d=!0;o.set(t,e),o.set(e,t);for(var g=s;++c<u;){l=a[c];var p=t[l],v=e[l];if(i)var y=s?i(v,p,l,e,t,o):i(p,v,l,t,e,o);if(!(y===es?p===v||r(p,v,n,i,o):y)){d=!1;break}g||(g="constructor"==l)}if(d&&!g){var m=t.constructor,x=e.constructor;m!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof x&&x instanceof x)&&(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,i,r,o))}(t,e,n,i,se,r))}function ae(t,e,n,i){var r=n.length,o=r,s=!i;if(null==t)return!o;for(t=b(t);r--;){var a=n[r];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<o;){var u=(a=n[r])[0],h=t[u],c=a[1];if(s&&a[2]){if(h===es&&!(u in t))return!1}else{var l=new It;if(i)var f=i(h,c,u,t,e,l);if(!(f===es?se(c,h,ls|fs,i,l):f))return!1}}return!0}function ue(t){return!(!Lr(t)||(e=t,d&&d in e))&&(Sr(t)?x:Ua).test(di(t));var e}function he(t){return"function"==typeof t?t:null==t?To:"object"==typeof t?xr(t)?pe(t[0],t[1]):ge(t):Bo(t)}function ce(t){if(!Qn(t))return Y(t);var e=[];for(var n in b(t))M.call(t,n)&&"constructor"!=n&&e.push(n);return e}function le(t){if(!Lr(t))return function(t){var e=[];if(null!=t)for(var n in b(t))e.push(n);return e}(t);var e=Qn(t),n=[];for(var i in t)("constructor"!=i||!e&&M.call(t,i))&&n.push(i);return n}function fe(t,e){return t<e}function de(t,i){var r=-1,o=wr(t)?C(t.length):[];return zt(t,function(t,e,n){o[++r]=i(t,e,n)}),o}function ge(e){var n=kn(e);return 1==n.length&&n[0][2]?ti(n[0][0],n[0][1]):function(t){return t===e||ae(t,e,n)}}function pe(n,i){return Jn(n)&&$n(i)?ti(fi(n),i):function(t){var e=eo(t,n);return e===es&&e===i?no(t,n):se(i,e,ls|fs)}}function ve(i,r,o,s,a){i!==r&&Xt(r,function(t,e){if(Lr(t))a||(a=new It),function(t,e,n,i,r,o,s){var a=Hu(t,n),u=Hu(e,n),h=s.get(u);if(h)return Ct(t,n,h);var c=o?o(a,u,n+"",t,e,s):es,l=c===es;if(l){var f=xr(u),d=!f&&Ir(u),g=!f&&!d&&qr(u);c=u,f||d||g?xr(a)?c=a:_r(a)?c=rn(a):d?(l=!1,c=Ze(u,!0)):g?(l=!1,c=$e(u,!0)):c=[]:Tr(u)||mr(u)?mr(c=a)?c=Xr(a):(!Lr(a)||i&&Sr(a))&&(c=Yn(u)):l=!1}l&&(s.set(u,c),r(c,u,i,o,s),s.delete(u)),Ct(t,n,c)}(i,r,e,o,ve,s,a);else{var n=s?s(Hu(i,e),t,e+"",i,r,a):es;n===es&&(n=t),Ct(i,e,n)}},ao)}function ye(t,e){var n=t.length;if(n)return Wn(e+=e<0?n:0,n)?t[e]:es}function me(t,i,n){var r=-1;return i=wu(i.length?i:[To],Fu(Gn())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(de(t,function(e,t,n){return{criteria:wu(i,function(t){return t(e)}),index:++r,value:e}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,o=e.criteria,s=r.length,a=n.length;++i<s;){var u=tn(r[i],o[i]);if(u){if(a<=i)return u;var h=n[i];return u*("desc"==h?-1:1)}}return t.index-e.index}(t,e,n)})}function xe(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=Zt(t,s);n(a,s)&&Ne(o,We(s,t),a)}return o}function Ee(t,e,n,i){var r=i?Lu:Cu,o=-1,s=e.length,a=t;for(t===e&&(e=rn(e)),n&&(a=wu(t,Fu(n)));++o<s;)for(var u=0,h=e[o],c=n?n(h):h;-1<(u=r(a,c,u,i));)a!==t&&O.call(a,u,1),O.call(t,u,1);return t}function we(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==o){var o=r;Wn(r)?O.call(t,r,1):ke(t,r)}}return t}function _e(t,e){return t+z(K()*(e-t+1))}function Ie(t,e){var n="";if(!t||e<1||Ps<e)return n;for(;e%2&&(n+=t),(e=z(e/2))&&(t+=t),e;);return n}function be(t,e){return oi(ei(t,e,To),t+"")}function Me(t){return Mt(vo(t))}function Se(t,e){var n=vo(t);return ui(n,Dt(e,0,n.length))}function Ne(t,e,n,i){if(!Lr(t))return t;for(var r=-1,o=(e=We(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var u=fi(e[r]),h=n;if(r!=s){var c=a[u];(h=i?i(c,u,a):es)===es&&(h=Lr(c)?c:Wn(e[r+1])?[]:{})}Lt(a,u,h),a=a[u]}return t}var Ce=rt?function(t,e){return rt.set(t,e),t}:To,Le=D?function(t,e){return D(t,"toString",{configurable:!0,enumerable:!1,value:Po(e),writable:!0})}:To;function Pe(t){return ui(vo(t))}function Oe(t,e,n){var i=-1,r=t.length;e<0&&(e=r<-e?0:r+e),(n=r<n?r:n)<0&&(n+=r),r=n<e?0:n-e>>>0,e>>>=0;for(var o=C(r);++i<r;)o[i]=t[i+e];return o}function Re(t,i){var r;return zt(t,function(t,e,n){return!(r=i(t,e,n))}),!!r}function Te(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=Ds){for(;i<r;){var o=i+r>>>1,s=t[o];null!==s&&!Gr(s)&&(n?s<=e:s<e)?i=o+1:r=o}return r}return Ae(t,e,To,n)}function Ae(t,e,n,i){e=n(e);for(var r=0,o=null==t?0:t.length,s=e!=e,a=null===e,u=Gr(e),h=e===es;r<o;){var c=z((r+o)/2),l=n(t[c]),f=l!==es,d=null===l,g=l==l,p=Gr(l);if(s)var v=i||g;else v=h?g&&(i||f):a?g&&f&&(i||!d):u?g&&f&&!d&&(i||!p):!d&&!p&&(i?l<=e:l<e);v?r=c+1:o=c}return W(o,As)}function De(t,e){for(var n=-1,i=t.length,r=0,o=[];++n<i;){var s=t[n],a=e?e(s):s;if(!n||!pr(a,u)){var u=a;o[r++]=0===s?0:s}}return o}function Fe(t){return"number"==typeof t?t:Gr(t)?Rs:+t}function Ge(t){if("string"==typeof t)return t;if(xr(t))return wu(t,Ge)+"";if(Gr(t))return dt?dt.call(t):"";var e=t+"";return"0"==e&&1/t==-Ls?"-0":e}function qe(t,e,n){var i=-1,r=xu,o=t.length,s=!0,a=[],u=a;if(n)s=!1,r=Eu;else if(ns<=o){var h=e?null:bn(t);if(h)return Ju(h);s=!1,r=qu,u=new _t}else u=e?[]:a;t:for(;++i<o;){var c=t[i],l=e?e(c):c;if(c=n||0!==c?c:0,s&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),a.push(c)}else r(u,l,n)||(u!==a&&u.push(l),a.push(c))}return a}function ke(t,e){return null==(t=ni(t,e=We(e,t)))||delete t[fi(Mi(e))]}function ze(t,e,n,i){return Ne(t,e,n(Zt(t,e)),i)}function je(t,e,n,i){for(var r=t.length,o=i?r:-1;(i?o--:++o<r)&&e(t[o],o,t););return n?Oe(t,i?0:o,i?o+1:r):Oe(t,i?o+1:0,i?r:o)}function Be(t,e){var n=t;return n instanceof mt&&(n=n.value()),Iu(e,function(t,e){return e.func.apply(e.thisArg,_u([t],e.args))},n)}function Ue(t,e,n){var i=t.length;if(i<2)return i?qe(t[0]):[];for(var r=-1,o=C(i);++r<i;)for(var s=t[r],a=-1;++a<i;)a!=r&&(o[r]=kt(o[r]||s,t[a],e,n));return qe(Yt(o,1),e,n)}function Ve(t,e,n){for(var i=-1,r=t.length,o=e.length,s={};++i<r;){var a=i<o?e[i]:es;n(s,t[i],a)}return s}function Ye(t){return _r(t)?t:[]}function Xe(t){return"function"==typeof t?t:To}function We(t,e){return xr(t)?t:Jn(t,e)?[t]:li(Wr(t))}var He=be;function Je(t,e,n){var i=t.length;return n=n===es?i:n,!e&&i<=n?t:Oe(t,e,n)}var Ke=F||function(t){return ou.clearTimeout(t)};function Ze(t,e){if(e)return t.slice();var n=t.length,i=I?I(n):new t.constructor(n);return t.copy(i),i}function Qe(t){var e=new t.constructor(t.byteLength);return new _(e).set(new _(t)),e}function $e(t,e){var n=e?Qe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function tn(t,e){if(t!==e){var n=t!==es,i=null===t,r=t==t,o=Gr(t),s=e!==es,a=null===e,u=e==e,h=Gr(e);if(!a&&!h&&!o&&e<t||o&&s&&u&&!a&&!h||i&&s&&u||!n&&u||!r)return 1;if(!i&&!o&&!h&&t<e||h&&n&&r&&!i&&!o||a&&n&&r||!s&&r||!u)return-1}return 0}function en(t,e,n,i){for(var r=-1,o=t.length,s=n.length,a=-1,u=e.length,h=X(o-s,0),c=C(u+h),l=!i;++a<u;)c[a]=e[a];for(;++r<s;)(l||r<o)&&(c[n[r]]=t[r]);for(;h--;)c[a++]=t[r++];return c}function nn(t,e,n,i){for(var r=-1,o=t.length,s=-1,a=n.length,u=-1,h=e.length,c=X(o-a,0),l=C(c+h),f=!i;++r<c;)l[r]=t[r];for(var d=r;++u<h;)l[d+u]=e[u];for(;++s<a;)(f||r<o)&&(l[d+n[s]]=t[r++]);return l}function rn(t,e){var n=-1,i=t.length;for(e||(e=C(i));++n<i;)e[n]=t[n];return e}function on(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],u=i?i(n[a],t[a],a,n,t):es;u===es&&(u=t[a]),r?Tt(n,a,u):Lt(n,a,u)}return n}function sn(r,o){return function(t,e){var n=xr(t)?gu:Ot,i=o?o():{};return n(t,r,Gn(e,2),i)}}function an(a){return be(function(t,e){var n=-1,i=e.length,r=1<i?e[i-1]:es,o=2<i?e[2]:es;for(r=3<a.length&&"function"==typeof r?(i--,r):es,o&&Hn(e[0],e[1],o)&&(r=i<3?es:r,i=1),t=b(t);++n<i;){var s=e[n];s&&a(t,s,n,r)}return t})}function un(o,s){return function(t,e){if(null==t)return t;if(!wr(t))return o(t,e);for(var n=t.length,i=s?n:-1,r=b(t);(s?i--:++i<n)&&!1!==e(r[i],i,r););return t}}function hn(u){return function(t,e,n){for(var i=-1,r=b(t),o=n(t),s=o.length;s--;){var a=o[u?s:++i];if(!1===e(r[a],a,r))break}return t}}function cn(r){return function(t){var e=Vu(t=Wr(t))?Zu(t):es,n=e?e[0]:t.charAt(0),i=e?Je(e,1).join(""):t.slice(1);return n[r]()+i}}function ln(e){return function(t){return Iu(No(xo(t).replace(Ja,"")),e,"")}}function fn(i){return function(){var t=arguments;switch(t.length){case 0:return new i;case 1:return new i(t[0]);case 2:return new i(t[0],t[1]);case 3:return new i(t[0],t[1],t[2]);case 4:return new i(t[0],t[1],t[2],t[3]);case 5:return new i(t[0],t[1],t[2],t[3],t[4]);case 6:return new i(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new i(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=pt(i.prototype),n=i.apply(e,t);return Lr(n)?n:e}}function dn(s){return function(t,e,n){var i=b(t);if(!wr(t)){var r=Gn(e,3);t=so(t),e=function(t){return r(i[t],t,i)}}var o=s(t,e,n);return-1<o?i[r?t[o]:o]:es}}function gn(u){return On(function(r){var o=r.length,t=o,e=yt.prototype.thru;for(u&&r.reverse();t--;){var n=r[t];if("function"!=typeof n)throw new L(rs);if(e&&!s&&"wrapper"==Dn(n))var s=new yt([],!0)}for(t=s?t:o;++t<o;){var i=Dn(n=r[t]),a="wrapper"==i?An(n):es;s=a&&Kn(a[0])&&a[1]==(Es|vs|ms|ws)&&!a[4].length&&1==a[9]?s[Dn(a[0])].apply(s,a[3]):1==n.length&&Kn(n)?s[i]():s.thru(n)}return function(){var t=arguments,e=t[0];if(s&&1==t.length&&xr(e))return s.plant(e).value();for(var n=0,i=o?r[n].apply(this,t):e;++n<o;)i=r[n].call(this,i);return i}})}function pn(h,c,l,f,d,g,p,v,y,m){var x=c&Es,E=c&ds,w=c&gs,_=c&(vs|ys),I=c&_s,b=w?es:fn(h);return function t(){for(var e=arguments.length,n=C(e),i=e;i--;)n[i]=arguments[i];if(_)var r=Fn(t),o=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(n,r);if(f&&(n=en(n,f,d,_)),g&&(n=nn(n,g,p,_)),e-=o,_&&e<m){var s=Wu(n,r);return _n(h,c,pn,t.placeholder,l,n,s,v,y,m-e)}var a=E?l:this,u=w?a[h]:h;return e=n.length,v?n=function(t,e){for(var n=t.length,i=W(e.length,n),r=rn(t);i--;){var o=e[i];t[i]=Wn(o,n)?r[o]:es}return t}(n,v):I&&1<e&&n.reverse(),x&&y<e&&(n.length=y),this&&this!==ou&&this instanceof t&&(u=b||fn(u)),u.apply(a,n)}}function vn(s,a){return function(t,e){return n=t,i=s,r=a(e),o={},Ht(n,function(t,e,n){i(o,r(t),e,n)}),o;var n,i,r,o}}function yn(i,r){return function(t,e){var n;if(t===es&&e===es)return r;if(t!==es&&(n=t),e!==es){if(n===es)return e;"string"==typeof t||"string"==typeof e?(t=Ge(t),e=Ge(e)):(t=Fe(t),e=Fe(e)),n=i(t,e)}return n}}function mn(i){return On(function(t){return t=wu(t,Fu(Gn())),be(function(e){var n=this;return i(t,function(t){return du(t,n,e)})})})}function xn(t,e){var n=(e=e===es?" ":Ge(e)).length;if(n<2)return n?Ie(e,t):e;var i=Ie(e,k(t/Ku(e)));return Vu(e)?Je(Zu(i),0,t).join(""):i.slice(0,t)}function En(i){return function(t,e,n){return n&&"number"!=typeof n&&Hn(t,e,n)&&(e=n=es),t=Br(t),e===es?(e=t,t=0):e=Br(e),function(t,e,n,i){for(var r=-1,o=X(k((e-t)/(n||1)),0),s=C(o);o--;)s[i?o:++r]=t,t+=n;return s}(t,e,n=n===es?t<e?1:-1:Br(n),i)}}function wn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=Yr(t),e=Yr(e)),n(t,e)}}function _n(t,e,n,i,r,o,s,a,u,h){var c=e&vs;e|=c?ms:xs,(e&=~(c?xs:ms))&ps||(e&=~(ds|gs));var l=[t,e,r,c?o:es,c?s:es,c?es:o,c?es:s,a,u,h],f=n.apply(es,l);return Kn(t)&&ii(f,l),f.placeholder=i,si(f,t,e)}function In(t){var i=o[t];return function(t,e){if(t=Yr(t),e=null==e?0:W(Ur(e),292)){var n=(Wr(t)+"e").split("e");return+((n=(Wr(i(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return i(t)}}var bn=et&&1/Ju(new et([,-0]))[1]==Ls?function(t){return new et(t)}:qo;function Mn(s){return function(t){var e,n,i,r,o=Un(t);return o==Xs?Yu(t):o==$s?(e=t,n=-1,i=Array(e.size),e.forEach(function(t){i[++n]=[t,t]}),i):wu(s(r=t),function(t){return[t,r[t]]})}}function Sn(t,e,n,i,r,o,s,a){var u=e&gs;if(!u&&"function"!=typeof t)throw new L(rs);var h=i?i.length:0;if(h||(e&=~(ms|xs),i=r=es),s=s===es?s:X(Ur(s),0),a=a===es?a:Ur(a),h-=r?r.length:0,e&xs){var c=i,l=r;i=r=es}var f,d,g,p,v,y,m,x,E,w,_,I,b,M=u?es:An(t),S=[t,e,n,i,r,c,l,o,s,a];if(M&&function(t,e){var n=t[1],i=e[1],r=n|i,o=r<(ds|gs|Es),s=i==Es&&n==vs||i==Es&&n==ws&&t[7].length<=e[8]||i==(Es|ws)&&e[7].length<=e[8]&&n==vs;if(o||s){i&ds&&(t[2]=e[2],r|=n&ds?0:ps);var a=e[3];if(a){var u=t[3];t[3]=u?en(u,a,e[4]):a,t[4]=u?Wu(t[3],as):e[4]}(a=e[5])&&(u=t[5],t[5]=u?nn(u,a,e[6]):a,t[6]=u?Wu(t[5],as):e[6]),(a=e[7])&&(t[7]=a),i&Es&&(t[8]=null==t[8]?e[8]:W(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}}(S,M),t=S[0],e=S[1],n=S[2],i=S[3],r=S[4],!(a=S[9]=S[9]===es?u?0:t.length:X(S[9]-h,0))&&e&(vs|ys)&&(e&=~(vs|ys)),e&&e!=ds)e==vs||e==ys?(m=e,x=a,E=fn(y=t),N=function t(){for(var e=arguments.length,n=C(e),i=e,r=Fn(t);i--;)n[i]=arguments[i];var o=e<3&&n[0]!==r&&n[e-1]!==r?[]:Wu(n,r);return(e-=o.length)<x?_n(y,m,pn,t.placeholder,es,n,o,es,es,x-e):du(this&&this!==ou&&this instanceof t?E:y,this,n)}):e!=ms&&e!=(ds|ms)||r.length?N=pn.apply(es,S):(d=n,g=i,p=e&ds,v=fn(f=t),N=function t(){for(var e=-1,n=arguments.length,i=-1,r=g.length,o=C(r+n),s=this&&this!==ou&&this instanceof t?v:f;++i<r;)o[i]=g[i];for(;n--;)o[i++]=arguments[++e];return du(s,p?d:this,o)});else var N=(_=n,I=e&ds,b=fn(w=t),function t(){return(this&&this!==ou&&this instanceof t?b:w).apply(I?_:this,arguments)});return si((M?Ce:ii)(N,S),t,e)}function Nn(t,e,n,i){return t===es||pr(t,l[n])&&!M.call(i,n)?e:t}function Cn(t,e,n,i,r,o){return Lr(t)&&Lr(e)&&(o.set(e,t),ve(t,e,es,Cn,o),o.delete(e)),t}function Ln(t){return Tr(t)?es:t}function Pn(t,e,n,i,r,o){var s=n&ls,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var h=o.get(t);if(h&&o.get(e))return h==e;var c=-1,l=!0,f=n&fs?new _t:es;for(o.set(t,e),o.set(e,t);++c<a;){var d=t[c],g=e[c];if(i)var p=s?i(g,d,c,e,t,o):i(d,g,c,t,e,o);if(p!==es){if(p)continue;l=!1;break}if(f){if(!Mu(e,function(t,e){if(!qu(f,e)&&(d===t||r(d,t,n,i,o)))return f.push(e)})){l=!1;break}}else if(d!==g&&!r(d,g,n,i,o)){l=!1;break}}return o.delete(t),o.delete(e),l}function On(t){return oi(ei(t,es,Ei),t+"")}function Rn(t){return Qt(t,so,jn)}function Tn(t){return Qt(t,ao,Bn)}var An=rt?function(t){return rt.get(t)}:qo;function Dn(t){for(var e=t.name+"",n=ot[e],i=M.call(ot,e)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==t)return r.name}return e}function Fn(t){return(M.call(gt,"placeholder")?gt:t).placeholder}function Gn(){var t=gt.iteratee||Ao;return t=t===Ao?he:t,arguments.length?t(arguments[0],arguments[1]):t}function qn(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function kn(t){for(var e=so(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,$n(r)]}return e}function zn(t,e){var n,i,r=(i=e,null==(n=t)?es:n[i]);return ue(r)?r:es}var jn=j?function(e){return null==e?[]:(e=b(e),mu(j(e),function(t){return P.call(e,t)}))}:Yo,Bn=j?function(t){for(var e=[];t;)_u(e,jn(t)),t=S(t);return e}:Yo,Un=$t;function Vn(t,e,n){for(var i=-1,r=(e=We(e,t)).length,o=!1;++i<r;){var s=fi(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Cr(r)&&Wn(s,r)&&(xr(t)||mr(t))}function Yn(t){return"function"!=typeof t.constructor||Qn(t)?{}:pt(S(t))}function Xn(t){return xr(t)||mr(t)||!!(R&&t&&t[R])}function Wn(t,e){var n=typeof t;return!!(e=null==e?Ps:e)&&("number"==n||"symbol"!=n&&Ya.test(t))&&-1<t&&t%1==0&&t<e}function Hn(t,e,n){if(!Lr(n))return!1;var i=typeof e;return!!("number"==i?wr(n)&&Wn(e,n.length):"string"==i&&e in n)&&pr(n[e],t)}function Jn(t,e){if(xr(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Gr(t))||Na.test(t)||!Sa.test(t)||null!=e&&t in b(e)}function Kn(t){var e=Dn(t),n=gt[e];if("function"!=typeof n||!(e in mt.prototype))return!1;if(t===n)return!0;var i=An(n);return!!i&&t===i[0]}(Q&&Un(new Q(new ArrayBuffer(1)))!=sa||$&&Un(new $)!=Xs||tt&&Un(tt.resolve())!=Ks||et&&Un(new et)!=$s||nt&&Un(new nt)!=ia)&&(Un=function(t){var e=$t(t),n=e==Js?t.constructor:es,i=n?di(n):"";if(i)switch(i){case st:return sa;case at:return Xs;case ut:return Ks;case ht:return $s;case ct:return ia}return e});var Zn=u?Sr:Xo;function Qn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||l)}function $n(t){return t==t&&!Lr(t)}function ti(e,n){return function(t){return null!=t&&t[e]===n&&(n!==es||e in b(t))}}function ei(o,s,a){return s=X(s===es?o.length-1:s,0),function(){for(var t=arguments,e=-1,n=X(t.length-s,0),i=C(n);++e<n;)i[e]=t[s+e];e=-1;for(var r=C(s+1);++e<s;)r[e]=t[e];return r[s]=a(i),du(o,this,r)}}function ni(t,e){return e.length<2?t:Zt(t,Oe(e,0,-1))}var ii=ai(Ce),ri=q||function(t,e){return ou.setTimeout(t,e)},oi=ai(Le);function si(t,e,n){var i,r,o,s=e+"";return oi(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(1<n?"& ":"")+e[i],e=e.join(2<n?", ":" "),t.replace(Aa,"{\n/* [wrapped with "+e+"] */\n")}(s,(o=s.match(Da),i=o?o[1].split(Fa):[],r=n,pu(Fs,function(t){var e="_."+t[0];r&t[1]&&!xu(i,e)&&i.push(e)}),i.sort())))}function ai(n){var i=0,r=0;return function(){var t=H(),e=Ss-(t-r);if(r=t,0<e){if(++i>=Ms)return arguments[0]}else i=0;return n.apply(es,arguments)}}function ui(t,e){var n=-1,i=t.length,r=i-1;for(e=e===es?i:e;++n<e;){var o=_e(n,r),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var hi,ci,li=(hi=hr(function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(Ca,function(t,e,n,i){r.push(n?i.replace(qa,"$1"):e||t)}),r},function(t){return ci.size===ss&&ci.clear(),t}),ci=hi.cache,hi);function fi(t){if("string"==typeof t||Gr(t))return t;var e=t+"";return"0"==e&&1/t==-Ls?"-0":e}function di(t){if(null!=t){try{return h.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function gi(t){if(t instanceof mt)return t.clone();var e=new yt(t.__wrapped__,t.__chain__);return e.__actions__=rn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var pi=be(function(t,e){return _r(t)?kt(t,Yt(e,1,_r,!0)):[]}),vi=be(function(t,e){var n=Mi(e);return _r(n)&&(n=es),_r(t)?kt(t,Yt(e,1,_r,!0),Gn(n,2)):[]}),yi=be(function(t,e){var n=Mi(e);return _r(n)&&(n=es),_r(t)?kt(t,Yt(e,1,_r,!0),es,n):[]});function mi(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ur(n);return r<0&&(r=X(i+r,0)),Nu(t,Gn(e,3),r)}function xi(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==es&&(r=Ur(n),r=n<0?X(i+r,0):W(r,i-1)),Nu(t,Gn(e,3),r,!0)}function Ei(t){return null!=t&&t.length?Yt(t,1):[]}function wi(t){return t&&t.length?t[0]:es}var _i=be(function(t){var e=wu(t,Ye);return e.length&&e[0]===t[0]?ie(e):[]}),Ii=be(function(t){var e=Mi(t),n=wu(t,Ye);return e===Mi(n)?e=es:n.pop(),n.length&&n[0]===t[0]?ie(n,Gn(e,2)):[]}),bi=be(function(t){var e=Mi(t),n=wu(t,Ye);return(e="function"==typeof e?e:es)&&n.pop(),n.length&&n[0]===t[0]?ie(n,es,e):[]});function Mi(t){var e=null==t?0:t.length;return e?t[e-1]:es}var Si=be(Ni);function Ni(t,e){return t&&t.length&&e&&e.length?Ee(t,e):t}var Ci=On(function(t,e){var n=null==t?0:t.length,i=At(t,e);return we(t,wu(e,function(t){return Wn(t,n)?+t:t}).sort(tn)),i});function Li(t){return null==t?t:Z.call(t)}var Pi=be(function(t){return qe(Yt(t,1,_r,!0))}),Oi=be(function(t){var e=Mi(t);return _r(e)&&(e=es),qe(Yt(t,1,_r,!0),Gn(e,2))}),Ri=be(function(t){var e=Mi(t);return e="function"==typeof e?e:es,qe(Yt(t,1,_r,!0),es,e)});function Ti(e){if(!e||!e.length)return[];var n=0;return e=mu(e,function(t){if(_r(t))return n=X(t.length,n),!0}),Du(n,function(t){return wu(e,Ru(t))})}function Ai(t,e){if(!t||!t.length)return[];var n=Ti(t);return null==e?n:wu(n,function(t){return du(e,es,t)})}var Di=be(function(t,e){return _r(t)?kt(t,e):[]}),Fi=be(function(t){return Ue(mu(t,_r))}),Gi=be(function(t){var e=Mi(t);return _r(e)&&(e=es),Ue(mu(t,_r),Gn(e,2))}),qi=be(function(t){var e=Mi(t);return e="function"==typeof e?e:es,Ue(mu(t,_r),es,e)}),ki=be(Ti);var zi=be(function(t){var e=t.length,n=1<e?t[e-1]:es;return Ai(t,n="function"==typeof n?(t.pop(),n):es)});function ji(t){var e=gt(t);return e.__chain__=!0,e}function Bi(t,e){return e(t)}var Ui=On(function(e){var n=e.length,t=n?e[0]:0,i=this.__wrapped__,r=function(t){return At(t,e)};return!(1<n||this.__actions__.length)&&i instanceof mt&&Wn(t)?((i=i.slice(t,+t+(n?1:0))).__actions__.push({func:Bi,args:[r],thisArg:es}),new yt(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(es),t})):this.thru(r)});var Vi=sn(function(t,e,n){M.call(t,n)?++t[n]:Tt(t,n,1)});var Yi=dn(mi),Xi=dn(xi);function Wi(t,e){return(xr(t)?pu:zt)(t,Gn(e,3))}function Hi(t,e){return(xr(t)?vu:jt)(t,Gn(e,3))}var Ji=sn(function(t,e,n){M.call(t,n)?t[n].push(e):Tt(t,n,[e])});var Ki=be(function(t,e,n){var i=-1,r="function"==typeof e,o=wr(t)?C(t.length):[];return zt(t,function(t){o[++i]=r?du(e,t,n):re(t,e,n)}),o}),Zi=sn(function(t,e,n){Tt(t,n,e)});function Qi(t,e){return(xr(t)?wu:de)(t,Gn(e,3))}var $i=sn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var tr=be(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Hn(t,e[0],e[1])?e=[]:2<n&&Hn(e[0],e[1],e[2])&&(e=[e[0]]),me(t,Yt(e,1),[])}),er=G||function(){return ou.Date.now()};function nr(t,e,n){return e=n?es:e,e=t&&null==e?t.length:e,Sn(t,Es,es,es,es,es,e)}function ir(t,e){var n;if("function"!=typeof e)throw new L(rs);return t=Ur(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=es),n}}var rr=be(function(t,e,n){var i=ds;if(n.length){var r=Wu(n,Fn(rr));i|=ms}return Sn(t,i,e,n,r)}),or=be(function(t,e,n){var i=ds|gs;if(n.length){var r=Wu(n,Fn(or));i|=ms}return Sn(e,i,t,n,r)});function sr(i,r,t){var o,s,a,u,h,c,l=0,f=!1,d=!1,e=!0;if("function"!=typeof i)throw new L(rs);function g(t){var e=o,n=s;return o=s=es,l=t,u=i.apply(n,e)}function p(t){var e=t-c;return c===es||r<=e||e<0||d&&a<=t-l}function v(){var t,e,n=er();if(p(n))return y(n);h=ri(v,(e=r-((t=n)-c),d?W(e,a-(t-l)):e))}function y(t){return h=es,e&&o?g(t):(o=s=es,u)}function n(){var t,e=er(),n=p(e);if(o=arguments,s=this,c=e,n){if(h===es)return l=t=c,h=ri(v,r),f?g(t):u;if(d)return h=ri(v,r),g(c)}return h===es&&(h=ri(v,r)),u}return r=Yr(r)||0,Lr(t)&&(f=!!t.leading,a=(d="maxWait"in t)?X(Yr(t.maxWait)||0,r):a,e="trailing"in t?!!t.trailing:e),n.cancel=function(){h!==es&&Ke(h),l=0,o=c=s=h=es},n.flush=function(){return h===es?u:y(er())},n}var ar=be(function(t,e){return qt(t,1,e)}),ur=be(function(t,e,n){return qt(t,Yr(e)||0,n)});function hr(r,o){if("function"!=typeof r||null!=o&&"function"!=typeof o)throw new L(rs);var s=function(){var t=arguments,e=o?o.apply(this,t):t[0],n=s.cache;if(n.has(e))return n.get(e);var i=r.apply(this,t);return s.cache=n.set(e,i)||n,i};return s.cache=new(hr.Cache||wt),s}function cr(e){if("function"!=typeof e)throw new L(rs);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}hr.Cache=wt;var lr=He(function(i,r){var o=(r=1==r.length&&xr(r[0])?wu(r[0],Fu(Gn())):wu(Yt(r,1),Fu(Gn()))).length;return be(function(t){for(var e=-1,n=W(t.length,o);++e<n;)t[e]=r[e].call(this,t[e]);return du(i,this,t)})}),fr=be(function(t,e){var n=Wu(e,Fn(fr));return Sn(t,ms,es,e,n)}),dr=be(function(t,e){var n=Wu(e,Fn(dr));return Sn(t,xs,es,e,n)}),gr=On(function(t,e){return Sn(t,ws,es,es,es,e)});function pr(t,e){return t===e||t!=t&&e!=e}var vr=wn(te),yr=wn(function(t,e){return e<=t}),mr=oe(function(){return arguments}())?oe:function(t){return Pr(t)&&M.call(t,"callee")&&!P.call(t,"callee")},xr=C.isArray,Er=au?Fu(au):function(t){return Pr(t)&&$t(t)==oa};function wr(t){return null!=t&&Cr(t.length)&&!Sr(t)}function _r(t){return Pr(t)&&wr(t)}var Ir=B||Xo,br=uu?Fu(uu):function(t){return Pr(t)&&$t(t)==js};function Mr(t){if(!Pr(t))return!1;var e=$t(t);return e==Us||e==Bs||"string"==typeof t.message&&"string"==typeof t.name&&!Tr(t)}function Sr(t){if(!Lr(t))return!1;var e=$t(t);return e==Vs||e==Ys||e==ks||e==Zs}function Nr(t){return"number"==typeof t&&t==Ur(t)}function Cr(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=Ps}function Lr(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pr(t){return null!=t&&"object"==typeof t}var Or=hu?Fu(hu):function(t){return Pr(t)&&Un(t)==Xs};function Rr(t){return"number"==typeof t||Pr(t)&&$t(t)==Ws}function Tr(t){if(!Pr(t)||$t(t)!=Js)return!1;var e=S(t);if(null===e)return!0;var n=M.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&h.call(n)==p}var Ar=cu?Fu(cu):function(t){return Pr(t)&&$t(t)==Qs};var Dr=lu?Fu(lu):function(t){return Pr(t)&&Un(t)==$s};function Fr(t){return"string"==typeof t||!xr(t)&&Pr(t)&&$t(t)==ta}function Gr(t){return"symbol"==typeof t||Pr(t)&&$t(t)==ea}var qr=fu?Fu(fu):function(t){return Pr(t)&&Cr(t.length)&&!!eu[$t(t)]};var kr=wn(fe),zr=wn(function(t,e){return t<=e});function jr(t){if(!t)return[];if(wr(t))return Fr(t)?Zu(t):rn(t);if(T&&t[T])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[T]());var e=Un(t);return(e==Xs?Yu:e==$s?Ju:vo)(t)}function Br(t){return t?(t=Yr(t))===Ls||t===-Ls?(t<0?-1:1)*Os:t==t?t:0:0===t?t:0}function Ur(t){var e=Br(t),n=e%1;return e==e?n?e-n:e:0}function Vr(t){return t?Dt(Ur(t),0,Ts):0}function Yr(t){if("number"==typeof t)return t;if(Gr(t))return Rs;if(Lr(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Lr(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Oa,"");var n=Ba.test(t);return n||Va.test(t)?ru(t.slice(2),n?2:8):ja.test(t)?Rs:+t}function Xr(t){return on(t,ao(t))}function Wr(t){return null==t?"":Ge(t)}var Hr=an(function(t,e){if(Qn(e)||wr(e))on(e,so(e),t);else for(var n in e)M.call(e,n)&&Lt(t,n,e[n])}),Jr=an(function(t,e){on(e,ao(e),t)}),Kr=an(function(t,e,n,i){on(e,ao(e),t,i)}),Zr=an(function(t,e,n,i){on(e,so(e),t,i)}),Qr=On(At);var $r=be(function(t,e){t=b(t);var n=-1,i=e.length,r=2<i?e[2]:es;for(r&&Hn(e[0],e[1],r)&&(i=1);++n<i;)for(var o=e[n],s=ao(o),a=-1,u=s.length;++a<u;){var h=s[a],c=t[h];(c===es||pr(c,l[h])&&!M.call(t,h))&&(t[h]=o[h])}return t}),to=be(function(t){return t.push(es,Cn),du(ho,es,t)});function eo(t,e,n){var i=null==t?es:Zt(t,e);return i===es?n:i}function no(t,e){return null!=t&&Vn(t,e,ne)}var io=vn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=g.call(e)),t[e]=n},Po(To)),ro=vn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=g.call(e)),M.call(t,e)?t[e].push(n):t[e]=[n]},Gn),oo=be(re);function so(t){return wr(t)?bt(t):ce(t)}function ao(t){return wr(t)?bt(t,!0):le(t)}var uo=an(function(t,e,n){ve(t,e,n)}),ho=an(function(t,e,n,i){ve(t,e,n,i)}),co=On(function(e,t){var n={};if(null==e)return n;var i=!1;t=wu(t,function(t){return t=We(t,e),i||(i=1<t.length),t}),on(e,Tn(e),n),i&&(n=Ft(n,us|hs|cs,Ln));for(var r=t.length;r--;)ke(n,t[r]);return n});var lo=On(function(t,e){return null==t?{}:xe(n=t,e,function(t,e){return no(n,e)});var n});function fo(t,n){if(null==t)return{};var e=wu(Tn(t),function(t){return[t]});return n=Gn(n),xe(t,e,function(t,e){return n(t,e[0])})}var go=Mn(so),po=Mn(ao);function vo(t){return null==t?[]:Gu(t,so(t))}var yo=ln(function(t,e,n){return e=e.toLowerCase(),t+(n?mo(e):e)});function mo(t){return So(Wr(t).toLowerCase())}function xo(t){return(t=Wr(t))&&t.replace(Xa,ju).replace(Ka,"")}var Eo=ln(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),wo=ln(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),_o=cn("toLowerCase");var Io=ln(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var bo=ln(function(t,e,n){return t+(n?" ":"")+So(e)});var Mo=ln(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),So=cn("toUpperCase");function No(t,e,n){return t=Wr(t),(e=n?es:e)===es?(i=t,Qa.test(i)?t.match(Za)||[]:t.match(Ga)||[]):t.match(e)||[];var i}var Co=be(function(t,e){try{return du(t,es,e)}catch(t){return Mr(t)?t:new r(t)}}),Lo=On(function(e,t){return pu(t,function(t){t=fi(t),Tt(e,t,rr(e[t],e))}),e});function Po(t){return function(){return t}}var Oo=gn(),Ro=gn(!0);function To(t){return t}function Ao(t){return he("function"==typeof t?t:Ft(t,us))}var Do=be(function(e,n){return function(t){return re(t,e,n)}}),Fo=be(function(e,n){return function(t){return re(e,t,n)}});function Go(i,e,t){var n=so(e),r=Kt(e,n);null!=t||Lr(e)&&(r.length||!n.length)||(t=e,e=i,i=this,r=Kt(e,so(e)));var o=!(Lr(t)&&"chain"in t&&!t.chain),s=Sr(i);return pu(r,function(t){var n=e[t];i[t]=n,s&&(i.prototype[t]=function(){var t=this.__chain__;if(o||t){var e=i(this.__wrapped__);return(e.__actions__=rn(this.__actions__)).push({func:n,args:arguments,thisArg:i}),e.__chain__=t,e}return n.apply(i,_u([this.value()],arguments))})}),i}function qo(){}var ko=mn(wu),zo=mn(yu),jo=mn(Mu);function Bo(t){return Jn(t)?Ru(fi(t)):(e=t,function(t){return Zt(t,e)});var e}var Uo=En(),Vo=En(!0);function Yo(){return[]}function Xo(){return!1}var Wo=yn(function(t,e){return t+e},0),Ho=In("ceil"),Jo=yn(function(t,e){return t/e},1),Ko=In("floor");var Zo,Qo=yn(function(t,e){return t*e},1),$o=In("round"),ts=yn(function(t,e){return t-e},0);return gt.after=function(t,e){if("function"!=typeof e)throw new L(rs);return t=Ur(t),function(){if(--t<1)return e.apply(this,arguments)}},gt.ary=nr,gt.assign=Hr,gt.assignIn=Jr,gt.assignInWith=Kr,gt.assignWith=Zr,gt.at=Qr,gt.before=ir,gt.bind=rr,gt.bindAll=Lo,gt.bindKey=or,gt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return xr(t)?t:[t]},gt.chain=ji,gt.chunk=function(t,e,n){e=(n?Hn(t,e,n):e===es)?1:X(Ur(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,o=0,s=C(k(i/e));r<i;)s[o++]=Oe(t,r,r+=e);return s},gt.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var o=t[e];o&&(r[i++]=o)}return r},gt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=C(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return _u(xr(n)?rn(n):[n],Yt(e,1))},gt.cond=function(i){var r=null==i?0:i.length,e=Gn();return i=r?wu(i,function(t){if("function"!=typeof t[1])throw new L(rs);return[e(t[0]),t[1]]}):[],be(function(t){for(var e=-1;++e<r;){var n=i[e];if(du(n[0],this,t))return du(n[1],this,t)}})},gt.conforms=function(t){return e=Ft(t,us),n=so(e),function(t){return Gt(t,e,n)};var e,n},gt.constant=Po,gt.countBy=Vi,gt.create=function(t,e){var n=pt(t);return null==e?n:Rt(n,e)},gt.curry=function t(e,n,i){var r=Sn(e,vs,es,es,es,es,es,n=i?es:n);return r.placeholder=t.placeholder,r},gt.curryRight=function t(e,n,i){var r=Sn(e,ys,es,es,es,es,es,n=i?es:n);return r.placeholder=t.placeholder,r},gt.debounce=sr,gt.defaults=$r,gt.defaultsDeep=to,gt.defer=ar,gt.delay=ur,gt.difference=pi,gt.differenceBy=vi,gt.differenceWith=yi,gt.drop=function(t,e,n){var i=null==t?0:t.length;return i?Oe(t,(e=n||e===es?1:Ur(e))<0?0:e,i):[]},gt.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?Oe(t,0,(e=i-(e=n||e===es?1:Ur(e)))<0?0:e):[]},gt.dropRightWhile=function(t,e){return t&&t.length?je(t,Gn(e,3),!0,!0):[]},gt.dropWhile=function(t,e){return t&&t.length?je(t,Gn(e,3),!0):[]},gt.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Hn(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=Ur(n))<0&&(n=r<-n?0:r+n),(i=i===es||r<i?r:Ur(i))<0&&(i+=r),i=i<n?0:Vr(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},gt.filter=function(t,e){return(xr(t)?mu:Vt)(t,Gn(e,3))},gt.flatMap=function(t,e){return Yt(Qi(t,e),1)},gt.flatMapDeep=function(t,e){return Yt(Qi(t,e),Ls)},gt.flatMapDepth=function(t,e,n){return n=n===es?1:Ur(n),Yt(Qi(t,e),n)},gt.flatten=Ei,gt.flattenDeep=function(t){return null!=t&&t.length?Yt(t,Ls):[]},gt.flattenDepth=function(t,e){return null!=t&&t.length?Yt(t,e=e===es?1:Ur(e)):[]},gt.flip=function(t){return Sn(t,_s)},gt.flow=Oo,gt.flowRight=Ro,gt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},gt.functions=function(t){return null==t?[]:Kt(t,so(t))},gt.functionsIn=function(t){return null==t?[]:Kt(t,ao(t))},gt.groupBy=Ji,gt.initial=function(t){return null!=t&&t.length?Oe(t,0,-1):[]},gt.intersection=_i,gt.intersectionBy=Ii,gt.intersectionWith=bi,gt.invert=io,gt.invertBy=ro,gt.invokeMap=Ki,gt.iteratee=Ao,gt.keyBy=Zi,gt.keys=so,gt.keysIn=ao,gt.map=Qi,gt.mapKeys=function(t,i){var r={};return i=Gn(i,3),Ht(t,function(t,e,n){Tt(r,i(t,e,n),t)}),r},gt.mapValues=function(t,i){var r={};return i=Gn(i,3),Ht(t,function(t,e,n){Tt(r,e,i(t,e,n))}),r},gt.matches=function(t){return ge(Ft(t,us))},gt.matchesProperty=function(t,e){return pe(t,Ft(e,us))},gt.memoize=hr,gt.merge=uo,gt.mergeWith=ho,gt.method=Do,gt.methodOf=Fo,gt.mixin=Go,gt.negate=cr,gt.nthArg=function(e){return e=Ur(e),be(function(t){return ye(t,e)})},gt.omit=co,gt.omitBy=function(t,e){return fo(t,cr(Gn(e)))},gt.once=function(t){return ir(2,t)},gt.orderBy=function(t,e,n,i){return null==t?[]:(xr(e)||(e=null==e?[]:[e]),xr(n=i?es:n)||(n=null==n?[]:[n]),me(t,e,n))},gt.over=ko,gt.overArgs=lr,gt.overEvery=zo,gt.overSome=jo,gt.partial=fr,gt.partialRight=dr,gt.partition=$i,gt.pick=lo,gt.pickBy=fo,gt.property=Bo,gt.propertyOf=function(e){return function(t){return null==e?es:Zt(e,t)}},gt.pull=Si,gt.pullAll=Ni,gt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Ee(t,e,Gn(n,2)):t},gt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Ee(t,e,es,n):t},gt.pullAt=Ci,gt.range=Uo,gt.rangeRight=Vo,gt.rearg=gr,gt.reject=function(t,e){return(xr(t)?mu:Vt)(t,cr(Gn(e,3)))},gt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],o=t.length;for(e=Gn(e,3);++i<o;){var s=t[i];e(s,i,t)&&(n.push(s),r.push(i))}return we(t,r),n},gt.rest=function(t,e){if("function"!=typeof t)throw new L(rs);return be(t,e=e===es?e:Ur(e))},gt.reverse=Li,gt.sampleSize=function(t,e,n){return e=(n?Hn(t,e,n):e===es)?1:Ur(e),(xr(t)?St:Se)(t,e)},gt.set=function(t,e,n){return null==t?t:Ne(t,e,n)},gt.setWith=function(t,e,n,i){return i="function"==typeof i?i:es,null==t?t:Ne(t,e,n,i)},gt.shuffle=function(t){return(xr(t)?Nt:Pe)(t)},gt.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Hn(t,e,n)?(e=0,n=i):(e=null==e?0:Ur(e),n=n===es?i:Ur(n)),Oe(t,e,n)):[]},gt.sortBy=tr,gt.sortedUniq=function(t){return t&&t.length?De(t):[]},gt.sortedUniqBy=function(t,e){return t&&t.length?De(t,Gn(e,2)):[]},gt.split=function(t,e,n){return n&&"number"!=typeof n&&Hn(t,e,n)&&(e=n=es),(n=n===es?Ts:n>>>0)?(t=Wr(t))&&("string"==typeof e||null!=e&&!Ar(e))&&!(e=Ge(e))&&Vu(t)?Je(Zu(t),0,n):t.split(e,n):[]},gt.spread=function(i,r){if("function"!=typeof i)throw new L(rs);return r=null==r?0:X(Ur(r),0),be(function(t){var e=t[r],n=Je(t,0,r);return e&&_u(n,e),du(i,this,n)})},gt.tail=function(t){var e=null==t?0:t.length;return e?Oe(t,1,e):[]},gt.take=function(t,e,n){return t&&t.length?Oe(t,0,(e=n||e===es?1:Ur(e))<0?0:e):[]},gt.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?Oe(t,(e=i-(e=n||e===es?1:Ur(e)))<0?0:e,i):[]},gt.takeRightWhile=function(t,e){return t&&t.length?je(t,Gn(e,3),!1,!0):[]},gt.takeWhile=function(t,e){return t&&t.length?je(t,Gn(e,3)):[]},gt.tap=function(t,e){return e(t),t},gt.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new L(rs);return Lr(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),sr(t,e,{leading:i,maxWait:e,trailing:r})},gt.thru=Bi,gt.toArray=jr,gt.toPairs=go,gt.toPairsIn=po,gt.toPath=function(t){return xr(t)?wu(t,fi):Gr(t)?[t]:rn(li(Wr(t)))},gt.toPlainObject=Xr,gt.transform=function(t,i,r){var e=xr(t),n=e||Ir(t)||qr(t);if(i=Gn(i,4),null==r){var o=t&&t.constructor;r=n?e?new o:[]:Lr(t)&&Sr(o)?pt(S(t)):{}}return(n?pu:Ht)(t,function(t,e,n){return i(r,t,e,n)}),r},gt.unary=function(t){return nr(t,1)},gt.union=Pi,gt.unionBy=Oi,gt.unionWith=Ri,gt.uniq=function(t){return t&&t.length?qe(t):[]},gt.uniqBy=function(t,e){return t&&t.length?qe(t,Gn(e,2)):[]},gt.uniqWith=function(t,e){return e="function"==typeof e?e:es,t&&t.length?qe(t,es,e):[]},gt.unset=function(t,e){return null==t||ke(t,e)},gt.unzip=Ti,gt.unzipWith=Ai,gt.update=function(t,e,n){return null==t?t:ze(t,e,Xe(n))},gt.updateWith=function(t,e,n,i){return i="function"==typeof i?i:es,null==t?t:ze(t,e,Xe(n),i)},gt.values=vo,gt.valuesIn=function(t){return null==t?[]:Gu(t,ao(t))},gt.without=Di,gt.words=No,gt.wrap=function(t,e){return fr(Xe(e),t)},gt.xor=Fi,gt.xorBy=Gi,gt.xorWith=qi,gt.zip=ki,gt.zipObject=function(t,e){return Ve(t||[],e||[],Lt)},gt.zipObjectDeep=function(t,e){return Ve(t||[],e||[],Ne)},gt.zipWith=zi,gt.entries=go,gt.entriesIn=po,gt.extend=Jr,gt.extendWith=Kr,Go(gt,gt),gt.add=Wo,gt.attempt=Co,gt.camelCase=yo,gt.capitalize=mo,gt.ceil=Ho,gt.clamp=function(t,e,n){return n===es&&(n=e,e=es),n!==es&&(n=(n=Yr(n))==n?n:0),e!==es&&(e=(e=Yr(e))==e?e:0),Dt(Yr(t),e,n)},gt.clone=function(t){return Ft(t,cs)},gt.cloneDeep=function(t){return Ft(t,us|cs)},gt.cloneDeepWith=function(t,e){return Ft(t,us|cs,e="function"==typeof e?e:es)},gt.cloneWith=function(t,e){return Ft(t,cs,e="function"==typeof e?e:es)},gt.conformsTo=function(t,e){return null==e||Gt(t,e,so(e))},gt.deburr=xo,gt.defaultTo=function(t,e){return null==t||t!=t?e:t},gt.divide=Jo,gt.endsWith=function(t,e,n){t=Wr(t),e=Ge(e);var i=t.length,r=n=n===es?i:Dt(Ur(n),0,i);return 0<=(n-=e.length)&&t.slice(n,r)==e},gt.eq=pr,gt.escape=function(t){return(t=Wr(t))&&_a.test(t)?t.replace(Ea,Bu):t},gt.escapeRegExp=function(t){return(t=Wr(t))&&Pa.test(t)?t.replace(La,"\\$&"):t},gt.every=function(t,e,n){var i=xr(t)?yu:Bt;return n&&Hn(t,e,n)&&(e=es),i(t,Gn(e,3))},gt.find=Yi,gt.findIndex=mi,gt.findKey=function(t,e){return Su(t,Gn(e,3),Ht)},gt.findLast=Xi,gt.findLastIndex=xi,gt.findLastKey=function(t,e){return Su(t,Gn(e,3),Jt)},gt.floor=Ko,gt.forEach=Wi,gt.forEachRight=Hi,gt.forIn=function(t,e){return null==t?t:Xt(t,Gn(e,3),ao)},gt.forInRight=function(t,e){return null==t?t:Wt(t,Gn(e,3),ao)},gt.forOwn=function(t,e){return t&&Ht(t,Gn(e,3))},gt.forOwnRight=function(t,e){return t&&Jt(t,Gn(e,3))},gt.get=eo,gt.gt=vr,gt.gte=yr,gt.has=function(t,e){return null!=t&&Vn(t,e,ee)},gt.hasIn=no,gt.head=wi,gt.identity=To,gt.includes=function(t,e,n,i){t=wr(t)?t:vo(t),n=n&&!i?Ur(n):0;var r=t.length;return n<0&&(n=X(r+n,0)),Fr(t)?n<=r&&-1<t.indexOf(e,n):!!r&&-1<Cu(t,e,n)},gt.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Ur(n);return r<0&&(r=X(i+r,0)),Cu(t,e,r)},gt.inRange=function(t,e,n){return e=Br(e),n===es?(n=e,e=0):n=Br(n),t=Yr(t),(i=t)>=W(r=e,o=n)&&i<X(r,o);var i,r,o},gt.invoke=oo,gt.isArguments=mr,gt.isArray=xr,gt.isArrayBuffer=Er,gt.isArrayLike=wr,gt.isArrayLikeObject=_r,gt.isBoolean=function(t){return!0===t||!1===t||Pr(t)&&$t(t)==zs},gt.isBuffer=Ir,gt.isDate=br,gt.isElement=function(t){return Pr(t)&&1===t.nodeType&&!Tr(t)},gt.isEmpty=function(t){if(null==t)return!0;if(wr(t)&&(xr(t)||"string"==typeof t||"function"==typeof t.splice||Ir(t)||qr(t)||mr(t)))return!t.length;var e=Un(t);if(e==Xs||e==$s)return!t.size;if(Qn(t))return!ce(t).length;for(var n in t)if(M.call(t,n))return!1;return!0},gt.isEqual=function(t,e){return se(t,e)},gt.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:es)?n(t,e):es;return i===es?se(t,e,es,n):!!i},gt.isError=Mr,gt.isFinite=function(t){return"number"==typeof t&&U(t)},gt.isFunction=Sr,gt.isInteger=Nr,gt.isLength=Cr,gt.isMap=Or,gt.isMatch=function(t,e){return t===e||ae(t,e,kn(e))},gt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:es,ae(t,e,kn(e),n)},gt.isNaN=function(t){return Rr(t)&&t!=+t},gt.isNative=function(t){if(Zn(t))throw new r(is);return ue(t)},gt.isNil=function(t){return null==t},gt.isNull=function(t){return null===t},gt.isNumber=Rr,gt.isObject=Lr,gt.isObjectLike=Pr,gt.isPlainObject=Tr,gt.isRegExp=Ar,gt.isSafeInteger=function(t){return Nr(t)&&-Ps<=t&&t<=Ps},gt.isSet=Dr,gt.isString=Fr,gt.isSymbol=Gr,gt.isTypedArray=qr,gt.isUndefined=function(t){return t===es},gt.isWeakMap=function(t){return Pr(t)&&Un(t)==ia},gt.isWeakSet=function(t){return Pr(t)&&$t(t)==ra},gt.join=function(t,e){return null==t?"":V.call(t,e)},gt.kebabCase=Eo,gt.last=Mi,gt.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==es&&(r=(r=Ur(n))<0?X(i+r,0):W(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):Nu(t,Pu,r,!0)},gt.lowerCase=wo,gt.lowerFirst=_o,gt.lt=kr,gt.lte=zr,gt.max=function(t){return t&&t.length?Ut(t,To,te):es},gt.maxBy=function(t,e){return t&&t.length?Ut(t,Gn(e,2),te):es},gt.mean=function(t){return Ou(t,To)},gt.meanBy=function(t,e){return Ou(t,Gn(e,2))},gt.min=function(t){return t&&t.length?Ut(t,To,fe):es},gt.minBy=function(t,e){return t&&t.length?Ut(t,Gn(e,2),fe):es},gt.stubArray=Yo,gt.stubFalse=Xo,gt.stubObject=function(){return{}},gt.stubString=function(){return""},gt.stubTrue=function(){return!0},gt.multiply=Qo,gt.nth=function(t,e){return t&&t.length?ye(t,Ur(e)):es},gt.noConflict=function(){return ou._===this&&(ou._=m),this},gt.noop=qo,gt.now=er,gt.pad=function(t,e,n){t=Wr(t);var i=(e=Ur(e))?Ku(t):0;if(!e||e<=i)return t;var r=(e-i)/2;return xn(z(r),n)+t+xn(k(r),n)},gt.padEnd=function(t,e,n){t=Wr(t);var i=(e=Ur(e))?Ku(t):0;return e&&i<e?t+xn(e-i,n):t},gt.padStart=function(t,e,n){t=Wr(t);var i=(e=Ur(e))?Ku(t):0;return e&&i<e?xn(e-i,n)+t:t},gt.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),J(Wr(t).replace(Ra,""),e||0)},gt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Hn(t,e,n)&&(e=n=es),n===es&&("boolean"==typeof e?(n=e,e=es):"boolean"==typeof t&&(n=t,t=es)),t===es&&e===es?(t=0,e=1):(t=Br(t),e===es?(e=t,t=0):e=Br(e)),e<t){var i=t;t=e,e=i}if(n||t%1||e%1){var r=K();return W(t+r*(e-t+iu("1e-"+((r+"").length-1))),e)}return _e(t,e)},gt.reduce=function(t,e,n){var i=xr(t)?Iu:Tu,r=arguments.length<3;return i(t,Gn(e,4),n,r,zt)},gt.reduceRight=function(t,e,n){var i=xr(t)?bu:Tu,r=arguments.length<3;return i(t,Gn(e,4),n,r,jt)},gt.repeat=function(t,e,n){return e=(n?Hn(t,e,n):e===es)?1:Ur(e),Ie(Wr(t),e)},gt.replace=function(){var t=arguments,e=Wr(t[0]);return t.length<3?e:e.replace(t[1],t[2])},gt.result=function(t,e,n){var i=-1,r=(e=We(e,t)).length;for(r||(r=1,t=es);++i<r;){var o=null==t?es:t[fi(e[i])];o===es&&(i=r,o=n),t=Sr(o)?o.call(t):o}return t},gt.round=$o,gt.runInContext=t,gt.sample=function(t){return(xr(t)?Mt:Me)(t)},gt.size=function(t){if(null==t)return 0;if(wr(t))return Fr(t)?Ku(t):t.length;var e=Un(t);return e==Xs||e==$s?t.size:ce(t).length},gt.snakeCase=Io,gt.some=function(t,e,n){var i=xr(t)?Mu:Re;return n&&Hn(t,e,n)&&(e=es),i(t,Gn(e,3))},gt.sortedIndex=function(t,e){return Te(t,e)},gt.sortedIndexBy=function(t,e,n){return Ae(t,e,Gn(n,2))},gt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=Te(t,e);if(i<n&&pr(t[i],e))return i}return-1},gt.sortedLastIndex=function(t,e){return Te(t,e,!0)},gt.sortedLastIndexBy=function(t,e,n){return Ae(t,e,Gn(n,2),!0)},gt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Te(t,e,!0)-1;if(pr(t[n],e))return n}return-1},gt.startCase=bo,gt.startsWith=function(t,e,n){return t=Wr(t),n=null==n?0:Dt(Ur(n),0,t.length),e=Ge(e),t.slice(n,n+e.length)==e},gt.subtract=ts,gt.sum=function(t){return t&&t.length?Au(t,To):0},gt.sumBy=function(t,e){return t&&t.length?Au(t,Gn(e,2)):0},gt.template=function(s,t,e){var n=gt.templateSettings;e&&Hn(s,t,e)&&(t=es),s=Wr(s),t=Kr({},t,n,Nn);var a,u,i=Kr({},t.imports,n.imports,Nn),r=so(i),o=Gu(i,r),h=0,c=t.interpolate||Wa,l="__p += '",f=y((t.escape||Wa).source+"|"+c.source+"|"+(c===Ma?ka:Wa).source+"|"+(t.evaluate||Wa).source+"|$","g"),d="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++tu+"]")+"\n";s.replace(f,function(t,e,n,i,r,o){return n||(n=i),l+=s.slice(h,o).replace(Ha,Uu),e&&(a=!0,l+="' +\n__e("+e+") +\n'"),r&&(u=!0,l+="';\n"+r+";\n__p += '"),n&&(l+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),l+="';\n";var g=t.variable;g||(l="with (obj) {\n"+l+"\n}\n"),l=(u?l.replace(va,""):l).replace(ya,"$1").replace(ma,"$1;"),l="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var p=Co(function(){return v(r,d+"return "+l).apply(es,o)});if(p.source=l,Mr(p))throw p;return p},gt.times=function(t,e){if((t=Ur(t))<1||Ps<t)return[];var n=Ts,i=W(t,Ts);e=Gn(e),t-=Ts;for(var r=Du(i,e);++n<t;)e(n);return r},gt.toFinite=Br,gt.toInteger=Ur,gt.toLength=Vr,gt.toLower=function(t){return Wr(t).toLowerCase()},gt.toNumber=Yr,gt.toSafeInteger=function(t){return t?Dt(Ur(t),-Ps,Ps):0===t?t:0},gt.toString=Wr,gt.toUpper=function(t){return Wr(t).toUpperCase()},gt.trim=function(t,e,n){if((t=Wr(t))&&(n||e===es))return t.replace(Oa,"");if(!t||!(e=Ge(e)))return t;var i=Zu(t),r=Zu(e);return Je(i,ku(i,r),zu(i,r)+1).join("")},gt.trimEnd=function(t,e,n){if((t=Wr(t))&&(n||e===es))return t.replace(Ta,"");if(!t||!(e=Ge(e)))return t;var i=Zu(t);return Je(i,0,zu(i,Zu(e))+1).join("")},gt.trimStart=function(t,e,n){if((t=Wr(t))&&(n||e===es))return t.replace(Ra,"");if(!t||!(e=Ge(e)))return t;var i=Zu(t);return Je(i,ku(i,Zu(e))).join("")},gt.truncate=function(t,e){var n=Is,i=bs;if(Lr(e)){var r="separator"in e?e.separator:r;n="length"in e?Ur(e.length):n,i="omission"in e?Ge(e.omission):i}var o=(t=Wr(t)).length;if(Vu(t)){var s=Zu(t);o=s.length}if(o<=n)return t;var a=n-Ku(i);if(a<1)return i;var u=s?Je(s,0,a).join(""):t.slice(0,a);if(r===es)return u+i;if(s&&(a+=u.length-a),Ar(r)){if(t.slice(a).search(r)){var h,c=u;for(r.global||(r=y(r.source,Wr(za.exec(r))+"g")),r.lastIndex=0;h=r.exec(c);)var l=h.index;u=u.slice(0,l===es?a:l)}}else if(t.indexOf(Ge(r),a)!=a){var f=u.lastIndexOf(r);-1<f&&(u=u.slice(0,f))}return u+i},gt.unescape=function(t){return(t=Wr(t))&&wa.test(t)?t.replace(xa,Qu):t},gt.uniqueId=function(t){var e=++f;return Wr(t)+e},gt.upperCase=Mo,gt.upperFirst=So,gt.each=Wi,gt.eachRight=Hi,gt.first=wi,Go(gt,(Zo={},Ht(gt,function(t,e){M.call(gt.prototype,e)||(Zo[e]=t)}),Zo),{chain:!1}),gt.VERSION="4.17.5",pu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){gt[t].placeholder=gt}),pu(["drop","take"],function(n,i){mt.prototype[n]=function(t){t=t===es?1:X(Ur(t),0);var e=this.__filtered__&&!i?new mt(this):this.clone();return e.__filtered__?e.__takeCount__=W(t,e.__takeCount__):e.__views__.push({size:W(t,Ts),type:n+(e.__dir__<0?"Right":"")}),e},mt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),pu(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Ns||3==n;mt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Gn(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),pu(["head","last"],function(t,e){var n="take"+(e?"Right":"");mt.prototype[t]=function(){return this[n](1).value()[0]}}),pu(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mt.prototype[t]=function(){return this.__filtered__?new mt(this):this[n](1)}}),mt.prototype.compact=function(){return this.filter(To)},mt.prototype.find=function(t){return this.filter(t).head()},mt.prototype.findLast=function(t){return this.reverse().find(t)},mt.prototype.invokeMap=be(function(e,n){return"function"==typeof e?new mt(this):this.map(function(t){return re(t,e,n)})}),mt.prototype.reject=function(t){return this.filter(cr(Gn(t)))},mt.prototype.slice=function(t,e){t=Ur(t);var n=this;return n.__filtered__&&(0<t||e<0)?new mt(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==es&&(n=(e=Ur(e))<0?n.dropRight(-e):n.take(e-t)),n)},mt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mt.prototype.toArray=function(){return this.take(Ts)},Ht(mt.prototype,function(l,t){var f=/^(?:filter|find|map|reject)|While$/.test(t),d=/^(?:head|last)$/.test(t),g=gt[d?"take"+("last"==t?"Right":""):t],p=d||/^find/.test(t);g&&(gt.prototype[t]=function(){var t=this.__wrapped__,n=d?[1]:arguments,e=t instanceof mt,i=n[0],r=e||xr(t),o=function(t){var e=g.apply(gt,_u([t],n));return d&&s?e[0]:e};r&&f&&"function"==typeof i&&1!=i.length&&(e=r=!1);var s=this.__chain__,a=!!this.__actions__.length,u=p&&!s,h=e&&!a;if(!p&&r){t=h?t:new mt(this);var c=l.apply(t,n);return c.__actions__.push({func:Bi,args:[o],thisArg:es}),new yt(c,s)}return u&&h?l.apply(this,n):(c=this.thru(o),u?d?c.value()[0]:c.value():c)})}),pu(["pop","push","shift","sort","splice","unshift"],function(t){var n=s[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);gt.prototype[t]=function(){var e=arguments;if(r&&!this.__chain__){var t=this.value();return n.apply(xr(t)?t:[],e)}return this[i](function(t){return n.apply(xr(t)?t:[],e)})}}),Ht(mt.prototype,function(t,e){var n=gt[e];if(n){var i=n.name+"";(ot[i]||(ot[i]=[])).push({name:e,func:n})}}),ot[pn(es,gs).name]=[{name:"wrapper",func:es}],mt.prototype.clone=function(){var t=new mt(this.__wrapped__);return t.__actions__=rn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rn(this.__views__),t},mt.prototype.reverse=function(){if(this.__filtered__){var t=new mt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},mt.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=xr(t),i=e<0,r=n?t.length:0,o=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=W(e,t+s);break;case"takeRight":t=X(t,e-s)}}return{start:t,end:e}}(0,r,this.__views__),s=o.start,a=o.end,u=a-s,h=i?a:s-1,c=this.__iteratees__,l=c.length,f=0,d=W(u,this.__takeCount__);if(!n||!i&&r==u&&d==u)return Be(t,this.__actions__);var g=[];t:for(;u--&&f<d;){for(var p=-1,v=t[h+=e];++p<l;){var y=c[p],m=y.iteratee,x=y.type,E=m(v);if(x==Cs)v=E;else if(!E){if(x==Ns)continue t;break t}}g[f++]=v}return g},gt.prototype.at=Ui,gt.prototype.chain=function(){return ji(this)},gt.prototype.commit=function(){return new yt(this.value(),this.__chain__)},gt.prototype.next=function(){this.__values__===es&&(this.__values__=jr(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?es:this.__values__[this.__index__++]}},gt.prototype.plant=function(t){for(var e,n=this;n instanceof vt;){var i=gi(n);i.__index__=0,i.__values__=es,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},gt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof mt){var e=t;return this.__actions__.length&&(e=new mt(this)),(e=e.reverse()).__actions__.push({func:Bi,args:[Li],thisArg:es}),new yt(e,this.__chain__)}return this.thru(Li)},gt.prototype.toJSON=gt.prototype.valueOf=gt.prototype.value=function(){return Be(this.__wrapped__,this.__actions__)},gt.prototype.first=gt.prototype.head,T&&(gt.prototype[T]=function(){return this}),gt}();"function"==typeof es&&"object"==typeof es.amd&&es.amd?(ou._=$u,es(function(){return $u})):A?((A.exports=$u)._=$u,T._=$u):ou._=$u}).call(j)}),mu=1,xu=2,Eu=4,wu=5,_u=484813681109536e-20,Iu=Math.PI/2,bu=.16666666666666666,Mu=.04722222222222222,Su=.022156084656084655,Nu=void 0===Number.EPSILON?1e-10:Number.EPSILON,Cu=.017453292519943295,Lu=57.29577951308232,Pu=Math.PI/4,Ou=2*Math.PI,Ru={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Tu={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Au=/[\s_\-\/\(\)]/g;function Du(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(Au,""),o=-1;++o<i.length;)if((n=i[o]).toLowerCase().replace(Au,"")===r)return t[n]}var Fu=function(t){var e,n,i,r={},o=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t},{}),s={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*Cu},lat_1:function(t){r.lat1=t*Cu},lat_2:function(t){r.lat2=t*Cu},lat_ts:function(t){r.lat_ts=t*Cu},lon_0:function(t){r.long0=t*Cu},lon_1:function(t){r.long1=t*Cu},lon_2:function(t){r.long2=t*Cu},alpha:function(t){r.alpha=parseFloat(t)*Cu},lonc:function(t){r.longc=t*Cu},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=Du(Tu,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*Cu},pm:function(t){var e=Du(Ru,t);r.from_greenwich=(e||parseFloat(t))*Cu},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)}};for(e in o)n=o[e],e in s?"function"==typeof(i=s[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},Gu=1,qu=/\s/,ku=/[A-Za-z]/,zu=/[A-Za-z84]/,ju=/[,\]]/,Bu=/[\d\.E\-\+]/;function Uu(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Gu}function Vu(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce(function(t,e){return Yu(e,t),t},i);e&&(t[e]=r)}function Yu(t,e){if(Array.isArray(t)){var n,i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void Yu(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i)switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Yu(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Yu(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Vu(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return Yu(t,e[i]);return Vu(e,i,t)}else e[i]=t;else e[i]=!0}else e[t]=!0}Uu.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;qu.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Gu:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},Uu.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(ju.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Uu.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Gu)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Gu,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Uu.prototype.number=function(t){if(!Bu.test(t)){if(ju.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Uu.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},Uu.prototype.keyword=function(t){if(zu.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=Gu)}if(!ju.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Uu.prototype.neutral=function(t){if(ku.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Bu.test(t))return this.word=t,void(this.state=3);if(!ju.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Uu.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu=.017453292519943295;function Hu(t){return t*Wu}var Ju,Ku=function(t){var e=new Uu(t).output(),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return Yu(e,r),function(o){"GEOGCS"===o.type?o.projName="longlat":"LOCAL_CS"===o.type?(o.projName="identity",o.local=!0):"object"===Xu(o.PROJECTION)?o.projName=Object.keys(o.PROJECTION)[0]:o.projName=o.PROJECTION,o.UNIT&&(o.units=o.UNIT.name.toLowerCase(),"metre"===o.units&&(o.units="meter"),o.UNIT.convert&&("GEOGCS"===o.type?o.DATUM&&o.DATUM.SPHEROID&&(o.to_meter=o.UNIT.convert*o.DATUM.SPHEROID.a):o.to_meter=o.UNIT.convert));var t=o.GEOGCS;function e(t){return t*(o.to_meter||1)}"GEOGCS"===o.type&&(t=o),t&&(t.DATUM?o.datumCode=t.DATUM.name.toLowerCase():o.datumCode=t.name.toLowerCase(),"d_"===o.datumCode.slice(0,2)&&(o.datumCode=o.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==o.datumCode&&"new_zealand_1949"!==o.datumCode||(o.datumCode="nzgd49"),"wgs_1984"===o.datumCode&&("Mercator_Auxiliary_Sphere"===o.PROJECTION&&(o.sphere=!0),o.datumCode="wgs84"),"_ferro"===o.datumCode.slice(-6)&&(o.datumCode=o.datumCode.slice(0,-6)),"_jakarta"===o.datumCode.slice(-8)&&(o.datumCode=o.datumCode.slice(0,-8)),~o.datumCode.indexOf("belge")&&(o.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(o.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===o.ellps.toLowerCase().slice(0,13)&&(o.ellps="intl"),o.a=t.DATUM.SPHEROID.a,o.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),~o.datumCode.indexOf("osgb_1936")&&(o.datumCode="osgb36"),~o.datumCode.indexOf("osni_1952")&&(o.datumCode="osni52"),(~o.datumCode.indexOf("tm65")||~o.datumCode.indexOf("geodetic_datum_of_1965"))&&(o.datumCode="ire65")),o.b&&!isFinite(o.b)&&(o.b=o.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Hu],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",Hu],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",Hu],["lat0","latitude_of_origin",Hu],["lat0","standard_parallel_1",Hu],["lat1","standard_parallel_1",Hu],["lat2","standard_parallel_2",Hu],["alpha","azimuth",Hu],["srsCode","name"]].forEach(function(t){return e=o,i=(n=t)[0],r=n[1],void(!(i in e)&&r in e&&(e[i]=e[r],3===n.length&&(e[i]=n[2](e[i]))));var e,n,i,r}),o.long0||!o.longc||"Albers_Conic_Equal_Area"!==o.projName&&"Lambert_Azimuthal_Equal_Area"!==o.projName||(o.long0=o.longc),o.lat_ts||!o.lat1||"Stereographic_South_Pole"!==o.projName&&"Polar Stereographic (variant B)"!==o.projName||(o.lat0=Hu(0<o.lat1?90:-90),o.lat_ts=o.lat1)}(r),r};function Zu(t){var e=this;if(2===arguments.length){var n=arguments[1];Zu[t]="string"==typeof n?"+"===n.charAt(0)?Fu(arguments[1]):Ku(arguments[1]):n}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?Zu.apply(e,t):Zu(t)});if("string"==typeof t){if(t in Zu)return Zu[t]}else"EPSG"in t?Zu["EPSG:"+t.EPSG]=t:"ESRI"in t?Zu["ESRI:"+t.ESRI]=t:"IAU2000"in t?Zu["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(Ju=Zu)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),Ju("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),Ju("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),Ju.WGS84=Ju["EPSG:4326"],Ju["EPSG:3785"]=Ju["EPSG:3857"],Ju.GOOGLE=Ju["EPSG:3857"],Ju["EPSG:900913"]=Ju["EPSG:3857"],Ju["EPSG:102113"]=Ju["EPSG:3857"];var Qu=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function $u(t){return"string"!=typeof t?t:t in Zu?Zu[t]:(e=t,Qu.some(function(t){return-1<e.indexOf(t)})?Ku(t):"+"===t[0]?Fu(t):void 0);var e}var th=function(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t},eh=function(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)},nh=function(t){return t<0?-1:1},ih=function(t){return Math.abs(t)<=3.14159265359?t:t-nh(t)*Ou},rh=function(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(Iu-e))/i},oh=function(t,e){for(var n,i,r=.5*t,o=Iu-2*Math.atan(e),s=0;s<=15;s++)if(n=t*Math.sin(o),o+=i=Iu-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-o,Math.abs(i)<=1e-10)return o;return-9999};function sh(t){return t}var ah=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=eh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(90<r*Lu&&r*Lu<-90&&180<i*Lu&&i*Lu<-180)return null;if(Math.abs(Math.abs(r)-Iu)<=Nu)return null;if(this.sphere)e=this.x0+this.a*this.k0*ih(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Pu+.5*r));else{var o=Math.sin(r),s=rh(this.e,r,o);e=this.x0+this.a*this.k0*ih(i-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=Iu-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var o=Math.exp(-r/(this.a*this.k0));if(-9999===(n=oh(this.e,o)))return null}return e=ih(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:sh,inverse:sh,names:["longlat","identity"]}],uh={},hh=[];function ch(t,e){var n=hh.length;return t.names?((hh[n]=t).names.forEach(function(t){uh[t.toLowerCase()]=n}),this):(console.log(e),!0)}var lh={start:function(){ah.forEach(ch)},add:ch,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==uh[e]&&hh[uh[e]]?hh[uh[e]]:void 0}},fh={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},dh=fh.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};fh.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var gh={};function ph(t,e){if(!(this instanceof ph))return new ph(t);e=e||function(t){if(t)throw t};var n=$u(t);if("object"===(void 0===n?"undefined":Xu(n))){var i=ph.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=Du(gh,n.datumCode);r&&(n.datum_params=r.towgs84?r.towgs84.split(","):null,n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,s,a,u,h,c,l,f,d,g,p,v,y,m,x=function(t,e,n,i,r){if(!t){var o=Du(fh,i);o||(o=dh),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<Nu)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),E=(o=x.a,s=x.b,x.rf,a=n.R_A,c=((u=o*o)-(h=s*s))/u,l=0,a?(u=(o*=1-c*(bu+c*(Mu+c*Su)))*o,c=0):l=Math.sqrt(c),{es:c,e:l,ep2:(u-h)/h}),w=n.datum||(f=n.datumCode,d=n.datum_params,g=x.a,p=x.b,v=E.es,y=E.ep2,(m={}).datum_type=void 0===f||"none"===f?wu:Eu,d&&(m.datum_params=d.map(parseFloat),0===m.datum_params[0]&&0===m.datum_params[1]&&0===m.datum_params[2]||(m.datum_type=mu),3<m.datum_params.length&&(0===m.datum_params[3]&&0===m.datum_params[4]&&0===m.datum_params[5]&&0===m.datum_params[6]||(m.datum_type=xu,m.datum_params[3]*=_u,m.datum_params[4]*=_u,m.datum_params[5]*=_u,m.datum_params[6]=m.datum_params[6]/1e6+1))),m.a=g,m.b=p,m.es=v,m.ep2=y,m);th(this,n),th(this,i),this.a=x.a,this.b=x.b,this.rf=x.rf,this.sphere=x.sphere,this.es=E.es,this.e=E.e,this.ep2=E.ep2,this.datum=w,this.init(),e(null,this)}else e(t)}else e(t)}function vh(t){return t===mu||t===xu}gh.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},gh.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},gh.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},gh.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},gh.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},gh.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},gh.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},gh.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},gh.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},gh.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},gh.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},gh.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},gh.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},gh.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gh.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},gh.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},(ph.projections=lh).start();var yh=function(t,e,n){return r=e,(i=t).datum_type===r.datum_type&&!(i.a!==r.a||5e-11<Math.abs(i.es-r.es))&&(i.datum_type===mu?i.datum_params[0]===r.datum_params[0]&&i.datum_params[1]===r.datum_params[1]&&i.datum_params[2]===r.datum_params[2]:i.datum_type!==xu||i.datum_params[0]===r.datum_params[0]&&i.datum_params[1]===r.datum_params[1]&&i.datum_params[2]===r.datum_params[2]&&i.datum_params[3]===r.datum_params[3]&&i.datum_params[4]===r.datum_params[4]&&i.datum_params[5]===r.datum_params[5]&&i.datum_params[6]===r.datum_params[6])?n:t.datum_type===wu||e.datum_type===wu?n:t.es!==e.es||t.a!==e.a||vh(t.datum_type)||vh(e.datum_type)?(n=function(t,e,n){var i,r,o,s,a=t.x,u=t.y,h=t.z?t.z:0;if(u<-Iu&&-1.001*Iu<u)u=-Iu;else if(Iu<u&&u<1.001*Iu)u=Iu;else if(u<-Iu||Iu<u)return null;return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(u),s=Math.cos(u),o=r*r,{x:((i=n/Math.sqrt(1-e*o))+h)*s*Math.cos(a),y:(i+h)*s*Math.sin(a),z:(i*(1-e)+h)*r}}(n,t.es,t.a),vh(t.datum_type)&&(n=function(t,e,n){if(e===mu)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===xu){var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6];return{x:h*(t.x-u*t.y+a*t.z)+i,y:h*(u*t.x+t.y-s*t.z)+r,z:h*(-a*t.x+s*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),vh(e.datum_type)&&(n=function(t,e,n){if(e===mu)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===xu){var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],u=n[5],h=n[6],c=(t.x-i)/h,l=(t.y-r)/h,f=(t.z-o)/h;return{x:c+u*l-a*f,y:-u*c+l+s*f,z:a*c-s*l+f}}}(n,e.datum_type,e.datum_params)),function(t,e,n,i){var r,o,s,a,u,h,c,l,f,d,g,p,v,y,m,x=t.x,E=t.y,w=t.z?t.z:0;if(r=Math.sqrt(x*x+E*E),o=Math.sqrt(x*x+E*E+w*w),r/n<1e-12){if(y=0,o/n<1e-12)return m=-i,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(E,x);for(s=w/o,l=(a=r/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*a*a)),f=s*u,v=0;v++,h=e*(c=n/Math.sqrt(1-e*f*f))/(c+(m=r*l+w*f-c*(1-e*f*f))),p=(g=s*(u=1/Math.sqrt(1-h*(2-h)*a*a)))*l-(d=a*(1-h)*u)*f,l=d,f=g,1e-24<p*p&&v<30;);return{x:y,y:Math.atan(g/Math.abs(d)),z:m}}(n,e.es,e.a,e.b)):n;var i,r},mh=function(t,e,n){var i,r,o,s=n.x,a=n.y,u=n.z||0,h={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==n.z)switch(0===o?(i=s,r="x"):1===o?(i=a,r="y"):(i=u,r="z"),t.axis[o]){case"e":h[r]=i;break;case"w":h[r]=-i;break;case"n":h[r]=i;break;case"s":h[r]=-i;break;case"u":void 0!==n[r]&&(h.z=i);break;case"d":void 0!==n[r]&&(h.z=-i);break;default:return null}return h},xh=function(t){var e={x:t[0],y:t[1]};return 2<t.length&&(e.z=t[2]),3<t.length&&(e.m=t[3]),e};function Eh(t,e,n){var i,r,o;return Array.isArray(n)&&(n=xh(n)),t.datum&&e.datum&&(o=e,((r=t).datum.datum_type===mu||r.datum.datum_type===xu)&&"WGS84"!==o.datumCode||(o.datum.datum_type===mu||o.datum.datum_type===xu)&&"WGS84"!==r.datumCode)&&(n=Eh(t,i=new ph("WGS84"),n),t=i),"enu"!==t.axis&&(n=mh(t,!1,n)),"longlat"===t.projName?n={x:n.x*Cu,y:n.y*Cu}:(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter}),n=t.inverse(n)),t.from_greenwich&&(n.x+=t.from_greenwich),n=yh(t.datum,e.datum,n),e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y}),"longlat"===e.projName?n={x:n.x*Lu,y:n.y*Lu}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter})),"enu"!==e.axis?mh(e,!0,n):n}var wh=ph("WGS84");function _h(t,e,n){var i;return Array.isArray(n)?(i=Eh(t,e,n),3===n.length?[i.x,i.y,i.z]:[i.x,i.y]):Eh(t,e,n)}function Ih(t){return t instanceof ph?t:t.oProj?t.oProj:ph(t)}function bh(e,n,t){e=Ih(e);var i,r=!1;return void 0===n?(n=e,e=wh,r=!0):(void 0!==n.x||Array.isArray(n))&&(t=n,n=e,e=wh,r=!0),n=Ih(n),t?_h(e,n,t):(i={forward:function(t){return _h(e,n,t)},inverse:function(t){return _h(n,e,t)}},r&&(i.oProj=n),i)}var Mh=6,Sh="AJSAJS",Nh="AFAFAF",Ch=65,Lh=73,Ph=79,Oh=86,Rh=90,Th={forward:Ah,inverse:function(t){var e=qh(zh(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Dh};function Ah(t,e){return e=e||5,n=function(t){var e,n,i,r,o,s,a,u,h=t.lat,c=t.lon,l=.00669438,f=Fh(h),d=Fh(c);u=Math.floor((c+180)/6)+1,180===c&&(u=60);56<=h&&h<64&&3<=c&&c<12&&(u=32);72<=h&&h<84&&(0<=c&&c<9?u=31:9<=c&&c<21?u=33:21<=c&&c<33?u=35:33<=c&&c<42&&(u=37));a=Fh(6*(u-1)-180+3),e=l/(1-l),n=6378137/Math.sqrt(1-l*Math.sin(f)*Math.sin(f)),i=Math.tan(f)*Math.tan(f),r=e*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(d-a),s=6378137*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*l*l*l/3072*Math.sin(6*f));var g=.9996*n*(o+(1-i+r)*o*o*o/6+(5-18*i+i*i+72*r-58*e)*o*o*o*o*o/120)+5e5,p=.9996*(s+n*Math.tan(f)*(o*o/2+(5-i+9*r+4*r*r)*o*o*o*o/24+(61-58*i+i*i+600*r-330*e)*o*o*o*o*o*o/720));h<0&&(p+=1e7);return{northing:Math.round(p),easting:Math.round(g),zoneNumber:u,zoneLetter:function(t){var e="Z";t<=84&&72<=t?e="X":t<72&&64<=t?e="W":t<64&&56<=t?e="V":t<56&&48<=t?e="U":t<48&&40<=t?e="T":t<40&&32<=t?e="S":t<32&&24<=t?e="R":t<24&&16<=t?e="Q":t<16&&8<=t?e="P":t<8&&0<=t?e="N":t<0&&-8<=t?e="M":t<-8&&-16<=t?e="L":t<-16&&-24<=t?e="K":t<-24&&-32<=t?e="J":t<-32&&-40<=t?e="H":t<-40&&-48<=t?e="G":t<-48&&-56<=t?e="F":t<-56&&-64<=t?e="E":t<-64&&-72<=t?e="D":t<-72&&-80<=t&&(e="C");return e}(h)}}({lat:t[1],lon:t[0]}),i=e,r="00000"+n.easting,o="00000"+n.northing,n.zoneNumber+n.zoneLetter+(g=n.easting,p=n.northing,v=n.zoneNumber,y=kh(v),m=Math.floor(g/1e5),x=Math.floor(p/1e5)%20,s=m,a=x,u=y-1,h=Sh.charCodeAt(u),c=Nh.charCodeAt(u),d=!1,Rh<(l=h+s-1)&&(l=l-Rh+Ch-1,d=!0),(l===Lh||h<Lh&&Lh<l||(Lh<l||h<Lh)&&d)&&l++,(l===Ph||h<Ph&&Ph<l||(Ph<l||h<Ph)&&d)&&++l===Lh&&l++,Rh<l&&(l=l-Rh+Ch-1),Oh<(f=c+a)?(f=f-Oh+Ch-1,d=!0):d=!1,(f===Lh||c<Lh&&Lh<f||(Lh<f||c<Lh)&&d)&&f++,(f===Ph||c<Ph&&Ph<f||(Ph<f||c<Ph)&&d)&&++f===Lh&&f++,Oh<f&&(f=f-Oh+Ch-1),String.fromCharCode(l)+String.fromCharCode(f))+r.substr(r.length-5,i)+o.substr(o.length-5,i);var n,i,r,o,s,a,u,h,c,l,f,d,g,p,v,y,m,x}function Dh(t){var e=qh(zh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Fh(t){return t*(Math.PI/180)}function Gh(t){return t/Math.PI*180}function qh(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||60<r)return null;var o,s,a,u,h,c,l,f,d,g=.00669438,p=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g)),v=n-5e5,y=e;i<"N"&&(y-=1e7),l=6*(r-1)-180+3,o=g/(1-g),d=(f=y/.9996/6367449.145945056)+(3*p/2-27*p*p*p/32)*Math.sin(2*f)+(21*p*p/16-55*p*p*p*p/32)*Math.sin(4*f)+151*p*p*p/96*Math.sin(6*f),s=6378137/Math.sqrt(1-g*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),u=o*Math.cos(d)*Math.cos(d),h=6378137*(1-g)/Math.pow(1-g*Math.sin(d)*Math.sin(d),1.5),c=v/(.9996*s);var m=d-s*Math.tan(d)/h*(c*c/2-(5+3*a+10*u-4*u*u-9*o)*c*c*c*c/24+(61+90*a+298*u+45*a*a-252*o-3*u*u)*c*c*c*c*c*c/720);m=Gh(m);var x,E=(c-(1+2*a+u)*c*c*c/6+(5-2*u+28*a-3*u*u+8*o+24*a*a)*c*c*c*c*c/120)/Math.cos(d);if(E=l+Gh(E),t.accuracy){var w=qh({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:w.lat,right:w.lon,bottom:m,left:E}}else x={lat:m,lon:E};return x}function kh(t){var e=t%Mh;return 0===e&&(e=Mh),e}function zh(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(2<=o)throw"MGRSPoint bad conversion from: "+t;r+=e,o++}var s=parseInt(r,10);if(0===o||n<o+3)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(o++);if(a<="A"||"B"===a||"Y"===a||"Z"<=a||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(o,o+=2);for(var u=kh(s),h=function(t,e){var n=Sh.charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Lh&&n++,n===Ph&&n++,Rh<n){if(r)throw"Bad character: "+t;n=Ch,r=!0}i+=1e5}return i}(i.charAt(0),u),c=function(t,e){if("V"<t)throw"MGRSPoint given invalid Northing "+t;var n=Nh.charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Lh&&n++,n===Ph&&n++,Oh<n){if(r)throw"Bad character: "+t;n=Ch,r=!0}i+=1e5}return i}(i.charAt(1),u);c<jh(a);)c+=2e6;var l=n-o;if(l%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,g,p=l/2,v=0,y=0;return 0<p&&(f=1e5/Math.pow(10,p),d=t.substring(o,o+p),v=parseFloat(d)*f,g=t.substring(o+p),y=parseFloat(g)*f),{easting:v+h,northing:y+c,zoneLetter:a,zoneNumber:s,accuracy:f}}function jh(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(0<=e)return e;throw"Invalid zone letter: "+t}function Bh(t,e,n){if(!(this instanceof Bh))return new Bh(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===(void 0===t?"undefined":Xu(t)))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Bh.fromMGRS=function(t){return new Bh(Dh(t))},Bh.prototype.toMGRS=function(t){return Ah([this.x,this.y],t)};var Uh=.01953125,Vh=.01068115234375,Yh=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(Uh+t*Vh))),e[1]=t*(.75-t*(.046875+t*(Uh+t*Vh)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e},Xh=function(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))},Wh=function(t,e,n){for(var i=1/(1-e),r=t,o=20;o;--o){var s=Math.sin(r),a=1-e*s*s;if(r-=a=(Xh(r,s,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,Math.abs(a)<Nu)return r}return r};var Hh={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Yh(this.es),this.ml0=Xh(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,o=t.y,s=ih(r-this.long0),a=Math.sin(o),u=Math.cos(o);if(this.es){var h=u*s,c=Math.pow(h,2),l=this.ep2*Math.pow(u,2),f=Math.pow(l,2),d=Math.abs(u)>Nu?Math.tan(o):0,g=Math.pow(d,2),p=Math.pow(g,2);e=1-this.es*Math.pow(a,2),h/=Math.sqrt(e);var v=Xh(o,a,u,this.en);n=this.a*(this.k0*h*(1+c/6*(1-g+l+c/20*(5-18*g+p+14*l-58*g*l+c/42*(61+179*p-p*g-479*g)))))+this.x0,i=this.a*(this.k0*(v-this.ml0+a*s*h/2*(1+c/12*(5-g+9*l+4*f+c/30*(61+p-58*g+270*l-330*g*l+c/56*(1385+543*p-p*g-3111*g))))))+this.y0}else{var y=u*Math.sin(s);if(Math.abs(Math.abs(y)-1)<Nu)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,i=u*Math.cos(s)/Math.sqrt(1-Math.pow(y,2)),1<=(y=Math.abs(i))){if(Nu<y-1)return 93;i=0}else i=Math.acos(i);o<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,o=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,n=Wh(e,this.es,this.en),Math.abs(n)<Iu){var a=Math.sin(n),u=Math.cos(n),h=Math.abs(u)>Nu?Math.tan(n):0,c=this.ep2*Math.pow(u,2),l=Math.pow(c,2),f=Math.pow(h,2),d=Math.pow(f,2);e=1-this.es*Math.pow(a,2);var g=o*Math.sqrt(e)/this.k0,p=Math.pow(g,2);i=n-(e*=h)*p/(1-this.es)*.5*(1-p/12*(5+3*f-9*c*f+c-4*l-p/30*(61+90*f-252*c*f+45*d+46*c-p/56*(1385+3633*f+4095*d+1574*d*f)))),r=ih(this.long0+g*(1-p/6*(1+2*f+c-p/20*(5+28*f+24*d+8*c*f+6*c-p/42*(61+662*f+1320*d+720*d*f))))/u)}else i=Iu*nh(s),r=0;else{var v=Math.exp(o/this.k0),y=.5*(v-1/v),m=this.lat0+s/this.k0,x=Math.cos(m);e=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(y,2))),i=Math.asin(e),s<0&&(i=-i),r=0===y&&0===x?0:ih(Math.atan2(y,x)+this.long0)}return t.x=r,t.y=i,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Jh=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Kh=function(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))},Zh=function(t){var e,n,i,r=Math.abs(t);return e=r*(1+r/(Kh(1,r)+1)),r=0===(i=(n=1+e)-1)?e:e*Math.log(n)/i,t<0?-r:r},Qh=function(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,o=t[r],s=0;0<=--r;)n=i*o-s+t[r],s=o,o=n;return e+n*Math.sin(2*e)},$h=function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,o=t[r],s=0;0<=--r;)n=i*o-s+t[r],s=o,o=n;return Math.sin(e)*n},tc=function(t,e,n){for(var i,r,o,s,a=Math.sin(e),u=Math.cos(e),h=Jh(n),c=(i=n,r=((r=Math.exp(i))+1/r)/2),l=2*u*c,f=-2*a*h,d=t.length-1,g=t[d],p=0,v=0,y=0;0<=--d;)o=v,s=p,g=l*(v=g)-o-f*(p=y)+t[d],y=f*v-s+l*p;return[(l=a*c)*g-(f=u*h)*y,l*y+f*g]};var ec={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var i=Qh(this.cbg,this.lat0);this.Zb=-this.Qn*(i+$h(this.gtu,2*i))},forward:function(t){var e=ih(t.x-this.long0),n=t.y;n=Qh(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),o=Math.sin(e),s=Math.cos(e);n=Math.atan2(i,s*r),e=Math.atan2(o*r,Kh(i,r*s)),e=Zh(Math.tan(e));var a,u,h=tc(this.gtu,2*n,2*e);return n+=h[0],e+=h[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):u=a=1/0,t.x=a,t.y=u,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var o=tc(this.utg,2*r,2*i);r+=o[0],i+=o[1],i=Math.atan(Jh(i));var s=Math.sin(r),a=Math.cos(r),u=Math.sin(i),h=Math.cos(i);r=Math.atan2(s*h,Kh(u,h*a)),i=Math.atan2(u,h*a),e=ih(i+this.long0),n=Qh(this.cgb,r)}else n=e=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},nc=function(t,e){if(void 0===t){if((t=Math.floor(30*(ih(e)+Math.PI)/Math.PI)+1)<0)return 0;if(60<t)return 60}return t};var ic={init:function(){var t=nc(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Cu,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ec.init.apply(this),this.forward=ec.forward,this.inverse=ec.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},rc=function(t,e){return Math.pow((1-t)/(1+t),e)},oc=20;var sc={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Pu)/(Math.pow(Math.tan(.5*this.lat0+Pu),this.C)*rc(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Pu),this.C)*rc(this.e*Math.sin(n),this.ratexp))-Iu,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+Pu)/this.K,1/this.C),r=oc;0<r&&(n=2*Math.atan(i*rc(this.e*Math.sin(t.y),-.5*this.e))-Iu,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]};var ac={init:function(){sc.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=ih(t.x-this.long0),sc.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),n=Math.cos(s),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),i=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,sc.inverse.apply(this,[t]),t.x=ih(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]};var uc={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Nu&&(this.k0=.5*(1+nh(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Nu&&(0<this.lat0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Nu&&(this.k0=.5*this.cons*eh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/rh(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=eh(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Iu,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,o,s,a=t.x,u=t.y,h=Math.sin(u),c=Math.cos(u),l=ih(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=Nu&&Math.abs(u+this.lat0)<=Nu?(t.x=NaN,t.y=NaN):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*c*Math.cos(l)),t.x=this.a*e*c*Math.sin(l)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*c*Math.cos(l))+this.y0):(n=2*Math.atan(this.ssfn_(u,h,this.e))-Iu,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=Nu?(o=rh(this.e,u*this.con,this.con*h),s=2*this.a*this.k0*o/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0)):(Math.abs(this.sinlat0)<Nu?(e=2*this.a*this.k0/(1+r*Math.cos(l)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(l))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(l))+this.y0),t.x=e*r*Math.sin(l)+this.x0)),t},inverse:function(t){var e,n,i,r,o;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(.5*this.a*this.k0));return e=this.long0,n=this.lat0,s<=Nu||(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=Math.abs(this.coslat0)<Nu?0<this.lat0?ih(this.long0+Math.atan2(t.x,-1*t.y)):ih(this.long0+Math.atan2(t.x,t.y)):ih(this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a)))),t.x=e,t.y=n,t}if(Math.abs(this.coslat0)<=Nu){if(s<=Nu)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*oh(this.e,i),e=this.con*ih(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=Nu?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/s),e=ih(this.long0+Math.atan2(t.x*Math.sin(r),s*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*oh(this.e,Math.tan(.5*(Iu+o)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(Iu+t))*Math.pow((1-e)/(1+e),.5*n)}};var hc={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var s=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=s-this.alpha*a+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+s/this.alpha,u=0,h=o,c=-1e3,l=0;1e-7<Math.abs(h-c);){if(20<++l)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=a,t.y=h,t},names:["somerc"]};var cc={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),n=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var i,r,o=rh(this.e,this.lat0,t),s=this.bl/e*Math.sqrt((1-this.es)/(1-n*n));if(s*s<1&&(s=1),isNaN(this.longc)){var a=rh(this.e,this.lat1,Math.sin(this.lat1)),u=rh(this.e,this.lat2,Math.sin(this.lat2));0<=this.lat0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(o,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(o,this.bl);var h=Math.pow(a,this.bl),c=Math.pow(u,this.bl);r=.5*((i=this.el/h)-1/i);var l=(this.el*this.el-c*h)/(this.el*this.el+c*h),f=(c-h)/(c+h),d=ih(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=ih(this.long0);var g=ih(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*g)/r),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else i=0<=this.lat0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=i*Math.pow(o,this.bl),r=.5*(i-1/i),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(r*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:0<=this.lat0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))},forward:function(t){var e,n,i,r=t.x,o=t.y,s=ih(r-this.long0);if(Math.abs(Math.abs(o)-Iu)<=Nu)i=0<o?-1:1,n=this.al/this.bl*Math.log(Math.tan(Pu+i*this.gamma0*.5)),e=-1*i*Iu*this.al/this.bl;else{var a=rh(this.e,o,Math.sin(o)),u=this.el/Math.pow(a,this.bl),h=.5*(u-1/u),c=.5*(u+1/u),l=Math.sin(this.bl*s),f=(h*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(f)-1)<=Nu?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=Nu?this.al*this.bl*s:this.al*Math.atan2(h*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+n):(e-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var e,n;this.no_rot?(n=t.y-this.y0,e=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),r=.5*(i-1/i),o=.5*(i+1/i),s=Math.sin(this.bl*e/this.al),a=(s*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/o,u=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<Nu?(t.x=this.long0,t.y=Iu):Math.abs(a+1)<Nu?(t.x=this.long0,t.y=-1*Iu):(t.y=oh(this.e,u),t.x=ih(this.long0-Math.atan2(r*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var lc={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Nu)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=eh(this.e,e,n),r=rh(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=eh(this.e,o,s),u=rh(this.e,this.lat2,o),h=rh(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Nu?this.ns=Math.log(i/a)/Math.log(r/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=Nu&&(n=nh(n)*(Iu-2*Nu));var i,r,o=Math.abs(Math.abs(n)-Iu);if(Nu<o)i=rh(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((o=n*this.ns)<=0)return null;r=0}var s=this.ns*ih(e-this.long0);return t.x=this.k0*(r*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(s))+this.y0,t},inverse:function(t){var e,n,i,r,o,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;0<this.ns?(e=Math.sqrt(s*s+a*a),n=1):(e=-Math.sqrt(s*s+a*a),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*s,n*a)),0!==e||0<this.ns){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=oh(this.e,i)))return null}else r=-Iu;return o=ih(u/this.ns+this.long0),t.x=o,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var fc={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,o,s,a,u=t.x,h=t.y,c=ih(u-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),o=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,o,s,a,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,s=e;for(var h=a=0;t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(s))/(1-this.e*Math.sin(s)),this.e/2))-this.s45),Math.abs(s-t.y)<1e-10&&(a=1),s=t.y,h+=1,0===a&&h<15;);return 15<=h?null:t},names:["Krovak","krovak"]},dc=function(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)},gc=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},pc=function(t){return.375*t*(1+.25*t*(1+.46875*t))},vc=function(t){return.05859375*t*t*(1+.75*t)},yc=function(t){return t*t*t*(35/3072)},mc=function(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)},xc=function(t){return Math.abs(t)<Iu?t:t-nh(t)*Math.PI},Ec=function(t,e,n,i,r){var o,s;o=t/e;for(var a=0;a<15;a++)if(o+=s=(t-(e*o-n*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*i*Math.cos(4*o)-6*r*Math.cos(6*o)),Math.abs(s)<=1e-10)return o;return NaN};var wc={init:function(){this.sphere||(this.e0=gc(this.es),this.e1=pc(this.es),this.e2=vc(this.es),this.e3=yc(this.es),this.ml0=this.a*dc(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=ih(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var o=Math.sin(r),s=Math.cos(r),a=mc(this.a,this.e,o),u=Math.tan(r)*Math.tan(r),h=i*Math.cos(r),c=h*h,l=this.es*s*s/(1-this.es);e=a*h*(1-c*u*(1/6-(8-u+8*l)*c/120)),n=this.a*dc(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*o/s*c*(.5+(5-u+6*l)*c/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var o=r+this.lat0;e=Math.asin(Math.sin(o)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(o))}else{var s=this.ml0/this.a+r,a=Ec(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Iu)<=Nu)return t.x=this.long0,t.y=Iu,r<0&&(t.y*=-1),t;var u=mc(this.a,this.e,Math.sin(a)),h=u*u*u/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),l=i*this.a/u,f=l*l;e=a-u*Math.tan(a)/h*l*l*(.5-(1+3*c)*l*l/24),n=l*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return t.x=ih(n+this.long0),t.y=xc(e),t},names:["Cassini","Cassini_Soldner","cass"]},_c=function(t,e){var n;return 1e-7<t?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e};var Ic=.3333333333333333,bc=.17222222222222222,Mc=.10257936507936508,Sc=.06388888888888888,Nc=.0664021164021164,Cc=.016415012942191543;var Lc={init:function(){var t,e,n,i,r=Math.abs(this.lat0);if(Math.abs(r-Iu)<Nu?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(r)<Nu?this.mode=this.EQUIT:this.mode=this.OBLIQ,0<this.es)switch(this.qp=_c(this.e,1),this.mmf=.5/(1-this.es),this.apa=(e=this.es,(i=[])[0]=e*Ic,n=e*e,i[0]+=n*bc,i[1]=n*Sc,n*=e,i[0]+=n*Mc,i[1]+=n*Nc,i[2]=n*Cc,i),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=_c(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,o,s,a,u,h,c,l=t.x,f=t.y;if(l=ih(l-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),i=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*i:1+this.sinph0*o+this.cosph0*c*i)<=Nu)return null;e=(n=Math.sqrt(2/n))*c*Math.sin(l),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.phi0)<Nu)return null;n=Pu-.5*f,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(l),n*=i}}else{switch(h=u=a=0,i=Math.cos(l),r=Math.sin(l),o=Math.sin(f),s=_c(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,u=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*u*i;break;case this.EQUIT:h=1+u*i;break;case this.N_POLE:h=Iu+f,s=this.qp-s;break;case this.S_POLE:h=f-Iu,s=this.qp+s}if(Math.abs(h)<Nu)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*a-this.sinb1*u*i):(h=Math.sqrt(2/(1+u*i)))*a*this.ymf,e=this.xmf*h*u*r;break;case this.N_POLE:case this.S_POLE:0<=s?(e=(h=Math.sqrt(s))*r,n=i*(this.mode===this.S_POLE?h:-h)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,o,s,a,u,h,c,l=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,g=0,p=0;if(1<(n=.5*(d=Math.sqrt(l*l+f*f))))return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=Nu?0:Math.asin(f*p/d),l*=p,f=g*d;break;case this.OBLIQ:n=Math.abs(d)<=Nu?this.phi0:Math.asin(g*this.sinph0+f*p*this.cosph0/d),l*=p*this.cosph0,f=(g-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:f=-f,n=Iu-n;break;case this.S_POLE:n-=Iu}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,f):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,f*=this.dd,(s=Math.sqrt(l*l+f*f))<Nu)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*s/this.rq),i=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(a=i*this.sinb1+f*r*this.cosb1/s,o=this.qp*a,f=s*this.cosb1*i-f*this.sinb1*r):(a=f*r/s,o=this.qp*a,f=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=l*l+f*f))return t.x=0,t.y=this.phi0,t;a=1-o/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,f),u=Math.asin(a),h=this.apa,c=u+u,n=u+h[0]*Math.sin(c)+h[1]*Math.sin(c+c)+h[2]*Math.sin(c+c+c)}return t.x=ih(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Pc=function(t){return 1<Math.abs(t)&&(t=1<t?1:-1),Math.asin(t)};var Oc={init:function(){Math.abs(this.lat1+this.lat2)<Nu||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=eh(this.e3,this.sin_po,this.cos_po),this.qs1=_c(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=eh(this.e3,this.sin_po,this.cos_po),this.qs2=_c(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=_c(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Nu?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=_c(this.e3,this.sin_phi,this.cos_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,o=this.ns0*ih(e-this.long0),s=r*Math.sin(o)+this.x0,a=this.rh-r*Math.cos(o)+this.y0;return t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,0<=this.ns0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),(r=0)!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),o=ih(r/this.ns0+this.long0),t.x=o,t.y=s,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,o,s=Pc(.5*e);if(t<Nu)return s;for(var a=t*t,u=1;u<=25;u++)if(s+=o=.5*(r=1-(i=t*(n=Math.sin(s)))*i)*r/Math.cos(s)*(e/(1-a)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(o)<=1e-7)return s;return null}};var Rc={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,o,s,a,u=t.x,h=t.y;return i=ih(u-this.long0),e=Math.sin(h),n=Math.cos(h),r=Math.cos(i),0<(o=this.sin_p14*e+this.cos_p14*n*r)||Math.abs(o)<=Nu?(s=this.x0+1*this.a*n*Math.sin(i)/o,a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/o):(s=this.x0+this.infinity_dist*n*Math.sin(i),a=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),i=Math.cos(r),s=Pc(i*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),o=ih(this.long0+o)):(s=this.phic0,o=0),t.x=o,t.y=s,t},names:["gnom"]},Tc=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*Iu:Iu;for(var i,r,o,s,a=Math.asin(.5*e),u=0;u<30;u++)if(r=Math.sin(a),o=Math.cos(a),s=t*r,a+=i=Math.pow(1-s*s,2)/(2*o)*(e/(1-t*t)-r/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return a;return NaN};var Ac={init:function(){this.sphere||(this.k0=eh(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,o=ih(i-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var s=_c(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,n=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=ih(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Tc(this.e,2*t.y*this.k0/this.a),e=ih(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var Dc={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=ih(e-this.long0),r=xc(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=ih(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=xc(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Fc=20;var Gc={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gc(this.es),this.e1=pc(this.es),this.e2=vc(this.es),this.e3=yc(this.es),this.ml0=this.a*dc(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,o=t.y,s=ih(r-this.long0);if(i=s*Math.sin(o),this.sphere)Math.abs(o)<=Nu?(e=this.a*s,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(o),n=this.a*(xc(o-this.lat0)+(1-Math.cos(i))/Math.tan(o)));else if(Math.abs(o)<=Nu)e=this.a*s,n=-1*this.ml0;else{var a=mc(this.a,this.e,Math.sin(o))/Math.tan(o);e=a*Math.sin(i),n=this.a*dc(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,o,s,a,u,h;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Nu)e=ih(i/this.a+this.long0),n=0;else{var c;for(s=this.lat0+r/this.a,a=i*i/this.a/this.a+s*s,u=s,o=Fc;o;--o)if(u+=h=-1*(s*(u*(c=Math.tan(u))+1)-u-.5*(u*u+a)*c)/((u-s)/c-1),Math.abs(h)<=Nu){n=u;break}e=ih(this.long0+Math.asin(i*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=Nu)n=0,e=ih(this.long0+i/this.a);else{var l,f,d,g,p;for(s=(this.ml0+r)/this.a,a=i*i/this.a/this.a+s*s,u=s,o=Fc;o;--o)if(p=this.e*Math.sin(u),l=Math.sqrt(1-p*p)*Math.tan(u),f=this.a*dc(this.e0,this.e1,this.e2,this.e3,u),d=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=h=(s*(l*(g=f/this.a)+1)-g-.5*l*(g*g+a))/(this.es*Math.sin(2*u)*(g*g+a-2*s*g)/(4*l)+(s-g)*(l*d-2/Math.sin(2*u))-d),Math.abs(h)<=Nu){n=u;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=ih(this.long0+Math.asin(i*l/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var qc={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,o=i/_u*1e-5,s=r,a=1,u=0;for(e=1;e<=10;e++)a*=o,u+=this.A[e]*a;var h,c=u,l=s,f=1,d=0,g=0,p=0;for(e=1;e<=6;e++)h=d*c+f*l,f=f*c-d*l,d=h,g=g+this.B_re[e]*f-this.B_im[e]*d,p=p+this.B_im[e]*f+this.B_re[e]*d;return t.x=p*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,o=i-this.x0,s=(r-this.y0)/this.a,a=o/this.a,u=1,h=0,c=0,l=0;for(e=1;e<=6;e++)n=h*s+u*a,u=u*s-h*a,h=n,c=c+this.C_re[e]*u-this.C_im[e]*h,l=l+this.C_im[e]*u+this.C_re[e]*h;for(var f=0;f<this.iterations;f++){var d,g=c,p=l,v=s,y=a;for(e=2;e<=6;e++)d=p*c+g*l,g=g*c-p*l,p=d,v+=(e-1)*(this.B_re[e]*g-this.B_im[e]*p),y+=(e-1)*(this.B_im[e]*g+this.B_re[e]*p);g=1,p=0;var m=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)d=p*c+g*l,g=g*c-p*l,p=d,m+=e*(this.B_re[e]*g-this.B_im[e]*p),x+=e*(this.B_im[e]*g+this.B_re[e]*p);var E=m*m+x*x;c=(v*m+y*x)/E,l=(y*m-v*x)/E}var w=c,_=l,I=1,b=0;for(e=1;e<=9;e++)I*=w,b+=this.D[e]*I;var M=this.lat0+b*_u*1e5,S=this.long0+_;return t.x=S,t.y=M,t},names:["New_Zealand_Map_Grid","nzmg"]};var kc={init:function(){},forward:function(t){var e=t.x,n=t.y,i=ih(e-this.long0),r=this.x0+this.a*i,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=ih(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},zc=20;var jc={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Yh(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=ih(i-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(r),s=zc;s;--s){var a=(this.m*r+Math.sin(r)-o)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<Nu)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var u=Math.sin(r),h=Math.cos(r);n=this.a*Xh(r,u,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Pc((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Pc(Math.sin(e)/this.n)),i=ih(i+this.long0),e=xc(e)):(e=Wh(t.y/this.a,this.es,this.en),(r=Math.abs(e))<Iu?(r=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=ih(n)):r-Nu<Iu&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]};var Bc={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=ih(e-this.long0),r=n,o=Math.PI*Math.sin(n),s=0;;s++){var a=-(r+Math.sin(r)-o)/(1+Math.cos(r));if(r+=a,Math.abs(a)<Nu)break}r/=2,Math.PI/2-Math.abs(n)<Nu&&(i=0);var u=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=u,t.y=h,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),.999999999999<Math.abs(n)&&(n=.999999999999),e=Math.asin(n);var i=ih(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,1<Math.abs(n)&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]};var Uc={init:function(){Math.abs(this.lat1+this.lat2)<Nu||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gc(this.es),this.e1=pc(this.es),this.e2=vc(this.es),this.e3=yc(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=eh(this.e,this.sinphi,this.cosphi),this.ml1=dc(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Nu?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=eh(this.e,this.sinphi,this.cosphi),this.ml2=dc(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=dc(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=dc(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var o=this.ns*ih(n-this.long0),s=this.x0+e*Math.sin(o),a=this.y0+this.rh-e*Math.cos(o);return t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,0<=this.ns?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==n&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=ih(this.long0+o/this.ns),i=xc(this.g-n/this.a),t.x=r,t.y=i,t;var s=this.g-n/this.a;return i=Ec(s,this.e0,this.e1,this.e2,this.e3),r=ih(this.long0+o/this.ns),t.x=r,t.y=i,t},names:["Equidistant_Conic","eqdc"]};var Vc={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,o=ih(i-this.long0);Math.abs(r)<=Nu&&(e=this.x0+this.R*o,n=this.y0);var s=Pc(2*Math.abs(r/Math.PI));(Math.abs(o)<=Nu||Math.abs(Math.abs(r)-Iu)<=Nu)&&(e=this.x0,n=0<=r?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/o-o/Math.PI),u=a*a,h=Math.sin(s),c=Math.cos(s),l=c/(h+c-1),f=l*l,d=l*(2/h-1),g=d*d,p=Math.PI*this.R*(a*(l-g)+Math.sqrt(u*(l-g)*(l-g)-(g+u)*(f-g)))/(g+u);o<0&&(p=-p),e=this.x0+p;var v=u+l;return p=Math.PI*this.R*(d*v-a*Math.sqrt((g+u)*(u+1)-v*v))/(g+u),n=0<=r?this.y0+p:this.y0-p,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,o,s,a,u,h,c,l,f;return t.x-=this.x0,t.y-=this.y0,l=Math.PI*this.R,o=(i=t.x/l)*i+(r=t.y/l)*r,l=3*(r*r/(u=-2*(s=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(a=s-2*r*r+i*i)*a*a/u/u/u-9*s*a/u/u)/27)/(h=(s-a*a/3/u)/u)/(c=2*Math.sqrt(-h/3)),1<Math.abs(l)&&(l=0<=l?1:-1),f=Math.acos(l)/3,n=0<=t.y?(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-a/3/u)*Math.PI,e=Math.abs(i)<Nu?this.long0:ih(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(i*i-r*r)+o*o))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Yc={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,s,a,u,h,c,l,f,d,g,p,v,y,m,x,E,w,_,I=t.x,b=t.y,M=Math.sin(t.y),S=Math.cos(t.y),N=ih(I-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Nu?(t.x=this.x0+this.a*(Iu-b)*Math.sin(N),t.y=this.y0-this.a*(Iu-b)*Math.cos(N)):Math.abs(this.sin_p12+1)<=Nu?(t.x=this.x0+this.a*(Iu+b)*Math.sin(N),t.y=this.y0+this.a*(Iu+b)*Math.cos(N)):(m=this.sin_p12*M+this.cos_p12*S*Math.cos(N),y=(v=Math.acos(m))/Math.sin(v),t.x=this.x0+this.a*y*S*Math.sin(N),t.y=this.y0+this.a*y*(this.cos_p12*M-this.sin_p12*S*Math.cos(N))):(e=gc(this.es),n=pc(this.es),i=vc(this.es),r=yc(this.es),Math.abs(this.sin_p12-1)<=Nu?(o=this.a*dc(e,n,i,r,Iu),s=this.a*dc(e,n,i,r,b),t.x=this.x0+(o-s)*Math.sin(N),t.y=this.y0-(o-s)*Math.cos(N)):Math.abs(this.sin_p12+1)<=Nu?(o=this.a*dc(e,n,i,r,Iu),s=this.a*dc(e,n,i,r,b),t.x=this.x0+(o+s)*Math.sin(N),t.y=this.y0+(o+s)*Math.cos(N)):(a=M/S,u=mc(this.a,this.e,this.sin_p12),h=mc(this.a,this.e,M),c=Math.atan((1-this.es)*a+this.es*u*this.sin_p12/(h*S)),x=0===(l=Math.atan2(Math.sin(N),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(N)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(l)-Math.PI)<=Nu?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(N)*Math.cos(c)/Math.sin(l)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),v=u*x*(1-(E=x*x)*(p=(d=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es))*d)*(1-p)/6+(w=E*x)/8*(g=f*d)*(1-2*p)+(_=w*x)/120*(p*(4-7*p)-3*f*f*(1-7*p))-_*x/48*g),t.x=this.x0+v*Math.sin(l),t.y=this.y0+v*Math.cos(l))),t},inverse:function(t){var e,n,i,r,o,s,a,u,h,c,l,f,d,g,p,v,y,m,x,E,w,_;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Iu*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=Nu?s=this.lat0:(s=Pc(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-Iu,o=Math.abs(a)<=Nu?0<=this.lat0?ih(this.long0+Math.atan2(t.x,-t.y)):ih(this.long0-Math.atan2(-t.x,t.y)):ih(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=o,t.y=s,t}return u=gc(this.es),h=pc(this.es),c=vc(this.es),l=yc(this.es),Math.abs(this.sin_p12-1)<=Nu?(f=this.a*dc(u,h,c,l,Iu),e=Math.sqrt(t.x*t.x+t.y*t.y),s=Ec((f-e)/this.a,u,h,c,l),o=ih(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=Nu?(f=this.a*dc(u,h,c,l,Iu),e=Math.sqrt(t.x*t.x+t.y*t.y),s=Ec((e-f)/this.a,u,h,c,l),o=ih(this.long0+Math.atan2(t.x,t.y))):(e=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.x,t.y),d=mc(this.a,this.e,this.sin_p12),v=Math.cos(p),m=-(y=this.e*this.cos_p12*v)*y/(1-this.es),x=3*this.es*(1-m)*this.sin_p12*this.cos_p12*v/(1-this.es),_=1-m*(w=(E=e/d)-m*(1+m)*Math.pow(E,3)/6-x*(1+3*m)*Math.pow(E,4)/24)*w/2-E*w*w*w/6,g=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*v),o=ih(this.long0+Math.asin(Math.sin(p)*Math.sin(w)/Math.cos(g))),s=Math.atan((1-this.es*_*this.sin_p12/Math.sin(g))*Math.tan(g)/(1-this.es))),t.x=o,t.y=s,t},names:["Azimuthal_Equidistant","aeqd"]};var Xc,Wc={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,o,s,a,u=t.x,h=t.y;return i=ih(u-this.long0),e=Math.sin(h),n=Math.cos(h),r=Math.cos(i),(0<(o=this.sin_p14*e+this.cos_p14*n*r)||Math.abs(o)<=Nu)&&(s=1*this.a*n*Math.sin(i),a=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=s,t.y=a,t},inverse:function(t){var e,n,i,r,o,s,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Pc(e/this.a),i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=Nu?a=this.lat0:(a=Pc(r*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.abs(this.lat0)-Iu,s=Math.abs(o)<=Nu?0<=this.lat0?ih(this.long0+Math.atan2(t.x,-t.y)):ih(this.long0-Math.atan2(-t.x,t.y)):ih(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i))),t.x=s,t.y=a,t},names:["ortho"]};bh.defaultDatum="WGS84",bh.Proj=ph,bh.WGS84=new bh.Proj("WGS84"),bh.Point=Bh,bh.toPoint=xh,bh.defs=Zu,bh.transform=Eh,bh.mgrs=Th,bh.version="2.4.3",(Xc=bh).Proj.projections.add(Hh),Xc.Proj.projections.add(ec),Xc.Proj.projections.add(ic),Xc.Proj.projections.add(ac),Xc.Proj.projections.add(uc),Xc.Proj.projections.add(hc),Xc.Proj.projections.add(cc),Xc.Proj.projections.add(lc),Xc.Proj.projections.add(fc),Xc.Proj.projections.add(wc),Xc.Proj.projections.add(Lc),Xc.Proj.projections.add(Oc),Xc.Proj.projections.add(Rc),Xc.Proj.projections.add(Ac),Xc.Proj.projections.add(Dc),Xc.Proj.projections.add(Gc),Xc.Proj.projections.add(qc),Xc.Proj.projections.add(kc),Xc.Proj.projections.add(jc),Xc.Proj.projections.add(Bc),Xc.Proj.projections.add(Uc),Xc.Proj.projections.add(Vc),Xc.Proj.projections.add(Yc),Xc.Proj.projections.add(Wc),bh.defs("EPSG:3828","+proj=tmerc +towgs84=-752,-358,-179,-0.0000011698,0.0000018398,0.0000009822,0.00002329 +lat_0=0 +lon_0=121 +x_0=250000 +y_0=0 +k=0.9999 +ellps=aust_SA +units=m +no_defs"),bh.defs("TWD67",bh.defs("EPSG:3828")),bh.defs("3828",bh.defs("EPSG:3828")),bh.defs("102441",bh.defs("EPSG:3828")),bh.defs("EPSG:3826","+proj=tmerc +lat_0=0 +lon_0=121 +k=0.9999 +x_0=250000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),bh.defs("TWD97",bh.defs("EPSG:3826")),bh.defs("3826",bh.defs("EPSG:3826")),bh.defs("102443",bh.defs("EPSG:3826")),bh.defs("4326",bh.defs("EPSG:4326")),bh.defs("3857",bh.defs("EPSG:3857")),bh.defs("102113",bh.defs("EPSG:3857")),bh.defs("102100",bh.defs("EPSG:3857")),bh.defs("EPSG:3825","+proj=tmerc +lat_0=0 +lon_0=119 +k=0.9999 +x_0=250000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),bh.defs("3825",bh.defs("EPSG:3825")),bh.defs("EPSG:3827","+proj=tmerc +lat_0=0 +lon_0=119 +k=0.9999 +x_0=250000 +y_0=0 +ellps=aust_SA +units=m +no_defs"),bh.defs("3827",bh.defs("EPSG:3827")),bh.defs("EPSG:3823","+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"),bh.defs("3823",bh.defs("EPSG:3823"));var Hc=["EPSG:3828","TWD67","3828","102441","EPSG:3825","3825","EPSG:3827","3827","EPSG:3823","3823"],Jc=["EPSG:3826","TWD97","3826","102443"];Array.prototype.push.apply(Hc,Jc);var Kc=["EPSG:3857","GOOGLE","3857","102113"];Array.prototype.push.apply(Hc,Kc);var Zc=["EPSG:4326","WGS84","4326","102100"];Array.prototype.push.apply(Hc,Zc);var Qc=function(t,e,n){if(t=t.toString().toUpperCase(),e=e.toString().toUpperCase(),n=n||[],-1===Hc.indexOf(t))throw new Error("fromProjection type error");if(-1===Hc.indexOf(e))throw new Error("toProjection type error");return bh(t,e,n).map(function(t){return-1!==Jc.indexOf(e)?+t.toFixed(2):-1!==Kc.indexOf(e)?+t.toFixed(2):-1!==Zc.indexOf(e)?+t.toFixed(6):t})};function $c(t,e,n){if(!nl(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!el(t))throw new Error("bbox must only contain numbers")})}(i),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function tl(t,e,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++){if(0===i&&0===o&&!el(r[0][0])||!el(r[0][1]))throw new Error("coordinates must contain numbers");if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}}return $c({type:"Polygon",coordinates:t},e,n)}function el(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function nl(t){return!!t&&t.constructor===Object}Qc.version="1.0.8";var il=6371008.8,rl={meters:il,metres:il,millimeters:1e3*il,millimetres:1e3*il,centimeters:100*il,centimetres:100*il,kilometers:il/1e3,kilometres:il/1e3,miles:il/1609.344,nauticalmiles:il/1852,inches:39.37*il,yards:il/1.0936,feet:3.28084*il,radians:1,degrees:il/111325};function sl(t,e,n){if(!cl(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!hl(t))throw new Error("bbox must only contain numbers")})}(i),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function al(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function ul(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=rl[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}(function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=rl[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(t,e),n||"kilometers")}function hl(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function cl(t){return!!t&&t.constructor===Object}function ll(t,e,n,i){if(!cl(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.properties;if(!t)throw new Error("origin is required");if(null==e)throw new Error("distance is required");if(null==n)throw new Error("bearing is required");if(!(0<=e))throw new Error("distance must be greater than 0");var s=ul(e,r,"meters"),a=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),u=function(t,e,n,i){i=void 0===i?il:Number(i);var r=e/i,o=t[0]*Math.PI/180,s=al(t[1]),a=al(n),u=r*Math.cos(a),h=s+u;Math.abs(h)>Math.PI/2&&(h=0<h?Math.PI-h:-Math.PI-h);var c=Math.log(Math.tan(h/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),l=1e-11<Math.abs(c)?u/c:Math.cos(s),f=r*Math.sin(a)/l;return[(180*(o+f)/Math.PI+540)%360-180,180*h/Math.PI]}(a,s,n);return u[0]+=180<u[0]-a[0]?-360:180<a[0]-u[0]?360:0,function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hl(t[0])||!hl(t[1]))throw new Error("coordinates must contain numbers");return sl({type:"Point",coordinates:t},e,n)}(u,o)}function fl(t,e,n){if(!(i=n=n||{})||i.constructor!==Object)throw new Error("options is invalid");var i,r=n.bbox,o=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!dl(t))throw new Error("bbox must only contain numbers")})}(r),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var s={type:"Feature"};return o&&(s.id=o),r&&(s.bbox=r),s.properties=e||{},s.geometry=t,s}function dl(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function gl(t,e){var n=0,i=0,r=0;return function t(e,n,i){if(null!==e)for(var r,o,s,a,u,h,c,l,f=0,d=0,g=e.type,p="FeatureCollection"===g,v="Feature"===g,y=p?e.features.length:1,m=0;m<y;m++){u=(l=!!(c=p?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var x=0;x<u;x++){var E=0,w=0;if(null!==(a=l?c.geometries[x]:c)){h=a.coordinates;var _=a.type;switch(f=!i||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===n(h,d,m,E,w))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(!1===n(h[r],d,m,E,w))return!1;d++,"MultiPoint"===_&&E++}"LineString"===_&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(o=0;o<h[r].length-f;o++){if(!1===n(h[r][o],d,m,E,w))return!1;d++}"MultiLineString"===_&&E++,"Polygon"===_&&w++}"Polygon"===_&&E++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for("MultiPolygon"===_&&(w=0),o=0;o<h[r].length;o++){for(s=0;s<h[r][o].length-f;s++){if(!1===n(h[r][o][s],d,m,E,w))return!1;d++}w++}E++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],n,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}(t,function(t){n+=t[0],i+=t[1],r++},!0),function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!dl(t[0])||!dl(t[1]))throw new Error("coordinates must contain numbers");return fl({type:"Point",coordinates:t},e,n)}([n/r,i/r],e)}function pl(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function vl(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function yl(t,e,n){if(!(i=n=n||{})||i.constructor!==Object)throw new Error("options is invalid");var i,r,o=n.final;if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");return 180<(r=o?ml(vl(e),vl(t)):ml(vl(t),vl(e)))?-(360-r):r}function ml(t,e){var n=pl(t[1]),i=pl(e[1]),r=pl(e[0]-t[0]);r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);var o=Math.log(Math.tan(i/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(function(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}(Math.atan2(r,o))+360)%360}var xl=6371008.8,El={meters:xl,metres:xl,millimeters:1e3*xl,millimetres:1e3*xl,centimeters:100*xl,centimetres:100*xl,kilometers:xl/1e3,kilometres:xl/1e3,miles:xl/1609.344,nauticalmiles:xl/1852,inches:39.37*xl,yards:xl/1.0936,feet:3.28084*xl,radians:1,degrees:xl/111325};function wl(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=El[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}(function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=El[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(t,e),n||"kilometers")}function _l(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Il(t,e,n){if(!(i=n=n||{})||i.constructor!==Object)throw new Error("options is invalid");var i,r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var o=_l(t),s=_l(e);return s[0]+=180<s[0]-o[0]?-360:180<o[0]-s[0]?360:0,wl(function(t,e,n){var i=n=void 0===n?xl:Number(n),r=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-r,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),h=1e-11<Math.abs(u)?s/u:Math.cos(r);return Math.sqrt(s*s+h*h*a*a)*i}(o,s),"meters",r)}function bl(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ml(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return Ml(t)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Sl(t);default:throw new Error("unknown GeoJSON type")}var e,n}function Ml(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(i){var r={};if(!i)return r;Object.keys(i).forEach(function(t){var e=i[t];"object"==typeof e?null===e?r[t]=null:e.length?r[t]=e.map(function(t){return t}):r[t]=n(e):r[t]=e});return r}(e.properties),n.geometry=Sl(e.geometry),n}function Sl(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return Sl(t)}):e.coordinates=function e(t){if("object"!=typeof t[0])return t.slice();return t.map(function(t){return e(t)})}(t.coordinates),e}function Nl(t,r,e){if(!(n=e=e||{})||n.constructor!==Object)throw new Error("options is invalid");var n,o=e.pivot,i=e.mutate;if(!t)throw new Error("geojson is required");if(null==r||isNaN(r))throw new Error("angle is required");return 0===r||(o||(o=gl(t)),!1!==i&&void 0!==i||(t=bl(t)),function t(e,n,i){if(null!==e)for(var r,o,s,a,u,h,c,l,f=0,d=0,g=e.type,p="FeatureCollection"===g,v="Feature"===g,y=p?e.features.length:1,m=0;m<y;m++){u=(l=!!(c=p?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var x=0;x<u;x++){var E=0,w=0;if(null!==(a=l?c.geometries[x]:c)){h=a.coordinates;var _=a.type;switch(f=!i||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===n(h,d,m,E,w))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(!1===n(h[r],d,m,E,w))return!1;d++,"MultiPoint"===_&&E++}"LineString"===_&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(o=0;o<h[r].length-f;o++){if(!1===n(h[r][o],d,m,E,w))return!1;d++}"MultiLineString"===_&&E++,"Polygon"===_&&w++}"Polygon"===_&&E++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for("MultiPolygon"===_&&(w=0),o=0;o<h[r].length;o++){for(s=0;s<h[r][o].length-f;s++){if(!1===n(h[r][o][s],d,m,E,w))return!1;d++}w++}E++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],n,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}(t,function(t){var e=yl(o,t)+r,n=Il(o,t),i=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(ll(o,n,e));t[0]=i[0],t[1]=i[1]})),t}function Cl(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ll(t,e,n,i){var r=(i=i||{}).steps||64,o=i.units||"kilometers",s=i.angle||0,a=i.pivot||t,u=i.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!nl(i))throw new Error("options must be an object");if(!el(r))throw new Error("steps must be a number");if(!el(s))throw new Error("angle must be a number");var h=Cl(t);if("degrees"===o)var c=function(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}(s);else e=ll(t,e,90,{units:o}),n=ll(t,n,0,{units:o}),e=Cl(e)[0]-h[0],n=Cl(n)[1]-h[1];for(var l=[],f=0;f<r;f+=1){var d=-360*f/r,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(Pl(d),2)),p=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(Pl(d),2));if(d<-90&&-270<=d&&(g=-g),d<-180&&-360<=d&&(p=-p),"degrees"===o){var v=g*Math.cos(c)+p*Math.sin(c),y=p*Math.cos(c)-g*Math.sin(c);g=v,p=y}l.push([g+h[0],p+h[1]])}return l.push(l[0]),"degrees"===o?tl([l],u):Nl(tl([l],u),s,{pivot:a})}function Pl(t){var e=t*Math.PI/180;return Math.tan(e)}var Ol=6371008.8,Rl={meters:Ol,metres:Ol,millimeters:1e3*Ol,millimetres:1e3*Ol,centimeters:100*Ol,centimetres:100*Ol,kilometers:Ol/1e3,kilometres:Ol/1e3,miles:Ol/1609.344,nauticalmiles:Ol/1852,inches:39.37*Ol,yards:Ol/1.0936,feet:3.28084*Ol,radians:1,degrees:Ol/111325};function Tl(t,e,n){if(!Gl(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!Fl(t))throw new Error("bbox must only contain numbers")})}(i),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function Al(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function Dl(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Fl(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Gl(t){return!!t&&t.constructor===Object}function ql(t,e,n,i){if(!Gl(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.properties,s=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),a=Dl(s[0]),u=Dl(s[1]),h=Dl(n),c=function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Rl[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r),l=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(h));return function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Fl(t[0])||!Fl(t[1]))throw new Error("coordinates must contain numbers");return Tl({type:"Point",coordinates:t},e,n)}([Al(a+Math.atan2(Math.sin(h)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(l))),Al(l)],o)}function kl(t,e,n){var i=(n=n||{}).steps||64,r=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be a number");i=i||64,r=r||t.properties||{};for(var o=[],s=0;s<i;s++)o.push(ql(t,e,-360*s/i,n).geometry.coordinates);return o.push(o[0]),function(t,e,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++){if(0===i&&0===o&&!Fl(r[0][0])||!Fl(r[0][1]))throw new Error("coordinates must contain numbers");if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}}return Tl({type:"Polygon",coordinates:t},e,n)}([o],r)}var zl=Ht,jl=Fe.radiansToDistance,Bl=6371008.8,Ul={meters:Bl,metres:Bl,millimeters:1e3*Bl,millimetres:1e3*Bl,centimeters:100*Bl,centimetres:100*Bl,kilometers:Bl/1e3,kilometres:Bl/1e3,miles:Bl/1609.344,nauticalmiles:Bl/1852,inches:39.37*Bl,yards:Bl/1.0936,feet:3.28084*Bl,radians:1,degrees:Bl/111325};function Vl(t,e,n){if(!Ql(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!Zl(t))throw new Error("bbox must only contain numbers")})}(i),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function Yl(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Zl(t[0])||!Zl(t[1]))throw new Error("coordinates must contain numbers");return Vl({type:"Point",coordinates:t},e,n)}function Xl(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Zl(t[0][1])||!Zl(t[0][1]))throw new Error("coordinates must contain numbers");return Vl({type:"LineString",coordinates:t},e,n)}function Wl(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Ul[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function Hl(t){if(null==t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function Jl(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Kl(t,e,n){if(null==t)throw new Error("length is required");if(!(0<=t))throw new Error("length must be a positive number");return Wl(function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=Ul[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(t,e),n||"kilometers")}function Zl(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ql(t){return!!t&&t.constructor===Object}function $l(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function tf(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function ef(t,e,n){if(!Ql(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return(ef(e,t)+180)%360;var i=$l(t),r=$l(e),o=Jl(i[0]),s=Jl(r[0]),a=Jl(i[1]),u=Jl(r[1]),h=Math.sin(s-o)*Math.cos(u),c=Math.cos(a)*Math.sin(u)-Math.sin(a)*Math.cos(u)*Math.cos(s-o);return function(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}(Math.atan2(h,c))}function nf(t,e,n){if(!Ql(n=n||{}))throw new Error("options is invalid");var i=n.units,r=$l(t),o=$l(e),s=Jl(o[1]-r[1]),a=Jl(o[0]-r[0]),u=Jl(r[1]),h=Jl(o[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(h);return Wl(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i)}function rf(t,e,n){if(null!==t)for(var i,r,o,s,a,u,h,c,l=0,f=0,d=t.type,g="FeatureCollection"===d,p="Feature"===d,v=g?t.features.length:1,y=0;y<v;y++){a=(c=!!(h=g?t.features[y].geometry:p?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var m=0;m<a;m++){var x=0,E=0;if(null!==(s=c?h.geometries[m]:h)){u=s.coordinates;var w=s.type;switch(l=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,y,x,E))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(i=0;i<u.length;i++){if(!1===e(u[i],f,y,x,E))return!1;f++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(i=0;i<u.length;i++){for(r=0;r<u[i].length-l;r++){if(!1===e(u[i][r],f,y,x,E))return!1;f++}"MultiLineString"===w&&x++,"Polygon"===w&&E++}"Polygon"===w&&x++;break;case"MultiPolygon":for(i=0;i<u.length;i++){for("MultiPolygon"===w&&(E=0),r=0;r<u[i].length;r++){for(o=0;o<u[i][r].length-l;o++){if(!1===e(u[i][r][o],f,y,x,E))return!1;f++}E++}x++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===rf(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function of(t,h){!function(t,e){var n,i,r,o,s,a,u,h,c,l,f=0,d="FeatureCollection"===t.type,g="Feature"===t.type,p=d?t.features.length:1;for(n=0;n<p;n++){for(a=d?t.features[n].geometry:g?t.geometry:t,h=d?t.features[n].properties:g?t.properties:{},c=d?t.features[n].bbox:g?t.bbox:void 0,l=d?t.features[n].id:g?t.id:void 0,s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,h,c,l))return;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)if(!1===e(o.geometries[i],f,h,c,l))return;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,h,c,l))return;f++}}(t,function(t,e,n,i,r){var o,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==h(Vl(t,n,{bbox:i,id:r}),e,0)&&void 0}switch(s){case"MultiPoint":o="Point";break;case"MultiLineString":o="LineString";break;case"MultiPolygon":o="Polygon"}for(var a=0;a<t.coordinates.length;a++){var u=t.coordinates[a];if(!1===h(Vl({type:o,coordinates:u},n),e,a))return!1}})}function sf(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return af(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return af(t)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return uf(t);default:throw new Error("unknown GeoJSON type")}var e,n}function af(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(i){var r={};if(!i)return r;Object.keys(i).forEach(function(t){var e=i[t];"object"==typeof e?null===e?r[t]=null:e.length?r[t]=e.map(function(t){return t}):r[t]=n(e):r[t]=e});return r}(e.properties),n.geometry=uf(e.geometry),n}function uf(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return uf(t)}):e.coordinates=function e(t){if("object"!=typeof t[0])return t.slice();return t.map(function(t){return e(t)})}(t.coordinates),e}function hf(t,e){return cf(t,"mercator",e)}function cf(t,n,e){if(!Ql(e=e||{}))throw new Error("options is invalid");var i=e.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&Zl(t[0])?t="mercator"===n?lf(t):ff(t):(!0!==i&&(t=sf(t)),rf(t,function(t){var e="mercator"===n?lf(t):ff(t);t[0]=e[0],t[1]=e[1]})),t}function lf(t){var e,n=Math.PI/180,i=20037508.342789244,r=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:0<e?1:0))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return r[0]>i&&(r[0]=i),r[0]<-i&&(r[0]=-i),r[1]>i&&(r[1]=i),r[1]<-i&&(r[1]=-i),r}function ff(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function df(t,e,r){if(!Ql(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=Yl(t):"Point"===t.type?t=Vl(t):tf(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=Xl(e):"LineString"===e.type?e=Vl(e):tf(e,"LineString","line");var l,o=1/0,s=t.geometry.coordinates;return l=function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],i=function(t,e,n,i){var r=i.mercator,o=!0!==r?nf(e,t,i):gf(e,t,i),s=Hl(!0!==r?ef(e,t):yl(e,t)),a=Hl(!0!==r?ef(e,n):yl(e,n)),u=Math.abs(s-a);if(90<u)return o;var h=(a+180)%360,c=Hl(!0!==r?ef(n,t):yl(n,t)),l=Math.abs(c-h);180<l&&(l=Math.abs(l-360));return 90<l?!0!==r?nf(t,n,i):gf(t,n,i):!0!==r?o*Math.sin(Jl(u)):function(t,e,n,i){var r=0;(180<=Math.abs(t[0])||180<=Math.abs(e[0])||180<=Math.abs(n[0]))&&(r=0<t[0]||0<e[0]||0<n[0]?-180:180);var o,s,a,u,h,c,l,f,d,g,p,v,y,m=Yl(n),x=hf([t[0]+r,t[1]]),E=hf([e[0]+r,e[1]]),w=hf([n[0]+r,n[1]]),_=(a=E,u=w,h=(s=x)[0],c=s[1],l=a[0],f=a[1],d=u[0],g=u[1],cf([h+(y=((d-h)*(p=l-h)+(g-c)*(v=f-c))/(p*p+v*v))*p,c+y*v],"wgs84",o));return 0!==r&&(_[0]-=r),Il(m,_,i)}(e,n,t,i)}(s,e,n,r);i<o&&(o=i)},of(e,function(s,a,u){var h=0;if(s.geometry){var c,t=s.geometry.type;if("Point"!==t&&"MultiPoint"!==t)return!1!==rf(s,function(t,e,n,i,r){if(void 0!==c){var o=Xl([c,t],s.properties);if(!1===l(o,a,u,r,h))return!1;h++,c=t}else c=t})&&void 0}}),o}function gf(t,e,n){var i=n.units,r=0;180<=Math.abs(t[0])&&(r=0<t[0]?-180:180),180<=Math.abs(e[0])&&(r=0<e[0]?-180:180);var o=hf([t[0]+r,t[1]]),s=hf([e[0]+r,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]);return Kl(Math.sqrt(u),"meters",i)}function pf(t,e,n){if(!yf(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&mf(i),r&&xf(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function vf(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function yf(t){return!!t&&t.constructor===Object}function mf(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!vf(t))throw new Error("bbox must only contain numbers")})}function xf(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Ef(t,e){if(!yf(e=e||{}))throw new Error("options is invalid");var n=e.properties,i=function(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}(t),r=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t);if(n=n||t.properties||{},!r.length)throw new Error("polygon must contain coordinates");switch(i){case"Polygon":return wf(r,n);case"MultiPolygon":var o=[];return r.forEach(function(t){o.push(wf(t,n))}),function(t,e){if(!yf(e=e||{}))throw new Error("options is invalid");var n=e.bbox,i=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&mf(n),i&&xf(i);var r={type:"FeatureCollection"};return i&&(r.id=i),n&&(r.bbox=n),r.features=t,r}(o);default:throw new Error("geom "+i+" not supported")}}function wf(t,e){return 1<t.length?function(t,e,n){if(!t)throw new Error("coordinates is required");return pf({type:"MultiLineString",coordinates:t},e,n)}(t,e):function(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!vf(t[0][1])||!vf(t[0][1]))throw new Error("coordinates must contain numbers");return pf({type:"LineString",coordinates:t},e,n)}(t[0],e)}var _f=6371008.8,If={meters:_f,metres:_f,millimeters:1e3*_f,millimetres:1e3*_f,centimeters:100*_f,centimetres:100*_f,kilometers:_f/1e3,kilometres:_f/1e3,miles:_f/1609.344,nauticalmiles:_f/1852,inches:39.37*_f,yards:_f/1.0936,feet:3.28084*_f,radians:1,degrees:_f/111325};function bf(t,e,n){if(!Lf(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!Cf(t))throw new Error("bbox must only contain numbers")})}(i),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function Mf(t,e,n){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Cf(t[0][1])||!Cf(t[0][1]))throw new Error("coordinates must contain numbers");return bf({type:"LineString",coordinates:t},e,n)}function Sf(t){if(null==t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function Nf(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Cf(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Lf(t){return!!t&&t.constructor===Object}function Pf(t,e,n,i){if(!Lf(i=i||{}))throw new Error("options is invalid");var r=i.units,o=i.properties,s=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&2<=t.length&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),a=Nf(s[0]),u=Nf(s[1]),h=Nf(n),c=function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=If[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}(e,r),l=Math.asin(Math.sin(u)*Math.cos(c)+Math.cos(u)*Math.sin(c)*Math.cos(h));return function(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Cf(t[0])||!Cf(t[1]))throw new Error("coordinates must contain numbers");return bf({type:"Point",coordinates:t},e,n)}([Sf(a+Math.atan2(Math.sin(h)*Math.sin(c)*Math.cos(u),Math.cos(c)-Math.sin(u)*Math.sin(l))),Sf(l)],o)}function Of(t){var e=t%360;return e<0&&(e+=360),e}function Rf(t,e,n){if(!Af(n=n||{}))throw new Error("options is invalid");var i=n.bbox,r=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");i&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!Tf(t))throw new Error("bbox must only contain numbers")})}(i),r&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(r);var o={type:"Feature"};return r&&(o.id=r),i&&(o.bbox=i),o.properties=e||{},o.geometry=t,o}function Tf(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Af(t){return!!t&&t.constructor===Object}function Df(t,e,n,i,r){if(!Af(r=r||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof r)throw new Error("options must be an object");if(Ff(n)===Ff(i))return kl(t,e,r);var o=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t),s=function(t,e,n,i,r){if(!Lf(r=r||{}))throw new Error("options is invalid");var o=r.steps,s=r.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(null==n)throw new Error("bearing1 is required");if(null==i)throw new Error("bearing2 is required");if("object"!=typeof r)throw new Error("options must be an object");o=o||64;var a=Of(n),u=Of(i),h=t.properties;if(a===u)return Mf(kl(t,e,r).geometry.coordinates[0],h);for(var c=a,l=a<u?u:u+360,f=c,d=[],g=0;f<l;)d.push(Pf(t,e,f,s).geometry.coordinates),f=c+360*++g/o;return l<f&&d.push(Pf(t,e,l,s).geometry.coordinates),Mf(d,h)}(t,e,n,i,r),a=[[o]];return function t(e,n,i){if(null!==e)for(var r,o,s,a,u,h,c,l,f=0,d=0,g=e.type,p="FeatureCollection"===g,v="Feature"===g,y=p?e.features.length:1,m=0;m<y;m++){u=(l=!!(c=p?e.features[m].geometry:v?e.geometry:e)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var x=0;x<u;x++){var E=0,w=0;if(null!==(a=l?c.geometries[x]:c)){h=a.coordinates;var _=a.type;switch(f=!i||"Polygon"!==_&&"MultiPolygon"!==_?0:1,_){case null:break;case"Point":if(!1===n(h,d,m,E,w))return!1;d++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<h.length;r++){if(!1===n(h[r],d,m,E,w))return!1;d++,"MultiPoint"===_&&E++}"LineString"===_&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<h.length;r++){for(o=0;o<h[r].length-f;o++){if(!1===n(h[r][o],d,m,E,w))return!1;d++}"MultiLineString"===_&&E++,"Polygon"===_&&w++}"Polygon"===_&&E++;break;case"MultiPolygon":for(r=0;r<h.length;r++){for("MultiPolygon"===_&&(w=0),o=0;o<h[r].length;o++){for(s=0;s<h[r][o].length-f;s++){if(!1===n(h[r][o][s],d,m,E,w))return!1;d++}w++}E++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===t(a.geometries[r],n,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}(s,function(t){a[0].push(t)}),a[0].push(o),function(t,e,n){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++){if(0===i&&0===o&&!Tf(r[0][0])||!Tf(r[0][1]))throw new Error("coordinates must contain numbers");if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}}return Rf({type:"Polygon",coordinates:t},e,n)}(a)}function Ff(t){var e=t%360;return e<0&&(e+=360),e}var Gf=function(){return new qf};function qf(){this.reset()}qf.prototype={constructor:qf,reset:function(){this.s=this.t=0},add:function(t){zf(kf,t,this.t),zf(this,kf.s,this.s),this.s?this.t+=kf.t:this.s=kf.t},valueOf:function(){return this.s}};var kf=new qf;function zf(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}var jf=1e-6,Bf=Math.PI,Uf=Bf/2,Vf=Bf/4,Yf=2*Bf,Xf=180/Bf,Wf=Bf/180,Hf=Math.abs,Jf=Math.atan,Kf=Math.atan2,Zf=Math.cos,Qf=Math.ceil,$f=Math.exp,td=Math.log,ed=Math.pow,nd=Math.sin,id=Math.sign||function(t){return 0<t?1:t<0?-1:0},rd=Math.sqrt,od=Math.tan;function sd(t){return 1<t?0:t<-1?Bf:Math.acos(t)}function ad(t){return 1<t?Uf:t<-1?-Uf:Math.asin(t)}function ud(t){return(t=nd(t/2))*t}function hd(){}function cd(t,e){t&&fd.hasOwnProperty(t.type)&&fd[t.type](t,e)}var ld={Feature:function(t,e){cd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)cd(n[i].geometry,e)}},fd={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){dd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)dd(n[i],e,0)},Polygon:function(t,e){gd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)gd(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)cd(n[i],e)}};function dd(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function gd(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)dd(t[n],e,1);e.polygonEnd()}var pd,vd,yd,md,xd,Ed=function(t,e){t&&ld.hasOwnProperty(t.type)?ld[t.type](t,e):cd(t,e)},wd=Gf(),_d=Gf(),Id={point:hd,lineStart:hd,lineEnd:hd,polygonStart:function(){wd.reset(),Id.lineStart=bd,Id.lineEnd=Md},polygonEnd:function(){var t=+wd;_d.add(t<0?Yf+t:t),this.lineStart=this.lineEnd=this.point=hd},sphere:function(){_d.add(Yf)}};function bd(){Id.point=Sd}function Md(){Nd(pd,vd)}function Sd(t,e){Id.point=Nd,pd=t,vd=e,yd=t*=Wf,md=Zf(e=(e*=Wf)/2+Vf),xd=nd(e)}function Nd(t,e){var n=(t*=Wf)-yd,i=0<=n?1:-1,r=i*n,o=Zf(e=(e*=Wf)/2+Vf),s=nd(e),a=xd*s,u=md*o+a*Zf(r),h=a*i*nd(r);wd.add(Kf(h,u)),yd=t,md=o,xd=s}var Cd,Ld,Pd,Od,Rd,Td,Ad,Dd;function Fd(t){return[Kf(t[1],t[0]),ad(t[2])]}function Gd(t){var e=t[0],n=t[1],i=Zf(n);return[i*Zf(e),i*nd(e),nd(n)]}function qd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function kd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zd(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function jd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Bd(t){var e=rd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var Ud,Vd,Yd=Gf(),Xd={point:Wd,lineStart:Jd,lineEnd:Kd,polygonStart:function(){Xd.point=Zd,Xd.lineStart=Qd,Xd.lineEnd=$d,Yd.reset(),Id.polygonStart()},polygonEnd:function(){Id.polygonEnd(),Xd.point=Wd,Xd.lineStart=Jd,Xd.lineEnd=Kd,wd<0?(Cd=-(Pd=180),Ld=-(Od=90)):jf<Yd?Od=90:Yd<-jf&&(Ld=-90),Vd[0]=Cd,Vd[1]=Pd}};function Wd(t,e){Ud.push(Vd=[Cd=t,Pd=t]),e<Ld&&(Ld=e),Od<e&&(Od=e)}function Hd(t,e){var n=Gd([t*Wf,e*Wf]);if(Dd){var i=kd(Dd,n),r=kd([i[1],-i[0],0],i);Bd(r),r=Fd(r);var o,s=t-Rd,a=0<s?1:-1,u=r[0]*Xf*a,h=180<Hf(s);h^(a*Rd<u&&u<a*t)?(o=r[1]*Xf,Od<o&&(Od=o)):h^(a*Rd<(u=(u+360)%360-180)&&u<a*t)?(o=-r[1]*Xf)<Ld&&(Ld=o):(e<Ld&&(Ld=e),Od<e&&(Od=e)),h?t<Rd?tg(Cd,t)>tg(Cd,Pd)&&(Pd=t):tg(t,Pd)>tg(Cd,Pd)&&(Cd=t):Cd<=Pd?(t<Cd&&(Cd=t),Pd<t&&(Pd=t)):Rd<t?tg(Cd,t)>tg(Cd,Pd)&&(Pd=t):tg(t,Pd)>tg(Cd,Pd)&&(Cd=t)}else Ud.push(Vd=[Cd=t,Pd=t]);e<Ld&&(Ld=e),Od<e&&(Od=e),Dd=n,Rd=t}function Jd(){Xd.point=Hd}function Kd(){Vd[0]=Cd,Vd[1]=Pd,Xd.point=Wd,Dd=null}function Zd(t,e){if(Dd){var n=t-Rd;Yd.add(180<Hf(n)?n+(0<n?360:-360):n)}else Td=t,Ad=e;Id.point(t,e),Hd(t,e)}function Qd(){Id.lineStart()}function $d(){Zd(Td,Ad),Id.lineEnd(),Hf(Yd)>jf&&(Cd=-(Pd=180)),Vd[0]=Cd,Vd[1]=Pd,Dd=null}function tg(t,e){return(e-=t)<0?e+360:e}function eg(t,e){return t[0]-e[0]}function ng(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var ig,rg,og,sg,ag,ug,hg,cg,lg,fg,dg,gg,pg,vg,yg,mg,xg={sphere:hd,point:Eg,lineStart:_g,lineEnd:Mg,polygonStart:function(){xg.lineStart=Sg,xg.lineEnd=Ng},polygonEnd:function(){xg.lineStart=_g,xg.lineEnd=Mg}};function Eg(t,e){t*=Wf;var n=Zf(e*=Wf);wg(n*Zf(t),n*nd(t),nd(e))}function wg(t,e,n){og+=(t-og)/++ig,sg+=(e-sg)/ig,ag+=(n-ag)/ig}function _g(){xg.point=Ig}function Ig(t,e){t*=Wf;var n=Zf(e*=Wf);vg=n*Zf(t),yg=n*nd(t),mg=nd(e),xg.point=bg,wg(vg,yg,mg)}function bg(t,e){t*=Wf;var n=Zf(e*=Wf),i=n*Zf(t),r=n*nd(t),o=nd(e),s=Kf(rd((s=yg*o-mg*r)*s+(s=mg*i-vg*o)*s+(s=vg*r-yg*i)*s),vg*i+yg*r+mg*o);rg+=s,ug+=s*(vg+(vg=i)),hg+=s*(yg+(yg=r)),cg+=s*(mg+(mg=o)),wg(vg,yg,mg)}function Mg(){xg.point=Eg}function Sg(){xg.point=Cg}function Ng(){Lg(gg,pg),xg.point=Eg}function Cg(t,e){gg=t,pg=e,t*=Wf,e*=Wf,xg.point=Lg;var n=Zf(e);vg=n*Zf(t),yg=n*nd(t),mg=nd(e),wg(vg,yg,mg)}function Lg(t,e){t*=Wf;var n=Zf(e*=Wf),i=n*Zf(t),r=n*nd(t),o=nd(e),s=yg*o-mg*r,a=mg*i-vg*o,u=vg*r-yg*i,h=rd(s*s+a*a+u*u),c=ad(h),l=h&&-c/h;lg+=l*s,fg+=l*a,dg+=l*u,rg+=c,ug+=c*(vg+(vg=i)),hg+=c*(yg+(yg=r)),cg+=c*(mg+(mg=o)),wg(vg,yg,mg)}var Pg=function(t){return function(){return t}},Og=function(n,i){function t(t,e){return t=n(t,e),i(t[0],t[1])}return n.invert&&i.invert&&(t.invert=function(t,e){return(t=i.invert(t,e))&&n.invert(t[0],t[1])}),t};function Rg(t,e){return[Bf<t?t-Yf:t<-Bf?t+Yf:t,e]}function Tg(t,e,n){return(t%=Yf)?e||n?Og(Dg(t),Fg(e,n)):Dg(t):e||n?Fg(e,n):Rg}function Ag(n){return function(t,e){return[Bf<(t+=n)?t-Yf:t<-Bf?t+Yf:t,e]}}function Dg(t){var e=Ag(t);return e.invert=Ag(-t),e}function Fg(t,e){var a=Zf(t),u=nd(t),h=Zf(e),c=nd(e);function n(t,e){var n=Zf(e),i=Zf(t)*n,r=nd(t)*n,o=nd(e),s=o*a+i*u;return[Kf(r*h-s*c,i*a-o*u),ad(s*h+r*c)]}return n.invert=function(t,e){var n=Zf(e),i=Zf(t)*n,r=nd(t)*n,o=nd(e),s=o*h-r*c;return[Kf(r*h+o*c,i*a+s*u),ad(s*a-i*u)]},n}Rg.invert=Rg;var Gg=function(e){function t(t){return(t=e(t[0]*Wf,t[1]*Wf))[0]*=Xf,t[1]*=Xf,t}return e=Tg(e[0]*Wf,e[1]*Wf,2<e.length?e[2]*Wf:0),t.invert=function(t){return(t=e.invert(t[0]*Wf,t[1]*Wf))[0]*=Xf,t[1]*=Xf,t},t};function qg(t,e,n,i,r,o){if(n){var s=Zf(e),a=nd(e),u=i*n;null==r?(r=e+i*Yf,o=e-u/2):(r=kg(s,r),o=kg(s,o),(0<i?r<o:o<r)&&(r+=i*Yf));for(var h,c=r;0<i?o<c:c<o;c-=u)h=Fd([s,-a*Zf(c),-a*nd(c)]),t.point(h[0],h[1])}}function kg(t,e){(e=Gd(e))[0]-=t,Bd(e);var n=sd(-e[1]);return((-e[2]<0?-n:n)+Yf-jf)%Yf}var zg=function(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:hd,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}},jg=function(t,e){return Hf(t[0]-e[0])<jf&&Hf(t[1]-e[1])<jf};function Bg(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var Ug=function(t,e,n,i,o){var s,r,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],r=t[e];if(jg(i,r)){for(o.lineStart(),s=0;s<e;++s)o.point((i=t[s])[0],i[1]);o.lineEnd()}else a.push(n=new Bg(i,t,null,!0)),u.push(n.o=new Bg(i,null,n,!1)),a.push(n=new Bg(r,t,null,!1)),u.push(n.o=new Bg(r,null,n,!0))}}),a.length){for(u.sort(e),Vg(a),Vg(u),s=0,r=u.length;s<r;++s)u[s].e=n=!n;for(var h,c,l=a[0];;){for(var f=l,d=!0;f.v;)if((f=f.n)===l)return;h=f.z,o.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(s=0,r=h.length;s<r;++s)o.point((c=h[s])[0],c[1]);else i(f.x,f.n.x,1,o);f=f.n}else{if(d)for(h=f.p.z,s=h.length-1;0<=s;--s)o.point((c=h[s])[0],c[1]);else i(f.x,f.p.x,-1,o);f=f.p}h=(f=f.o).z,d=!d}while(!f.v);o.lineEnd()}}};function Vg(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}var Yg=Gf(),Xg=function(t,e){var n=e[0],i=e[1],r=[nd(n),-Zf(n),0],o=0,s=0;Yg.reset();for(var a=0,u=t.length;a<u;++a)if(c=(h=t[a]).length)for(var h,c,l=h[c-1],f=l[0],d=l[1]/2+Vf,g=nd(d),p=Zf(d),v=0;v<c;++v,f=m,g=E,p=w,l=y){var y=h[v],m=y[0],x=y[1]/2+Vf,E=nd(x),w=Zf(x),_=m-f,I=0<=_?1:-1,b=I*_,M=Bf<b,S=g*E;if(Yg.add(Kf(S*I*nd(b),p*w+S*Zf(b))),o+=M?_+I*Yf:_,M^n<=f^n<=m){var N=kd(Gd(l),Gd(y));Bd(N);var C=kd(r,N);Bd(C);var L=(M^0<=_?-1:1)*ad(C[2]);(L<i||i===L&&(N[0]||N[1]))&&(s+=M^0<=_?1:-1)}}return(o<-jf||o<jf&&Yg<-jf)^1&s},Wg=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN};var Hg,Jg;1===(Hg=Wg).length&&(Jg=Hg,Hg=function(t,e){return Wg(Jg(t),e)});var Kg=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o};Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Zg=function(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);0<=--r;)for(e=(i=t[r]).length;0<=--e;)n[--s]=i[e];return n};var Qg=function(v,y,m,x){return function(a){var u,h,c,n=y(a),l=zg(),f=y(l),d=!1,e={point:i,lineStart:r,lineEnd:o,polygonStart:function(){e.point=g,e.lineStart=s,e.lineEnd=p,h=[],u=[]},polygonEnd:function(){e.point=i,e.lineStart=r,e.lineEnd=o,h=Zg(h);var t=Xg(u,x);h.length?(d||(a.polygonStart(),d=!0),Ug(h,tp,t,m,a)):t&&(d||(a.polygonStart(),d=!0),a.lineStart(),m(null,null,1,a),a.lineEnd()),d&&(a.polygonEnd(),d=!1),h=u=null},sphere:function(){a.polygonStart(),a.lineStart(),m(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function i(t,e){v(t,e)&&a.point(t,e)}function t(t,e){n.point(t,e)}function r(){e.point=t,n.lineStart()}function o(){e.point=i,n.lineEnd()}function g(t,e){c.push([t,e]),f.point(t,e)}function s(){f.lineStart(),c=[]}function p(){g(c[0][0],c[0][1]),f.lineEnd();var t,e,n,i,r=f.clean(),o=l.result(),s=o.length;if(c.pop(),u.push(c),c=null,s)if(1&r){if(0<(e=(n=o[0]).length-1)){for(d||(a.polygonStart(),d=!0),a.lineStart(),t=0;t<e;++t)a.point((i=n[t])[0],i[1]);a.lineEnd()}}else 1<s&&2&r&&o.push(o.pop().concat(o.shift())),h.push(o.filter($g))}return e}};function $g(t){return 1<t.length}function tp(t,e){return((t=t.x)[0]<0?t[1]-Uf-jf:Uf-t[1])-((e=e.x)[0]<0?e[1]-Uf-jf:Uf-e[1])}var ep=Qg(function(){return!0},function(l){var f,d=NaN,g=NaN,p=NaN;return{lineStart:function(){l.lineStart(),f=1},point:function(t,e){var n,i,r,o,s,a,u,h=0<t?Bf:-Bf,c=Hf(t-d);Hf(c-Bf)<jf?(l.point(d,g=0<(g+e)/2?Uf:-Uf),l.point(p,g),l.lineEnd(),l.lineStart(),l.point(h,g),l.point(t,g),f=0):p!==h&&Bf<=c&&(Hf(d-p)<jf&&(d-=p*jf),Hf(t-h)<jf&&(t-=h*jf),i=g,o=e,u=nd((n=d)-(r=t)),g=Hf(u)>jf?Jf((nd(i)*(a=Zf(o))*nd(r)-nd(o)*(s=Zf(i))*nd(n))/(s*a*u)):(i+o)/2,l.point(p,g),l.lineEnd(),l.lineStart(),l.point(h,g),f=0),l.point(d=t,g=e),p=h},lineEnd:function(){l.lineEnd(),d=g=NaN},clean:function(){return 2-f}}},function(t,e,n,i){var r;if(null==t)r=n*Uf,i.point(-Bf,r),i.point(0,r),i.point(Bf,r),i.point(Bf,0),i.point(Bf,-r),i.point(0,-r),i.point(-Bf,-r),i.point(-Bf,0),i.point(-Bf,r);else if(Hf(t[0]-e[0])>jf){var o=t[0]<e[0]?Bf:-Bf;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])},[-Bf,-Uf]);var np=function(r){var S=Zf(r),o=6*Wf,d=0<S,g=Hf(S)>jf;function p(t,e){return Zf(t)*Zf(e)>S}function v(t,e,n){var i=[1,0,0],r=kd(Gd(t),Gd(e)),o=qd(r,r),s=r[0],a=o-s*s;if(!a)return!n&&t;var u=S*o/a,h=-S*s/a,c=kd(i,r),l=jd(i,u);zd(l,jd(r,h));var f=c,d=qd(l,f),g=qd(f,f),p=d*d-g*(qd(l,l)-1);if(!(p<0)){var v=rd(p),y=jd(f,(-d-v)/g);if(zd(y,l),y=Fd(y),!n)return y;var m,x=t[0],E=e[0],w=t[1],_=e[1];E<x&&(m=x,x=E,E=m);var I=E-x,b=Hf(I-Bf)<jf;if(!b&&_<w&&(m=w,w=_,_=m),b||I<jf?b?0<w+_^y[1]<(Hf(y[0]-x)<jf?w:_):w<=y[1]&&y[1]<=_:Bf<I^(x<=y[0]&&y[0]<=E)){var M=jd(f,(-d+v)/g);return zd(M,l),[y,Fd(M)]}}}function y(t,e){var n=d?r:Bf-r,i=0;return t<-n?i|=1:n<t&&(i|=2),e<-n?i|=4:n<e&&(i|=8),i}return Qg(p,function(a){var u,h,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(t,e){var n,i=[t,e],r=p(t,e),o=d?r?0:y(t,e):r?y(t+(t<0?Bf:-Bf),e):0;if(!u&&(l=c=r)&&a.lineStart(),r!==c&&(!(n=v(u,i))||jg(u,n)||jg(i,n))&&(i[0]+=jf,i[1]+=jf,r=p(i[0],i[1])),r!==c)f=0,r?(a.lineStart(),n=v(i,u),a.point(n[0],n[1])):(n=v(u,i),a.point(n[0],n[1]),a.lineEnd()),u=n;else if(g&&u&&d^r){var s;o&h||!(s=v(i,u,!0))||(f=0,d?(a.lineStart(),a.point(s[0][0],s[0][1]),a.point(s[1][0],s[1][1]),a.lineEnd()):(a.point(s[1][0],s[1][1]),a.lineEnd(),a.lineStart(),a.point(s[0][0],s[0][1])))}!r||u&&jg(u,i)||a.point(i[0],i[1]),u=i,c=r,h=o},lineEnd:function(){c&&a.lineEnd(),u=null},clean:function(){return f|(l&&c)<<1}}},function(t,e,n,i){qg(i,r,o,n,t,e)},d?[0,-r]:[-Bf,r-Bf])},ip=function(t,e,n,i,r,o){var s,a=t[0],u=t[1],h=0,c=1,l=e[0]-a,f=e[1]-u;if(s=n-a,l||!(0<s)){if(s/=l,l<0){if(s<h)return;s<c&&(c=s)}else if(0<l){if(c<s)return;h<s&&(h=s)}if(s=r-a,l||!(s<0)){if(s/=l,l<0){if(c<s)return;h<s&&(h=s)}else if(0<l){if(s<h)return;s<c&&(c=s)}if(s=i-u,f||!(0<s)){if(s/=f,f<0){if(s<h)return;s<c&&(c=s)}else if(0<f){if(c<s)return;h<s&&(h=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(c<s)return;h<s&&(h=s)}else if(0<f){if(s<h)return;s<c&&(c=s)}return 0<h&&(t[0]=a+h*l,t[1]=u+h*f),c<1&&(e[0]=a+c*l,e[1]=u+c*f),!0}}}}},rp=1e9,op=-rp;function sp(y,m,x,E){function w(t,e){return y<=t&&t<=x&&m<=e&&e<=E}function _(t,e,n,i){var r=0,o=0;if(null==t||(r=s(t,n))!==(o=s(e,n))||a(t,e)<0^0<n)for(;i.point(0===r||3===r?y:x,1<r?E:m),(r=(r+n+4)%4)!==o;);else i.point(e[0],e[1])}function s(t,e){return Hf(t[0]-y)<jf?0<e?0:3:Hf(t[0]-x)<jf?0<e?2:1:Hf(t[1]-m)<jf?0<e?1:0:0<e?3:2}function I(t,e){return a(t.x,e.x)}function a(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){var r,l,o,s,a,u,h,c,f,d,g,p=i,t=zg(),e={point:n,lineStart:function(){e.point=v,l&&l.push(o=[]);d=!0,f=!1,h=c=NaN},lineEnd:function(){r&&(v(s,a),u&&f&&t.rejoin(),r.push(t.result()));e.point=n,f&&p.lineEnd()},polygonStart:function(){p=t,r=[],l=[],g=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=l.length;e<n;++e)for(var i,r,o=l[e],s=1,a=o.length,u=o[0],h=u[0],c=u[1];s<a;++s)i=h,r=c,u=o[s],h=u[0],c=u[1],r<=E?E<c&&(c-r)*(y-i)<(h-i)*(E-r)&&++t:c<=E&&(h-i)*(E-r)<(c-r)*(y-i)&&--t;return t}(),e=g&&t,n=(r=Zg(r)).length;(e||n)&&(i.polygonStart(),e&&(i.lineStart(),_(null,null,1,i),i.lineEnd()),n&&Ug(r,I,t,_,i),i.polygonEnd());p=i,r=l=o=null}};function n(t,e){w(t,e)&&p.point(t,e)}function v(t,e){var n=w(t,e);if(l&&o.push([t,e]),d)s=t,a=e,d=!1,(u=n)&&(p.lineStart(),p.point(t,e));else if(n&&f)p.point(t,e);else{var i=[h=Math.max(op,Math.min(rp,h)),c=Math.max(op,Math.min(rp,c))],r=[t=Math.max(op,Math.min(rp,t)),e=Math.max(op,Math.min(rp,e))];ip(i,r,y,m,x,E)?(f||(p.lineStart(),p.point(i[0],i[1])),p.point(r[0],r[1]),n||p.lineEnd(),g=!1):n&&(p.lineStart(),p.point(t,e),g=!1)}h=t,c=e,f=n}return e}}var ap,up,hp,cp=Gf(),lp={sphere:hd,point:hd,lineStart:function(){lp.point=dp,lp.lineEnd=fp},lineEnd:hd,polygonStart:hd,polygonEnd:hd};function fp(){lp.point=lp.lineEnd=hd}function dp(t,e){ap=t*=Wf,up=nd(e*=Wf),hp=Zf(e),lp.point=gp}function gp(t,e){t*=Wf;var n=nd(e*=Wf),i=Zf(e),r=Hf(t-ap),o=Zf(r),s=i*nd(r),a=hp*n-up*i*o,u=up*n+hp*i*o;cp.add(Kf(rd(s*s+a*a),u)),ap=t,up=n,hp=i}var pp=function(t){return cp.reset(),Ed(t,lp),+cp},vp=[null,null],yp={type:"LineString",coordinates:vp},mp=function(t,e){return vp[0]=t,vp[1]=e,pp(yp)},xp={Feature:function(t,e){return wp(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)if(wp(n[i].geometry,e))return!0;return!1}},Ep={Sphere:function(){return!0},Point:function(t,e){return _p(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(_p(n[i],e))return!0;return!1},LineString:function(t,e){return Ip(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(Ip(n[i],e))return!0;return!1},Polygon:function(t,e){return bp(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(bp(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)if(wp(n[i],e))return!0;return!1}};function wp(t,e){return!(!t||!Ep.hasOwnProperty(t.type))&&Ep[t.type](t,e)}function _p(t,e){return 0===mp(t,e)}function Ip(t,e){var n=mp(t[0],t[1]);return mp(t[0],e)+mp(e,t[1])<=n+jf}function bp(t,e){return!!Xg(t.map(Mp),Sp(e))}function Mp(t){return(t=t.map(Sp)).pop(),t}function Sp(t){return[t[0]*Wf,t[1]*Wf]}function Np(t,e,n){var i=Kg(t,e-jf,n).concat(e);return function(e){return i.map(function(t){return[e,t]})}}function Cp(t,e,n){var i=Kg(t,e-jf,n).concat(e);return function(e){return i.map(function(t){return[t,e]})}}function Lp(){var e,n,i,r,o,s,a,u,h,c,l,f,d=10,g=d,p=90,v=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:t()}}function t(){return Kg(Qf(r/p)*p,i,p).map(l).concat(Kg(Qf(u/v)*v,a,v).map(f)).concat(Kg(Qf(n/d)*d,e,d).filter(function(t){return Hf(t%p)>jf}).map(h)).concat(Kg(Qf(s/g)*g,o,g).filter(function(t){return Hf(t%v)>jf}).map(c))}return m.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(f(a).slice(1),l(i).reverse().slice(1),f(u).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.extentMajor(t).extentMinor(t):m.extentMinor()},m.extentMajor=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],u=+t[0][1],a=+t[1][1],i<r&&(t=r,r=i,i=t),a<u&&(t=u,u=a,a=t),m.precision(y)):[[r,u],[i,a]]},m.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],s=+t[0][1],o=+t[1][1],e<n&&(t=n,n=e,e=t),o<s&&(t=s,s=o,o=t),m.precision(y)):[[n,s],[e,o]]},m.step=function(t){return arguments.length?m.stepMajor(t).stepMinor(t):m.stepMinor()},m.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],m):[p,v]},m.stepMinor=function(t){return arguments.length?(d=+t[0],g=+t[1],m):[d,g]},m.precision=function(t){return arguments.length?(y=+t,h=Np(s,o,90),c=Cp(n,e,y),l=Np(u,a,90),f=Cp(r,i,y),m):y},m.extentMajor([[-180,-90+jf],[180,90-jf]]).extentMinor([[-180,-80-jf],[180,80+jf]])}var Pp,Op,Rp,Tp,Ap=function(t){return t},Dp=Gf(),Fp=Gf(),Gp={point:hd,lineStart:hd,lineEnd:hd,polygonStart:function(){Gp.lineStart=qp,Gp.lineEnd=jp},polygonEnd:function(){Gp.lineStart=Gp.lineEnd=Gp.point=hd,Dp.add(Hf(Fp)),Fp.reset()},result:function(){var t=Dp/2;return Dp.reset(),t}};function qp(){Gp.point=kp}function kp(t,e){Gp.point=zp,Pp=Rp=t,Op=Tp=e}function zp(t,e){Fp.add(Tp*t-Rp*e),Rp=t,Tp=e}function jp(){zp(Pp,Op)}var Bp=1/0,Up=Bp,Vp=-Bp,Yp=Vp,Xp={point:function(t,e){t<Bp&&(Bp=t);Vp<t&&(Vp=t);e<Up&&(Up=e);Yp<e&&(Yp=e)},lineStart:hd,lineEnd:hd,polygonStart:hd,polygonEnd:hd,result:function(){var t=[[Bp,Up],[Vp,Yp]];return Vp=Yp=-(Up=Bp=1/0),t}};var Wp,Hp,Jp,Kp,Zp=0,Qp=0,$p=0,tv=0,ev=0,nv=0,iv=0,rv=0,ov=0,sv={point:av,lineStart:uv,lineEnd:lv,polygonStart:function(){sv.lineStart=fv,sv.lineEnd=dv},polygonEnd:function(){sv.point=av,sv.lineStart=uv,sv.lineEnd=lv},result:function(){var t=ov?[iv/ov,rv/ov]:nv?[tv/nv,ev/nv]:$p?[Zp/$p,Qp/$p]:[NaN,NaN];return Zp=Qp=$p=tv=ev=nv=iv=rv=ov=0,t}};function av(t,e){Zp+=t,Qp+=e,++$p}function uv(){sv.point=hv}function hv(t,e){sv.point=cv,av(Jp=t,Kp=e)}function cv(t,e){var n=t-Jp,i=e-Kp,r=rd(n*n+i*i);tv+=r*(Jp+t)/2,ev+=r*(Kp+e)/2,nv+=r,av(Jp=t,Kp=e)}function lv(){sv.point=av}function fv(){sv.point=gv}function dv(){pv(Wp,Hp)}function gv(t,e){sv.point=pv,av(Wp=Jp=t,Hp=Kp=e)}function pv(t,e){var n=t-Jp,i=e-Kp,r=rd(n*n+i*i);tv+=r*(Jp+t)/2,ev+=r*(Kp+e)/2,nv+=r,iv+=(r=Kp*t-Jp*e)*(Jp+t),rv+=r*(Kp+e),ov+=3*r,av(Jp=t,Kp=e)}function vv(t){this._context=t}vv.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Yf)}},result:hd};var yv,mv,xv,Ev,wv,_v=Gf(),Iv={point:hd,lineStart:function(){Iv.point=bv},lineEnd:function(){yv&&Mv(mv,xv),Iv.point=hd},polygonStart:function(){yv=!0},polygonEnd:function(){yv=null},result:function(){var t=+_v;return _v.reset(),t}};function bv(t,e){Iv.point=Mv,mv=Ev=t,xv=wv=e}function Mv(t,e){Ev-=t,wv-=e,_v.add(rd(Ev*Ev+wv*wv)),Ev=t,wv=e}function Sv(){this._string=[]}function Nv(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}Sv.prototype={_radius:4.5,_circle:Nv(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Nv(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};function Cv(i){return function(t){var e=new Lv;for(var n in i)e[n]=i[n];return e.stream=t,e}}function Lv(){}function Pv(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),Ed(n,t.stream(Xp)),e(Xp.result()),null!=i&&t.clipExtent(i),t}function Ov(s,a,t){return Pv(s,function(t){var e=a[1][0]-a[0][0],n=a[1][1]-a[0][1],i=Math.min(e/(t[1][0]-t[0][0]),n/(t[1][1]-t[0][1])),r=+a[0][0]+(e-i*(t[1][0]+t[0][0]))/2,o=+a[0][1]+(n-i*(t[1][1]+t[0][1]))/2;s.scale(150*i).translate([r,o])},t)}function Rv(t,e,n){return Ov(t,[[0,0],e],n)}function Tv(o,s,t){return Pv(o,function(t){var e=+s,n=e/(t[1][0]-t[0][0]),i=(e-n*(t[1][0]+t[0][0]))/2,r=-n*t[0][1];o.scale(150*n).translate([i,r])},t)}function Av(o,s,t){return Pv(o,function(t){var e=+s,n=e/(t[1][1]-t[0][1]),i=-n*t[0][0],r=(e-n*(t[1][1]+t[0][1]))/2;o.scale(150*n).translate([i,r])},t)}Lv.prototype={constructor:Lv,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Dv=16,Fv=Zf(30*Wf),Gv=function(t,e){return+e?function(L,P){function O(t,e,n,i,r,o,s,a,u,h,c,l,f,d){var g=s-t,p=a-e,v=g*g+p*p;if(4*P<v&&f--){var y=i+h,m=r+c,x=o+l,E=rd(y*y+m*m+x*x),w=ad(x/=E),_=Hf(Hf(x)-1)<jf||Hf(n-u)<jf?(n+u)/2:Kf(m,y),I=L(_,w),b=I[0],M=I[1],S=b-t,N=M-e,C=p*S-g*N;(P<C*C/v||.3<Hf((g*S+p*N)/v-.5)||i*h+r*c+o*l<Fv)&&(O(t,e,n,i,r,o,b,M,_,y/=E,m/=E,x,f,d),d.point(b,M),O(b,M,_,y,m,x,s,a,u,h,c,l,f,d))}}return function(r){var n,i,o,s,a,u,h,c,l,f,d,g,p={point:t,lineStart:e,lineEnd:y,polygonStart:function(){r.polygonStart(),p.lineStart=m},polygonEnd:function(){r.polygonEnd(),p.lineStart=e}};function t(t,e){t=L(t,e),r.point(t[0],t[1])}function e(){c=NaN,p.point=v,r.lineStart()}function v(t,e){var n=Gd([t,e]),i=L(t,e);O(c,l,h,f,d,g,c=i[0],l=i[1],h=t,f=n[0],d=n[1],g=n[2],Dv,r),r.point(c,l)}function y(){p.point=t,r.lineEnd()}function m(){e(),p.point=x,p.lineEnd=E}function x(t,e){v(n=t,e),i=c,o=l,s=f,a=d,u=g,p.point=v}function E(){O(c,l,h,f,d,g,i,o,n,s,a,u,Dv,r),(p.lineEnd=y)()}return p}}(t,e):(n=t,Cv({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n};var qv=Cv({point:function(t,e){this.stream.point(t*Wf,e*Wf)}});function kv(t){return zv(function(){return t})()}function zv(t){var n,i,r,e,o,s,a,u,h,c,l=150,f=480,d=250,g=0,p=0,v=0,y=0,m=0,x=null,E=ep,w=null,_=Ap,I=.5,b=Gv(N,I);function M(t){return[(t=o(t[0]*Wf,t[1]*Wf))[0]*l+i,r-t[1]*l]}function S(t){return(t=o.invert((t[0]-i)/l,(r-t[1])/l))&&[t[0]*Xf,t[1]*Xf]}function N(t,e){return[(t=n(t,e))[0]*l+i,r-t[1]*l]}function C(){o=Og(e=Tg(v,y,m),n);var t=n(g,p);return i=f-t[0]*l,r=d+t[1]*l,L()}function L(){return h=c=null,M}return M.stream=function(t){return h&&c===t?h:h=qv((i=e,Cv({point:function(t,e){var n=i(t,e);return this.stream.point(n[0],n[1])}}))(E(b(_(c=t)))));var i},M.preclip=function(t){return arguments.length?(E=t,x=void 0,L()):E},M.postclip=function(t){return arguments.length?(_=t,w=s=a=u=null,L()):_},M.clipAngle=function(t){return arguments.length?(E=+t?np(x=t*Wf):(x=null,ep),L()):x*Xf},M.clipExtent=function(t){return arguments.length?(_=null==t?(w=s=a=u=null,Ap):sp(w=+t[0][0],s=+t[0][1],a=+t[1][0],u=+t[1][1]),L()):null==w?null:[[w,s],[a,u]]},M.scale=function(t){return arguments.length?(l=+t,C()):l},M.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},M.center=function(t){return arguments.length?(g=t[0]%360*Wf,p=t[1]%360*Wf,C()):[g*Xf,p*Xf]},M.rotate=function(t){return arguments.length?(v=t[0]%360*Wf,y=t[1]%360*Wf,m=2<t.length?t[2]%360*Wf:0,C()):[v*Xf,y*Xf,m*Xf]},M.precision=function(t){return arguments.length?(b=Gv(N,I=t*t),L()):rd(I)},M.fitExtent=function(t,e){return Ov(M,t,e)},M.fitSize=function(t,e){return Rv(M,t,e)},M.fitWidth=function(t,e){return Tv(M,t,e)},M.fitHeight=function(t,e){return Av(M,t,e)},function(){return n=t.apply(this,arguments),M.invert=n.invert&&S,C()}}function jv(t){var e=0,n=Bf/3,i=zv(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Wf,n=t[1]*Wf):[e*Xf,n*Xf]},r}function Bv(t,e){var n=nd(t),i=(n+nd(e))/2;if(Hf(i)<jf)return function(t){var n=Zf(t);function e(t,e){return[t*n,nd(e)/n]}return e.invert=function(t,e){return[t/n,ad(e*n)]},e}(t);var r=1+n*(2*i-n),o=rd(r)/i;function s(t,e){var n=rd(r-2*i*nd(e))/i;return[n*nd(t*=i),o-n*Zf(t)]}return s.invert=function(t,e){var n=o-e;return[Kf(t,Hf(n))/i*id(n),ad((r-(t*t+n*n)*i*i)/(2*i))]},s}var Uv=function(){return jv(Bv).scale(155.424).center([0,33.6442])},Vv=function(){return Uv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Yv(o){return function(t,e){var n=Zf(t),i=Zf(e),r=o(n*i);return[r*i*nd(t),r*nd(e)]}}function Xv(s){return function(t,e){var n=rd(t*t+e*e),i=s(n),r=nd(i),o=Zf(i);return[Kf(t*r,n*o),ad(n&&e*r/n)]}}var Wv=Yv(function(t){return rd(2/(1+t))});Wv.invert=Xv(function(t){return 2*ad(t/2)});var Hv=Yv(function(t){return(t=sd(t))&&t/nd(t)});Hv.invert=Xv(function(t){return t});function Jv(t,e){return[t,td(od((Uf+e)/2))]}Jv.invert=function(t,e){return[t,2*Jf($f(e))-Uf]};function Kv(n){var i,r,o,s=kv(n),e=s.center,a=s.scale,u=s.translate,h=s.clipExtent,c=null;function l(){var t=Bf*a(),e=s(Gg(s.rotate()).invert([0,0]));return h(null==c?[[e[0]-t,e[1]-t],[e[0]+t,e[1]+t]]:n===Jv?[[Math.max(e[0]-t,c),i],[Math.min(e[0]+t,r),o]]:[[c,Math.max(e[1]-t,i)],[r,Math.min(e[1]+t,o)]])}return s.scale=function(t){return arguments.length?(a(t),l()):a()},s.translate=function(t){return arguments.length?(u(t),l()):u()},s.center=function(t){return arguments.length?(e(t),l()):e()},s.clipExtent=function(t){return arguments.length?(null==t?c=i=r=o=null:(c=+t[0][0],i=+t[0][1],r=+t[1][0],o=+t[1][1]),l()):null==c?null:[[c,i],[r,o]]},l()}function Zv(t){return od((Uf+t)/2)}function Qv(t,e){var n=Zf(t),r=t===e?nd(t):td(n/Zf(e))/td(Zv(e)/Zv(t)),o=n*ed(Zv(t),r)/r;if(!r)return Jv;function i(t,e){0<o?e<-Uf+jf&&(e=-Uf+jf):Uf-jf<e&&(e=Uf-jf);var n=o/ed(Zv(e),r);return[n*nd(r*t),o-n*Zf(r*t)]}return i.invert=function(t,e){var n=o-e,i=id(r)*rd(t*t+n*n);return[Kf(t,Hf(n))/r*id(n),2*Jf(ed(o/i,1/r))-Uf]},i}function $v(t,e){return[t,e]}$v.invert=$v;function ty(t,e){var n=Zf(t),r=t===e?nd(t):(n-Zf(e))/(e-t),o=n/r+t;if(Hf(r)<jf)return $v;function i(t,e){var n=o-e,i=r*t;return[n*nd(i),o-n*Zf(i)]}return i.invert=function(t,e){var n=o-e;return[Kf(t,Hf(n))/r*id(n),o-id(r)*rd(t*t+n*n)]},i}function ey(t,e){var n=Zf(e),i=Zf(t)*n;return[n*nd(t)/i,nd(e)/i]}ey.invert=Xv(Jf);function ny(n,i,r,o){return 1===n&&1===i&&0===r&&0===o?Ap:Cv({point:function(t,e){this.stream.point(t*n+r,e*i+o)}})}function iy(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}iy.invert=function(t,e){var n,i=e,r=25;do{var o=i*i,s=o*o;i-=n=(i*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Hf(n)>jf&&0<--r);return[t/(.8707+(o=i*i)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),i]};function ry(t,e){return[Zf(e)*nd(t),nd(e)]}ry.invert=Xv(ad);function oy(t,e){var n=Zf(e),i=1+Zf(t)*n;return[n*nd(t)/i,nd(e)/i]}oy.invert=Xv(function(t){return 2*Jf(t)});function sy(t,e){return[td(od((Uf+e)/2)),-t]}sy.invert=function(t,e){return[-e,2*Jf($f(t))-Uf]};var ay=Object.freeze({geoArea:function(t){return _d.reset(),Ed(t,Id),2*_d},geoBounds:function(t){var e,n,i,r,o,s,a;if(Od=Pd=-(Cd=Ld=1/0),Ud=[],Ed(t,Xd),n=Ud.length){for(Ud.sort(eg),e=1,o=[i=Ud[0]];e<n;++e)ng(i,(r=Ud[e])[0])||ng(i,r[1])?(tg(i[0],r[1])>tg(i[0],i[1])&&(i[1]=r[1]),tg(r[0],i[1])>tg(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=tg(i[1],r[0]))>s&&(s=a,Cd=r[0],Pd=i[1])}return Ud=Vd=null,Cd===1/0||Ld===1/0?[[NaN,NaN],[NaN,NaN]]:[[Cd,Ld],[Pd,Od]]},geoCentroid:function(t){ig=rg=og=sg=ag=ug=hg=cg=lg=fg=dg=0,Ed(t,xg);var e=lg,n=fg,i=dg,r=e*e+n*n+i*i;return r<1e-12&&(e=ug,n=hg,i=cg,rg<jf&&(e=og,n=sg,i=ag),(r=e*e+n*n+i*i)<1e-12)?[NaN,NaN]:[Kf(n,e)*Xf,ad(i/rd(r))*Xf]},geoCircle:function(){var i,r,o=Pg([0,0]),s=Pg(90),a=Pg(6),u={point:function(t,e){i.push(t=r(t,e)),t[0]*=Xf,t[1]*=Xf}};function e(){var t=o.apply(this,arguments),e=s.apply(this,arguments)*Wf,n=a.apply(this,arguments)*Wf;return i=[],r=Tg(-t[0]*Wf,-t[1]*Wf,0).invert,qg(u,e,n,1),t={type:"Polygon",coordinates:[i]},i=r=null,t}return e.center=function(t){return arguments.length?(o="function"==typeof t?t:Pg([+t[0],+t[1]]),e):o},e.radius=function(t){return arguments.length?(s="function"==typeof t?t:Pg(+t),e):s},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:Pg(+t),e):a},e},geoClipAntimeridian:ep,geoClipCircle:np,geoClipExtent:function(){var e,n,i,r=0,o=0,s=960,a=500;return i={stream:function(t){return e&&n===t?e:e=sp(r,o,s,a)(n=t)},extent:function(t){return arguments.length?(r=+t[0][0],o=+t[0][1],s=+t[1][0],a=+t[1][1],e=n=null,i):[[r,o],[s,a]]}}},geoClipRectangle:sp,geoContains:function(t,e){return(t&&xp.hasOwnProperty(t.type)?xp[t.type]:wp)(t,e)},geoDistance:mp,geoGraticule:Lp,geoGraticule10:function(){return Lp()()},geoInterpolate:function(t,e){var n=t[0]*Wf,i=t[1]*Wf,r=e[0]*Wf,o=e[1]*Wf,s=Zf(i),a=nd(i),u=Zf(o),h=nd(o),c=s*Zf(n),l=s*nd(n),f=u*Zf(r),d=u*nd(r),g=2*ad(rd(ud(o-i)+s*u*ud(r-n))),p=nd(g),v=g?function(t){var e=nd(t*=g)/p,n=nd(g-t)/p,i=n*c+e*f,r=n*l+e*d,o=n*a+e*h;return[Kf(r,i)*Xf,Kf(o,rd(i*i+r*r))*Xf]}:function(){return[n*Xf,i*Xf]};return v.distance=g,v},geoLength:pp,geoPath:function(e,n){var i,r,o=4.5;function s(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),Ed(t,i(r))),r.result()}return s.area=function(t){return Ed(t,i(Gp)),Gp.result()},s.measure=function(t){return Ed(t,i(Iv)),Iv.result()},s.bounds=function(t){return Ed(t,i(Xp)),Xp.result()},s.centroid=function(t){return Ed(t,i(sv)),sv.result()},s.projection=function(t){return arguments.length?(i=null==t?(e=null,Ap):(e=t).stream,s):e},s.context=function(t){return arguments.length?(r=null==t?(n=null,new Sv):new vv(n=t),"function"!=typeof o&&r.pointRadius(o),s):n},s.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),s):o},s.projection(e).context(n)},geoAlbers:Vv,geoAlbersUsa:function(){var e,n,r,o,s,i,a=Vv(),u=Uv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Uv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){i=[t,e]}};function l(t){var e=t[0],n=t[1];return i=null,r.point(e,n),i||(o.point(e,n),i)||(s.point(e,n),i)}function f(){return e=n=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(.12<=r&&r<.234&&-.425<=i&&i<-.214?u:.166<=r&&r<.234&&-.214<=i&&i<-.115?h:a).invert(t)},l.stream=function(t){return e&&n===t?e:(i=[a.stream(n=t),u.stream(t),h.stream(t)],r=i.length,e={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},l.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),h.precision(t),f()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),h.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),n=+t[0],i=+t[1];return r=a.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(c),o=u.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+jf,i+.12*e+jf],[n-.214*e-jf,i+.234*e-jf]]).stream(c),s=h.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+jf,i+.166*e+jf],[n-.115*e-jf,i+.234*e-jf]]).stream(c),f()},l.fitExtent=function(t,e){return Ov(l,t,e)},l.fitSize=function(t,e){return Rv(l,t,e)},l.fitWidth=function(t,e){return Tv(l,t,e)},l.fitHeight=function(t,e){return Av(l,t,e)},l.scale(1070)},geoAzimuthalEqualArea:function(){return kv(Wv).scale(124.75).clipAngle(179.999)},geoAzimuthalEqualAreaRaw:Wv,geoAzimuthalEquidistant:function(){return kv(Hv).scale(79.4188).clipAngle(179.999)},geoAzimuthalEquidistantRaw:Hv,geoConicConformal:function(){return jv(Qv).scale(109.5).parallels([30,30])},geoConicConformalRaw:Qv,geoConicEqualArea:Uv,geoConicEqualAreaRaw:Bv,geoConicEquidistant:function(){return jv(ty).scale(131.154).center([0,13.9389])},geoConicEquidistantRaw:ty,geoEquirectangular:function(){return kv($v).scale(152.63)},geoEquirectangularRaw:$v,geoGnomonic:function(){return kv(ey).scale(144.049).clipAngle(60)},geoGnomonicRaw:ey,geoIdentity:function(){var e,n,i,r,o,s,a=1,u=0,h=0,c=1,l=1,f=Ap,d=null,g=Ap;function p(){return r=o=null,s}return s={stream:function(t){return r&&o===t?r:r=f(g(o=t))},postclip:function(t){return arguments.length?(g=t,d=e=n=i=null,p()):g},clipExtent:function(t){return arguments.length?(g=null==t?(d=e=n=i=null,Ap):sp(d=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),p()):null==d?null:[[d,e],[n,i]]},scale:function(t){return arguments.length?(f=ny((a=+t)*c,a*l,u,h),p()):a},translate:function(t){return arguments.length?(f=ny(a*c,a*l,u=+t[0],h=+t[1]),p()):[u,h]},reflectX:function(t){return arguments.length?(f=ny(a*(c=t?-1:1),a*l,u,h),p()):c<0},reflectY:function(t){return arguments.length?(f=ny(a*c,a*(l=t?-1:1),u,h),p()):l<0},fitExtent:function(t,e){return Ov(s,t,e)},fitSize:function(t,e){return Rv(s,t,e)},fitWidth:function(t,e){return Tv(s,t,e)},fitHeight:function(t,e){return Av(s,t,e)}}},geoProjection:kv,geoProjectionMutator:zv,geoMercator:function(){return Kv(Jv).scale(961/Yf)},geoMercatorRaw:Jv,geoNaturalEarth1:function(){return kv(iy).scale(175.295)},geoNaturalEarth1Raw:iy,geoOrthographic:function(){return kv(ry).scale(249.5).clipAngle(90+jf)},geoOrthographicRaw:ry,geoStereographic:function(){return kv(oy).scale(250).clipAngle(142)},geoStereographicRaw:oy,geoTransverseMercator:function(){var t=Kv(sy),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},geoTransverseMercatorRaw:sy,geoRotation:Gg,geoStream:Ed,geoTransform:function(t){return{stream:Cv(t)}}});function uy(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function hy(t,e){var n,i,r,o,s,a,u,h,c=0,l="FeatureCollection"===t.type,f="Feature"===t.type,d=l?t.features.length:1;for(n=0;n<d;n++)for(a=l?t.features[n].geometry:f?t.geometry:t,h=l?t.features[n].properties:f?t.properties:{},s=(u=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=u?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,c,h),c++;break;case"GeometryCollection":for(i=0;i<o.geometries.length;i++)e(o.geometries[i],c,h),c++;break;default:throw new Error("Unknown Geometry Type")}else e(null,c,h),c++}var cy=uy,ly=hy;function fy(t,e,n){if(null!==t){var i,r,o,s,a,u,h,c,l,f,d=0,g=0,p=t.type,v="FeatureCollection"===p,y="Feature"===p,m=v?t.features.length:1;for(i=0;i<m;i++){var x=0;for(h=(f=!!(l=v?t.features[i].geometry:y?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1,r=0;r<h;r++)if(null!==(u=f?l.geometries[r]:l)){c=u.coordinates;var E=u.type;switch(d=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":e(c,g,i,x),g++,x++;break;case"LineString":case"MultiPoint":for(o=0;o<c.length;o++)e(c[o],g,i,x),g++,x++;break;case"Polygon":case"MultiLineString":for(o=0;o<c.length;o++)for(s=0;s<c[o].length-d;s++)e(c[o][s],g,i,x),g++,x++;break;case"MultiPolygon":for(o=0;o<c.length;o++)for(s=0;s<c[o].length;s++)for(a=0;a<c[o][s].length-d;a++)e(c[o][s][a],g,i,x),g++,x++;break;case"GeometryCollection":for(o=0;o<u.geometries.length;o++)fy(u.geometries[o],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}var dy=fy;function gy(t,e,n,i){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(n&&4!==n.length)throw new Error("bbox must be an Array of 4 numbers");if(i&&-1===["string","number"].indexOf(typeof i))throw new Error("id must be a number or a string");var r={type:"Feature"};return i&&(r.id=i),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function py(t,e,n,i){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!vy(t[0])||!vy(t[1]))throw new Error("Coordinates must contain numbers");return gy({type:"Point",coordinates:t},e,n,i)}function vy(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}var yy=py,my=function(t,e){var n,i=(n=[1/0,1/0,-1/0,-1/0],dy(t,function(t){n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),n[2]<t[0]&&(n[2]=t[0]),n[3]<t[1]&&(n[3]=t[1])}),n),r=(i[0]+i[2])/2,o=(i[1]+i[3])/2;return yy([r,o],e)};function xy(t,e,n,i){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(n&&4!==n.length)throw new Error("bbox must be an Array of 4 numbers");if(i&&-1===["string","number"].indexOf(typeof i))throw new Error("id must be a number or a string");var r={type:"Feature"};return i&&(r.id=i),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}var Ey={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65};function wy(t,e){if(null==t)throw new Error("radians is required");var n=Ey[e||"kilometers"];if(!n)throw new Error("units is invalid");return t*n}function _y(t,e){if(null==t)throw new Error("distance is required");var n=Ey[e||"kilometers"];if(!n)throw new Error("units is invalid");return t/n}var Iy=xy,by=function(t,e,n){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var i={type:"FeatureCollection"};return n&&(i.id=n),e&&(i.bbox=e),i.features=t,i},My=wy,Sy=_y,Ny=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Cy(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(function(t){return Cy(t)}),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Ly(t);default:throw new Error("unknown GeoJSON type")}var e,n};function Cy(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(i){var r={};if(!i)return r;Object.keys(i).forEach(function(t){var e=i[t];"object"==typeof e?(e.length&&(r[t]=e.map(function(t){return t})),r[t]=n(e)):r[t]=e});return r}(e.properties),n.geometry=Ly(e.geometry),n}function Ly(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(function(t){return Ly(t)}):e.coordinates=function e(t){if("object"!=typeof t[0])return t.slice();return t.map(function(t){return e(t)})}(t.coordinates),e}var Py=fe.coordEach;function Oy(t,e,r){if(!t)throw new Error("geojson is required");return!0!==e&&(t=Ny(t)),Py(t,function(t){var e,n,i="mercator"===r?function(t){var e=Math.PI/180,n=20037508.342789244,i=Math.abs(t[0])<=180?t[0]:t[0]-360*(o=t[0],o<0?-1:0<o?1:0),r=[6378137*i*e,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];var o;r[0]>n&&(r[0]=n);r[0]<-n&&(r[0]=-n);r[1]>n&&(r[1]=n);r[1]<-n&&(r[1]=-n);return r}(t):(e=t,n=180/Math.PI,[e[0]*n/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/6378137)))*n]);t[0]=i[0],t[1]=i[1]}),t}var Ry=function(t,e){return Oy(t,e,"wgs84")},Ty=Iy,Ay=ly,Dy=function(t,e){return Oy(t,e,"mercator")},Fy=cy,Gy=by,qy=My,ky=Sy,zy=function(t,n,i,r){if(!t)throw new Error("geojson is required");if(void 0===n)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");r=r||64,i=i||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return Ay(t,function(t){var e=jy(t,n,i,r);e&&o.push(e)}),Gy(o);case"FeatureCollection":return Fy(t,function(t){var e=jy(t,n,i,r);e&&Fy(e,function(t){t&&o.push(t)})}),Gy(o)}return jy(t,n,i,r)};function jy(t,n,i,r){var e,o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return Ay(t,function(t){var e=jy(t,n,i,r);e&&a.push(e)}),Gy(a)}var u,h,c=ge(t),l=50<c[1]&&50<c[3];if(l){var f=(u=my(s).geometry.coordinates.reverse(),h=u.map(function(t){return-t}),ay.geoTransverseMercator().center(u).rotate(h).scale(6373e3));e={type:s.type,coordinates:function e(t,n){if("object"!=typeof t[0])return n(t);return t.map(function(t){return e(t,n)})}(s.coordinates,f)}}else e=Dy(s);var d,g=(new ci.io.GeoJSONReader).read(e),p=qy(ky(n,i),"meters"),v=g.buffer(p);if(!function t(e){if(Array.isArray(e[0]))return t(e[0]);return isNaN(e[0])}((v=(new ci.io.GeoJSONWriter).write(v)).coordinates))return(d=l?{type:v.type,coordinates:function e(t,n){if("object"!=typeof t[0])return n.invert(t);return t.map(function(t){return e(t,n)})}(v.coordinates,f)}:Ry(v)).geometry?d:Ty(d,o)}var By={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function Uy(t){var e=0;if(t&&0<t.length){e+=Math.abs(Vy(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Vy(t[n]))}return e}function Vy(t){var e,n,i,r,o,s,a=0,u=t.length;if(2<u){for(s=0;s<u;s++)s===u-2?(i=u-2,r=u-1,o=0):s===u-1?(i=u-1,r=0,o=1):(r=(i=s)+1,o=s+2),e=t[i],n=t[r],a+=(Yy(t[o][0])-Yy(e[0]))*Math.sin(Yy(n[1]));a=a*By.RADIUS*By.RADIUS/2}return a}function Yy(t){return t*Math.PI/180}var Xy={geometry:function t(e){var n,i=0;switch(e.type){case"Polygon":return Uy(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=Uy(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},ring:Vy}.geometry,Wy=fe.geomReduce,Hy=function(t){return Wy(t,function(t,e){return t+Xy(e)},0)},Jy=Fe.feature,Ky=Kt,Zy=fe.flattenEach;function Qy(t){switch(t.type){case"Polygon":return 1<Hy(t)?t:void 0;case"MultiPolygon":var e=[];if(Zy(t,function(t){1<Hy(t)&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}var $y=Array.isArray;function tm(t,e,n){var i=n||this;if(ho(t)){var r=t;t=r.from,e=r.to}return e===t?i:function e(n,i,t){return 2===t.length&&$y(t[0])&&uo(t[1])?[Qc(n,i,t[0]),t[1]]:2===t.length&&uo(t[0])&&uo(t[1])?Qc(n,i,t):t.map(function(t){return $y(t)?e(n,i,t):t})}(t,e,i)}function em(t){if("point"===t.type)return!0;if($y(t)){var e=t[0],n=t[1];if(!Array.isArray(e)&&uo(e)&&uo(n))return!0}return!1}function nm(t){return"circle"===t.type||!!($y(t)&&em(t[0])&&uo(t[1]))}function im(t){if("polyline"===t.type)return!0;if($y(t)&&2<=t.length&&em(t[1]))return!0;return!1}function rm(t){if($y(t)&&4<=t.length){var e=t[0],n=t[t.length-1];if(em(e)&&co(e,n))return!0}return!1}function om(t){if(Array.isArray(t)&&1===t.length&&rm(t[0]))return!0;return!1}function sm(t){if("holepolygon"===t.type)return!0;if(Array.isArray(t)&&1<t.length&&rm(t[0]))return!0;return!1}function am(t){if("multipolygon"===t.type)return!0;if($y(t)){var e=t[0];if(om(e)||sm(e))return!0}return!1}function um(t){if(t.type)return t.type.toLowerCase();if($y(t)){if(em(t))return"point";if(nm(t))return"circle";if(rm(t))return"polygon";if(im(t))return"polyline";if(om(t))return"polygon";if(sm(t))return"holepolygon";if(am(t))return"multipolygon"}}function hm(t){switch(+t){case 3825:return[25e4,2544283.1248,352515.9242,2655384.2885];case 3826:return[146336.7729,2370779.8738,353663.2271,2916814.3108];case 3827:return[25e4,2544291.9173,352516.2952,2655393.4679];case 3828:return[146336.3979,2370788.0629,353663.6021,2916824.4018];default:return}}var cm=function t(e,n,i){As(this,t);var r=um(e);if(n&&n!==r)throw new Error("geometry type is invalid");if(n=r,!(i=i||function(t){if(t.sr)return t.sr;var e=yu.flattenDeep(t)[0];return e<=180&&-180<=e?4326:1e5<e?3826:void 0}(e)))throw new Error("geometry sr can not be defined");var o=yu.cloneDeep(e);"polygon"===n&&rm(e)&&(o=[o]),"multipolygon"===n&&(o=o.map(function(t){return rm(t)?[t]:t})),this.sr=i,this.type=n,this.geometry=o,this.geometry.type=n,this.geometry.sr=i};function lm(t,e){if(t.properties.geometry)return t.properties.geometry;var n=t.geometry.coordinates;return e&&(n=tm(4326,e,n)),new cm(n,void 0,e)}function fm(t,e,n,i,r){var o=this.context.parent.id,s=this.context.id,a=r&&r.id?r.id:Rs("graphic-"+t+"-");return pu(du.graphic.addGraphic(o,s,{id:a,type:t,geometry:e,symbol:n,attribute:i,option:r})),vu().map.getIn([o,"group",s,"graphic",a,"instance"])}function dm(){var t=this.context,e=this.context.parent,n=[];return vu().map.getIn([e.id,"group",t.id,"graphic"]).forEach(function(t){n.push(t.get("instance"))}),n}function gm(){return dm.call(this).forEach(function(t){t.unFocus()}),this.context}cm.create=function(t,e){return t instanceof cm?t:new cm(t,void 0,e)},cm.toGeometry=lm,cm.guessType=um,cm.isPoint=em,cm.isCircle=nm,cm.isPolyline=im,cm.isPolygon=function(t){return"polygon"===t.type||om(t)||rm(t)||!1},cm.isHolePolygon=sm,cm.isMultiPolygon=am,cm.fixPolygon=function e(t){if($y(t)&&3<=t.length&&em(t[0])){var n=yu.cloneDeep(t),i=n[0],r=n[n.length-1];return co(i,r)||n.push([i[0],i[1]]),n}return t.map(function(t){return e(t)})},cm.getBound=hm,cm.coordTrans=tm,cm.toDecimal=function(t){return+(+t[0]+ +t[1]/60+ +t[2]/3600).toFixed(6)},cm.toDegree=function(t){var e=+t;return[pi.parseInt(e),pi.parseInt(e%1/(1/60)),pi.parseInt(e%1%(1/60)/(1/3600))]},cm.ellipse=function(t,e,n,i){if("point"!==t.type)throw new Error("point type is required");if(!uo(e)||!uo(n))throw new Error("radius:number is required");var r=t.toGeoJSON();return lm(e===n?kl(r.geometry.coordinates,e):Ll(r,e,n,{angle:i}),t.sr)},cm.sector=function(t,e,n,i){if("point"!==t.type)throw new Error("point type is required");if(!uo(e)||!uo(n)||!uo(i))throw new Error("number is required");return lm(Df(t.toGeoJSON(),e,n,i),t.sr)},cm.move=function(t,e){if("polygon"!==t.type)throw new Error("gmA:polygon type is required");if("point"!==e.type)throw new Error("gmB:point type is required");var n=lm(gl(t.toGeoJSON()),t.sr).val(),i=e.val(),r=i[0]-n[0],o=i[1]-n[1];return new cm(function e(t){return t.map(function(t){return uo(t[0])?[t[0]+r,t[1]+o]:e(t)})}(t.val()),t.type,t.sr)},cm.checkBound=function(t){if("point"!==t.type)throw new Error("geometry:point type is invalid");var e=hm(t.sr),n=t.val(),i=n[0],r=n[1];return e&&(i<e[0]||i>e[2]||r<e[1]||r>=e[3])&&console.warn("["+n+"] 不在 "+n+" 範圍內"),t},cm.prototype.coordTrans=function(t){var e=tm(this.sr,t,this.val());return e.sr=t,e.type=this.type,e},cm.prototype.toGeoJSON=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.type)throw new Error("geometry type is required");var e=this.coordTrans(4326),n=this.type;if("point"===n)return Fe.point(e,t);if("polyline"===n)return Fe.lineString(e,t);if("holepolygon"===n||"polygon"===n)return Fe.polygon(e,t);if("multipolygon"===n)return Fe.multiPolygon(e,t);if("circle"===n)return kl(e[0],e[1],{steps:64,units:"meters",properties:t});throw new Error("type is invalid")},cm.prototype.calcDistance=function(e){var n=this;if(!(n instanceof cm))throw new Error("geometry is invalid");if(!(e instanceof cm))throw new Error("geometry is invalid");if("point"!==n.type)throw new Error("geometryA type is invalid");var t,i,r,o,s,a,u,h,c,l,f,d=e.type,g=n.toGeoJSON(),p=void 0;("point"===d&&(t=g,i=e.toGeoJSON(),o=Math.PI/180,s=zl(t),a=zl(i),u=o*(a[1]-s[1]),h=o*(a[0]-s[0]),c=o*s[1],l=o*a[1],f=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(h/2),2)*Math.cos(c)*Math.cos(l),p=jl(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r)),"polyline"===d&&(p=df(g,e.toGeoJSON())),"polygon"!==d&&"circle"!==d||(p=df(g,Ef(e.toGeoJSON()))),"holepolygon"===d)&&(p=e.val().map(function(t){return df(g,Ef(new cm(t,"polygon",e.sr).toGeoJSON()))}).sort(function(t,e){return t-e})[0]);"multipolygon"===d&&(p=e.val().map(function(t){return n.calcDistance(new cm(t,void 0,e.sr))/1e3}).sort(function(t,e){return t-e})[0]);return 1e3*p},cm.prototype.calcBuffer=function(t){0===t&&(t=1e-4);var e=this.type,n=[];return"polyline"===e&&(n=zy(this.toGeoJSON(),t,"meters")),"polygon"!==e&&"circle"!==e||(n=zy(this.toGeoJSON(),t,"meters")),"point"===e&&(n=kl(this.toGeoJSON(),t,{units:"meters"})),lm(n,this.sr)},cm.prototype.val=function(){return this.geometry},cm.prototype.set=function(t){var e=yu.cloneDeep(t);return"polygon"===this.type&&rm(e)&&(e=[e]),"multipolygon"===this.type&&(e=e.map(function(t){return rm(t)?[t]:t})),this.geometry=e,this.geometry.type=this.type,this.geometry.sr=this.sr,this},cm.prototype.calcNearest=function(t,e){var n=this;if(!(n instanceof cm))throw new Error("geometry in invalid");if(0===t.length)throw new Error("geometries is empty(exclude self)");if(1===t.length)return t[0];var i=[];return t.forEach(function(t){e(t)!==n&&i.push({distance:n.calcDistance(e(t)),link:t})}),i.sort(function(t,e){return t.distance-e.distance}),i[0].link},cm.prototype.calcNearby=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t){return t},i=this;if(!(i instanceof cm))throw new Error("geometry in invalid");var r=[];return t.forEach(function(t){n(t)!==i&&(i.calcDistance(n(t))<=e&&r.push(t))}),r},cm.prototype.difference=function(t){if(t.length<1)throw new Error("至少需包含 1 個 polygon geometry");if("point"!==this.type&&"polygline"!==this.type){var e=this.toGeoJSON();if(t.forEach(function(t){e&&"point"!==t.type&&"polyline"!==t.type&&(e=function(t,e){var n=Ky(t),i=Ky(e),r=t.properties||{};if(n=Qy(n),i=Qy(i),n){if(!i)return Jy(n,r);var o=new ci.io.GeoJSONReader,s=o.read(n),a=o.read(i),u=s.difference(a);if(!u.isEmpty()){var h=(new ci.io.GeoJSONWriter).write(u);return Jy(h,r)}}}(e,t.toGeoJSON()))}),e)return lm(e,this.sr)}},cm.prototype.intersect=function(t){if(t.length<1)throw new Error("至少需包含 1 個 polygon geometry");if("point"!==this.type&&"polygline"!==this.type){var e=this.toGeoJSON();if(t.forEach(function(t){e&&"point"!==t.type&&"polyline"!==t.type&&(e=li(e,t.toGeoJSON()))}),e)return lm(e,this.sr)}},cm.prototype.union=function(t){if(t.length<1)throw new Error("至少需包含 1 個 polygon geometry");if("point"!==this.type&&"polygline"!==this.type){var e=[this.toGeoJSON()];return t.forEach(function(t){"point"!==t.type&&"polyline"!==t.type&&e.push(t.toGeoJSON())}),lm(function(){for(var t=new ci.io.GeoJSONReader,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=e.union(t.read(JSON.stringify(arguments[n].geometry)));return{type:"Feature",geometry:e=(new ci.io.GeoJSONWriter).write(e),properties:arguments[0].properties}}.apply(void 0,e),this.sr)}};var pm=Object.freeze({nearest:function(t){var e=this.context;return t.geometry.calcNearest(e.getGraphicList(),function(t){return t.getGeometry(),t.geometry})},sync:function(){var a=this,u=this.context,h=u.parent,t=h.id,e=wm.call(this,"getGraphicList",[u.id]),n=vu().map.getIn([h.id,"group",u.id,"graphic"]),c=[];n.forEach(function(t){c.push(t.get("instance").origin)});var l=vu().map.getIn([t,"option","sr"]),f=vu().api.getGeometryByID;return e.forEach(function(t,e){if(-1===c.indexOf(t)){var n=wm.call(a,"getOriginInfo",[t,"graphic"]),i=n.type||"general",r="label"===i||"marker"===i?"point":i,o=n.id||Rs("graphic-"+i+"-"),s=new Ws(o,i,t,u);s.geometry=new cm(f.call(t,o)),pu({type:"ADD_GRAPHIC",mapID:h.id,groupID:u.id,instance:s,payload:{id:o,sr:l,type:i,index:e,geometryType:r,attribute:{},visible:!0,symbol:{},option:{}}})}}),n.forEach(function(t){-1===e.indexOf(t.get("instance").origin)&&pu({type:"REMOVE_GRAPHIC",mapID:h.id,groupID:u.id,graphicID:t.get("id")})}),this.context},nearby:function(t,e,n){var i=this.context,r=i.parent;return"px"===n&&(e=xm(r,e,r.config.mapSet.sr)),(t.id?t.geometry:new cm(t,"point")).calcNearby(i.getGraphicList(),e,function(t){return t.getGeometry(),t.geometry})},remove:function(){var t=this.context.id,e=this.context.parent.id;pu(du.group.removeGroup(e,t))},setOpacity:function(t){var e=this.context.id,n=this.context.parent.id;return pu(du.group.setOpacity(this,n,e,t)),this.context},show:function(){var t=this.context.id,e=this.context.parent.id;return pu(du.group.setVisible(this,e,t,!0)),this.context},hide:function(){var t=Em("id",this.context.id),e=this.context.parent.id;return pu(du.group.setVisible(this,e,t,!1)),this.context},setIndex:function(t){var e=this.context,n=wm.call({innerAPI:this.innerAPI,context:this.context.parent},"getGroupList"),i=n.indexOf(e.origin);return-1===i||(n.splice(i,1),n.splice(t,0,e.origin),wm.call({innerAPI:this.innerAPI,context:this.context.parent},"setGroupList",[n])),this.context},setOrder:function(t){var e=Em("id",this.context.id),n=this.context.parent.id;return pu(du.group.setOrder(n,e,+t)),this.context},addGraphic:fm,addLabel:function(t,e,n,i){var r=this.context.parent.config.mapSet.sr,o=new cm(t,"point",r);return fm.call(this,"label",o,e,n,i)},addMarker:function(t,e,n,i){var r=this.context.parent.config.mapSet.sr,o=new cm(t,"point",r);return fm.call(this,"marker",o,e,n,i)},addPolyline:function(t,e,n,i){var r=this.context.parent.config.mapSet.sr,o=new cm(t,"polyline",r);return fm.call(this,"polyline",o,e,n,i)},addPolygon:function(t,e,n,i){var r=void 0,o=cm.fixPolygon(t);if(cm.isPolygon(o)&&(r="polygon"),cm.isHolePolygon(o)&&(r="holepolygon"),cm.isMultiPolygon(o)&&(r="multipolygon"),!r)throw new Error("geometry type is undefined");var s=this.context.parent.config.mapSet.sr,a=new cm(o,r,s);return fm.call(this,r,a,e,n,i)},addCircle:function(t,e,n,i){var r=this.context.parent.config.mapSet.sr,o=new cm(t,"circle",r);return fm.call(this,"circle",o,e,n,i)},getExtent:function(){var t=Em("id",this.context.id);return Em("extent",wm.call(this,"getGroupExtent",[t]))},panTo:function(){var t=Em("id",this.context.id);return wm.call(this,"panToGroup",[t]),this.context},zoomTo:function(){var t=Em("id",this.context.id);return wm.call(this,"zoomToGroup",[t]),this.context},getGraphicList:dm,findGraphic:function(e,n){var t=this.context.id,i=this.context.parent.id;e=Em("isText",e);var r=[];return vu().map.getIn([i,"group",t,"graphic"]).forEach(function(t){void 0===n&&t.hasIn(["attribute",e])&&r.push(t.get("instance")),void 0!==n&&t.getIn(["attribute",e])===n&&r.push(t.get("instance"))}),r},hasGraphic:function(){var t=this.context.id,e=this.context.parent.id;return 0<vu().map.getIn([e,"group",t]).size},clear:function(){var t=this.context.id,e=this.context.parent.id;return pu(du.group.clearGroup(this,e,t)),this.context},setFocusSymbol:function(t,e){var n=this.context.id,i=this.context.parent.id;return pu(du.group.setFocusSymbol(i,n,t,e)),this.context},unFocus:gm,drawStart:function(t,e){var n=this.context;return wm.call(this,"drawStart",[n,t,e]),n},drawEnd:function(){var t=this.context;return wm.call(this,"drawEnd",[t]),t}});function vm(){var t=Em("id",this.context.id);return Em(this.context.type+"Symbol",wm.call(this,"getSymbolByID",[t]))}function ym(t){var e=Em("id",this.context.id),n=vm.call(this),i={};return go(i,t,n),i=Em(this.context.type+"Symbol",i),wm.call(this,"setGraphicSymbol",[e,i]),this.context}var mm=Object.freeze({nearest:function(){var t=this.context.parent;return this.context.geometry.calcNearest(t.getGraphicList(),function(t){return t.getGeometry(),t.geometry})},bringToFront:function(){return wm.call(this,"moveToFront",[]),this.context},nearby:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=this.context,i=n.parent,r=i.parent,o=n.geometry;return"px"===e&&(t=xm(r,t,r.config.mapSet.sr)),o.calcNearby(i.getGraphicList(),t,function(t){return t.getGeometry(),t.geometry})},getBuffer:function(t,e){var n=this.context,i=n.parent.parent,r=n.geometry;return"px"===e&&(t=xm(i,t,n.getGeometry().sr)),r.calcBuffer(t).val()},remove:function(){var t=this.context.id,e=this.context.parent.parent.id,n=this.context.parent.id;pu(du.graphic.removeGraphic(e,n,t))},setOpacity:function(t){var e=Em("id",this.context.id),n=this.context.parent.id,i=this.context.parent.parent.id;return pu(du.graphic.setOpacity(this,i,n,e,t)),this.context},show:function(){var t=Em("id",this.context.id),e=this.context.parent.id,n=this.context.parent.parent.id;return pu(du.graphic.setVisible(this,n,e,t,!0)),this.context},hide:function(){var t=Em("id",this.context.id),e=this.context.parent.id,n=this.context.parent.parent.id;return pu(du.graphic.setVisible(this,n,e,t,!1)),this.context},panTo:function(){var t=Em("id",this.context.id);return wm.call(this,"panToGraphic",[t]),this.context},zoomTo:function(){var t=Em("id",this.context.id);return wm.call(this,"zoomToGraphic",[t]),this.context},getGeometry:function(){var t=this.context,e=t.geometry,n=wm.call(this,"getGeometryByID",[t.id]),i=new cm(n,void 0,e.sr);return e.set(i.val()).val()},setGeometry:function(t){var e=this.context,n=e.geometry,i=n.type;"polygon"!==i&&"holepolygon"!==i&&"multipolygon"!==i||(t=cm.fixPolygon(t));var r=new cm(t,i,n.sr);return n.set(r.val()),wm.call(this,"setGraphicGeometry",[e.id,r.val()]),this.context},getAttribute:function(){var t=this.context,e=t.parent,n=[e.parent.id,"group",e.id,"graphic",t.id,"attribute"];if(vu().map.hasIn(n))return"feature"===e.type?wm.call(this,"getAttribute"):vu().map.getIn(n).toJS()},setAttribute:function(t){var e=Em("id",this.context.id),n=this.context.parent.id,i=this.context.parent.parent.id;return Em("toObject",t),pu(du.graphic.setAttribute(i,n,e,t)),this.context},getSymbol:vm,setSymbol:ym,setInfoWindow:function(t){var e=Em("id",this.context.id),n=this.context.parent.id,i=this.context.parent.parent.id;return pu(du.graphic.setInfoWindow(this,i,n,e,t)),this.context},openInfoWindow:function(t){var e=Em("id",this.context.id),n=this.context.parent.id,i=this.context.parent.parent.id;return pu(du.graphic.openInfoWindow(this,i,n,e,t)),this.context},closeInfoWindow:function(){var t=Em("id",this.context.id),e=this.context.parent.id,n=this.context.parent.parent.id;return pu(du.graphic.removeInfoWindow(this,n,e,t)),this.context},setDraggable:function(t){var e=Em("id",this.context.id),n=this.context.parent.id,i=this.context.parent.parent.id;return Em("isTrueFalse",t),wm.call(this,"setDraggable",[e,t]),pu(du.graphic.setDraggable(i,n,e,t)),this.context},unFocus:function(){var t=Em("id",this.context.id),e=this.context.parent.id,n=this.context.parent.parent.id,i=vu().map.getIn([n,"group",e,"graphic",t,"symbol"]).toJS();return ym.call(this,i),this.context},focus:function(t){var e=Em("id",this.context.id),n=this.context.parent.id,i=this.context.parent.parent.id,r=this.context.type;gm.call({innerAPI:this.innerAPI,context:this.context.parent});var o=vm.call(this);pu(du.graphic.setSymbol(i,n,e,o));var s=[i,"group",n,"focus",r],a=vu().map.hasIn(s)?vu().map.getIn(s).toJS():{},u={};return go(u,t,a,o),u=Em(this.context.type+"Symbol",u),ym.call(this,u),this.context},getExtent:function(){var t=Em("id",this.context.id);return Em("extent",wm.call(this,"getGraphicExtent",[t]))},toGeoJSON:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.context.geometry.toGeoJSON(t)},drawStartEdit:function(){var t=this.context;return wm.call(this,"drawStartEdit",[t]),t},drawSaveEdit:function(){var t=this.context;return wm.call(this,"drawSaveEdit",[t]),t},drawCancelEdit:function(){var t=this.context;return wm.call(this,"drawCancelEdit",[t]),t},drawIsEditMode:function(){var t=this.context;return wm.call(this,"drawIsEditMode",[t])},measureArea:function(){return wm.call(this,"measureArea",[])},measureLine:function(){return wm.call(this,"measureLine",[])},measureMultiLine:function(){return wm.call(this,"measureMultiLine",[])}});function xm(t,e,n){var i=Math.abs(t.toPointGeometry([0,0])[0]-t.toPointGeometry([e,0])[0]);return 4326===n?1e5*i:i}function Em(t,e){if(!t)throw new TypeError(Object.keys(_s));if(!_s[t])throw new TypeError(t+" checker 不存在");if("object"===(void 0===t?"undefined":Ts(t))){e=void 0;var n={};return at(t,function(t,e){n[e]=_s[e]?_s[e](t):t}),n}return _s[t]?_s[t](e):e}function wm(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!this.innerAPI)throw new TypeError("context 需為 core context");var n=this.innerAPI[t].apply(this.context.origin,e);return-1!==["getGroupList","getGraphicList","getLayerList"].indexOf(t)&&Em("nativeList",n),-1!==["setMapEvent","setLayerEvent","setGraphicEvent","setGroupEvent","addLabel","addMarker","addPolyline","addPolygon","addCircle","addImage","addGroup","addLayer","rebuildMap","newMap"].indexOf(t)&&Em("nativeObject",n),-1!==["getLayer","getGroup","getGraphic"].indexOf(t)&&void 0!==n&&Em("nativeObject",n),n}function _m(t,n){if(!ho(t))throw new TypeError(t+" 格式需為物件");var i={};return at(t,function(t,e){i[e]=function(){return!0===pi.mapCore.debug&&console.log("log: extend."+n+"."+e),t.apply(this,arguments)}}),i}function Im(t,n,i){var r={};return at(t,function(t,e){r[e]=function(){if(!this.origin)throw new Error("The object has been removed");return!0===pi.mapCore.debug&&console.log("log: "+i+"."+e),t.apply({innerAPI:n,context:this},arguments)}}),r}var bm=/\s+/,Mm=function(t,e,n,i,r){if(!e)return e;var o=0,s=void 0;if(n&&bm.test(n))for(s=n.split(bm);o<s.length;o+=1)e=t(e,s[o],i,r);else e=t(e,n,i,r);return e},Sm=function(t,e,n){if(!e||!t[e])return t;if(n){var i=gi(n)?"name":"callback";if(!t[e])return t;t[e]=t[e].map(function(t){return t[i]===n&&(t.isRun=!1),t})}else{if(!t[e])return t;t[e]=t[e].map(function(t){return t.isRun=!1,t})}return t},Nm=function(t,e,n){if(!e||!t[e])return t;if(n){var i=gi(n)?"name":"callback";if(!t[e])return t;t[e]=t[e].map(function(t){return t[i]===n&&(t.isRun=!0),t})}else{if(!t[e])return t;t[e]=t[e].map(function(t){return t.isRun=!0,t})}return t},Cm=function(t,e,n,i){if(!e||!t[e])return t;if(n){var r=gi(n)?"name":"callback";t[e].forEach(function(t){!0===t.isRun&&t[r]===n&&(t.wrapper._callback&&t.wrapper._callback(),t.callback.apply(t.ctx,i))})}else t[e].forEach(function(t){!0===t.isRun&&(t.wrapper._callback&&t.wrapper._callback(),t.callback.apply(t.ctx,i))});return t},Lm=function(t,e,n,i){if(!e||!t[e])return t;var r=i.ctx,o=i.innerAPI;return n?(t[e]=t[e].filter(function(t){return t.callback!==n}),0===t[e].length&&(r._handlers[e]&&wm.call({innerAPI:o,context:{origin:r._handlers[e]}},"removeEvent",[]),delete t[e])):(r._handlers[e]&&wm.call({innerAPI:o,context:{origin:r._handlers[e]}},"removeEvent",[]),delete t[e]),t},Pm=function(t,o,e,n){if(!o||!e)return t;var i=void 0,s=n.ctx,r=n.innerAPI;switch(s._handlers||(s._handlers={}),i=function(t){s.trigger(o,t)},s.constructor){case ks:Em("isMapEventType",o)&&!s._events[o]&&(s._handlers[o]=wm.call({innerAPI:r,context:s},"setMapEvent",[o,i]));break;case zs:case js:case Bs:case Vs:Em("isLayerEventType",o)&&!s._events[o]&&(s._handlers[o]=wm.call({innerAPI:r,context:s},"setLayerEvent",[s.id,o,i]));break;case Xs:Em("isGroupEventType",o)&&!s._events[o]&&(i=function(e,t){if(e){var n=void 0,i=s.id,r=s.parent.id;vu().map.getIn([r,"group",i,"graphic"]).forEach(function(t){t.get("instance").origin===e&&(n=t.get("instance"))}),s.trigger(o,n,t)}else s.trigger(o,t)},s._handlers[o]=wm.call({innerAPI:r,context:s},"setGroupEvent",[s.id,o,i]));break;case Ws:Em("isGraphicEventType",o)&&!s._events[o]&&(s._handlers[o]=wm.call({innerAPI:r,context:s},"setGraphicEvent",[s.id,o,i]))}var a=t[o]||(t[o]=[]),u=n.name;return a.push({ctx:n.ctx,callback:e,wrapper:i,name:u,isRun:!0}),t};function Om(t,e,n){Em("isText",t);var i=n||{},r=i.context||this.context,o=i.name||void 0;return r._events=Mm(Pm,r._events,t,e,{ctx:r,name:o,innerAPI:this.innerAPI}),r}function Rm(t,e){var n=this.context;return n._events=Mm(Lm,n._events,t,e,{ctx:n,name:name,innerAPI:this.innerAPI}),n}var Tm=Object.freeze({on:Om,off:Rm,pause:function(t,e){var n=this.context;return n._events=Mm(Sm,n._events,t,e),n},resume:function(t,e){var n=this.context;return n._events=Mm(Nm,n._events,t,e),n},trigger:function(t){for(var e=this.context,n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Mm(Cm,e._events,t,void 0,i),e},once:function(n,i,t){var r=this;return Om.call(this,n,function t(e){i(e),Rm.call(r,n,t)},t)}});function Am(o,s){var t=wm.call(o,"getGroupList"),a=vu().map.getIn([s,"group"]);t.forEach(function(t,e){var n=wm.call(o,"getOriginInfo",[t,"group"]),i=n.type||"general",r=n.id||Rs("group-"+i+"-");a.has(r)||pu(du.group.addGroup(s,i,r,{origin:t})),pu(du.group.setIndex(s,r,e))})}function Dm(t,e,n){var i=this.context.id,r=e||Rs("group-"+t+"-");return pu(du.group.addGroup(i,t,r,n)),vu().map.getIn([i,"group",r,"instance"])}function Fm(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=arguments[4],o=this.context.id,s=n&&n.id?n.id:Rs("layer-"+t+"-");return"image"===t&&(n=e||{},e=""),pu(du.layer.addLayer(o,{id:s,type:t,url:e,option:n},i,r)),vu().map.getIn([o,"layer",s,"instance"])}function Gm(t,e){var n=[];return vu().map.getIn([t,e]).sort(function(t,e){return t.get("order")-e.get("order")}).forEach(function(t){n.push(t.get("instance").origin)}),n}var qm=Object.freeze({nearest:function(t,e){if(!t)throw new Error("target is required");var n=this.context,i=t.geometry,r=[];return e?e.forEach(function(t){r=r.concat(t.getGraphicList())}):r=n.getGraphicList(),i.calcNearest(r,function(t){return t.getGeometry(),t.geometry})},sync:function(){var o,s,t,a,e=this.context,n=e.id;return"esri"===e.type&&(s=n,t=wm.call(o=this,"getLayerList"),a=vu().map.getIn([s,"layer"]),t.forEach(function(t,e){var n=wm.call(o,"getOriginInfo",[t,"layer"]),i=n.type||"general",r=n.id||Rs("layer-"+i+"-");a.has(r)||pu(du.layer.addLayer(s,{id:r,type:i,origin:t})),pu(du.layer.setIndex(s,r,e))}),Am(this,n),vu().map.getIn([n,"group"]).forEach(function(t){t.get("instance").sync()})),this.context},nearby:function(t,e,n,i){var r=this.context;"px"===i&&(n=xm(r,n,r.config.mapSet.sr));var o=void 0;o=e.id?e.geometry:new cm(e,"point");var s=[];return t?t.forEach(function(t){s=s.concat(t.getGraphicList())}):s=r.getGraphicList(),o.calcNearby(s,n,function(t){return t.getGeometry(),t.geometry})},getExtent:function(){return wm.call(this,"getExtent")},setExtent:function(t,e){return t=Em("extent",t),wm.call(this,"setExtent",[t,e]),this.context},getCenter:function(){var t=this.context.id;if(vu().map.has(t)){var e=vu().map.get(t),n=wm.call(this,"getCenter");return n.type="point",n.sr=e.getIn(["option","sr"]),n}return[]},centerAt:function(t,e){var n=this.context.id,i=vu().map.get(n).get("sr"),r=new cm(t,"point",i),o=Em("isPositiveZero",e);return wm.call(this,"centerAt",[r.val(),o]),this.context},getZoom:function(){return wm.call(this,"getZoom",arguments)},zoomAt:function(t){return wm.call(this,"zoomAt",[t]),this.context},zoomIn:function(){var t=wm.call(this,"getZoom",arguments)+1;return wm.call(this,"zoomAt",[t]),this.context},zoomOut:function(){var t=wm.call(this,"getZoom",arguments)-1;return wm.call(this,"zoomAt",[t]),this.context},addGroup:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Dm.call(this,"graphic",t.id,{opacity:t.opacity,maxZoom:t.maxZoom,minZoom:t.minZoom})},addFeature:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Dm.call(this,"feature",e.id,{url:t,loaded:function(t){n.sync(),t&&(n.origin=t),e.loaded&&e.loaded(n)},updated:function(){n.sync(),e.updated&&e.updated(n)},opacity:e.opacity,index:e.index,order:e.order});return n},addHeatMap:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Dm.call(this,"heatmap",e.id,{loaded:function(t){setTimeout(function(){t&&(n.origin=t),n.sync(),e.loaded&&e.loaded(n)},0)},url:gi(t)&&t,pointData:!gi(t)&&ws(t),colors:e.colors,radius:e.radius,maxIntensity:e.maxIntensity,opacity:e.opacity,index:e.index,order:e.order});return n},addCluster:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=Dm.call(this,"cluster",e.id,{pointData:ws(t),loaded:function(t){t&&(n.origin=t),e.loaded&&e.loaded(n)},distance:e.distance,opacity:e.opacity,index:e.index,order:e.order});return n},addLayer:Fm,hasLayer:function(e){var t=this.context.id;e=Em("id",e);var n=!1;return vu().map.getIn([t,"layer"]).forEach(function(t){t.get("id")===e&&(n=!0)}),n},hasGroup:function(e){var t=this.context.id;e=Em("id",e);var n=!1;return vu().map.getIn([t,"group"]).forEach(function(t){t.get("id")===e&&(n=!0)}),n},hasGraphic:function(e){var t=this.context.id;e=Em("id",e);var n=!1;return vu().map.getIn([t,"group"]).forEach(function(t){!0!==n&&t.get("graphic").forEach(function(t){t.get("id")===e&&(n=!0)})}),n},getLayer:function(t){var e=this.context.id;return t=Em("id",t),vu().map.getIn([e,"layer",t,"instance"])},getGroup:function(t){var e=this.context.id;return t=Em("id",t),vu().map.getIn([e,"group",t,"instance"])},getGraphic:function(e){var t=this.context.id;e=Em("id",e);var n=void 0;return vu().map.getIn([t,"group"]).forEach(function(t){void 0===n&&t.get("graphic").forEach(function(t){t.get("id")===e&&(n=t.get("instance"))})}),n},getLayerList:function(){var t=this.context.id,e=[];return vu().map.getIn([t,"layer"]).sort(function(t,e){return t.get("index")-e.get("index")}).forEach(function(t){e.push(t.get("instance"))}),e},getGroupList:function(){var t=this.context.id;"esri"===this.context.type&&Am(this,t);var e=[];return vu().map.getIn([t,"group"]).sort(function(t,e){return t.get("index")-e.get("index")}).forEach(function(t){e.push(t.get("instance"))}),e},getGraphicList:function(){var t=this.context.id,e=[];return vu().map.getIn([t,"group"]).forEach(function(t){t.get("graphic").forEach(function(t){e.push(t.get("instance"))})}),e},findGraphic:function(e,n){var t=this.context.id;e=Em("isText",e);var i=[];return vu().map.getIn([t,"group"]).forEach(function(t){t.get("graphic").forEach(function(t){void 0===n?t.hasIn(["attribute",e])&&i.push(t.get("instance")):t.getIn(["attribute",e])===n&&i.push(t.get("instance"))})}),i},setLayerListIndex:function(i){i=Em("indexObj",i);var r=wm.call(this,"getLayerList");return Object.keys(i).forEach(function(t){var e=i[t].origin,n=r.indexOf(e);-1!==n&&(r.splice(n,1),r.splice(t,0,e))}),wm.call(this,"setLayerList",[r]),this.context},setGroupListIndex:function(i){i=Em("indexObj",i);var r=wm.call(this,"getGroupList");return Object.keys(i).forEach(function(t){var e=i[t].origin,n=r.indexOf(e);-1!==n&&(r.splice(n,1),r.splice(t,0,e))}),wm.call(this,"setGroupList",[r]),this.context},setLayerListOrder:function(e){var n=this.context.id;e=Em("orderObj",e),Object.keys(e).forEach(function(t){pu(du.layer.setOrder(n,e[t].id,+t))});var t=Gm(n,"layer");return wm.call(this,"setLayerList",[t]),this.context},setGroupListOrder:function(e){var n=this.context.id;e=Em("orderObj",e),Object.keys(e).forEach(function(t){pu(du.layer.setOrder(n,e[t].id,+t))});var t=Gm(n,"group");return wm.call(this,"setGroupList",[t]),this.context},openInfoWindow:function(t,e){return function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],i=this.context.id,r=void 0;if(vu().map.getIn([i,"group"]).forEach(function(t){r||t.get("graphic").forEach(function(t){t.get("id")===e&&(r=t.get("instance"))})}),r)return mm[t].apply({innerAPI:this.innerAPI,context:r},n);throw new Error("graphicID 不存在")}.call(this,t,"openInfoWindow",[e]),this.context},openInfoWindowByAny:function(t,e){var n=Em("infoWindowOption",e),i=this.context.id,r=vu().map.getIn([i,"option","sr"]),o=new cm(t,"point",r);return pu(du.map.setInfoWindow(i,o,n)),wm.call(this,"openInfoWindowByAny",[o.val(),n]),this.context},closeInfoWindow:function(){var t=this.context.id;return pu(du.map.removeInfoWindow(t)),wm.call(this,"closeInfoWindow"),this.context},setNativeMapType:function(t){var n=this;t=Em("isText",t);var e=wm.call(this,"setNativeMapType",[t]);if(e){var i=this.context;i.origin=e;var r=i._events;i._events={},at(r,function(t,e){Om.call(n,e)}),i._events=r}return this.context},setBaseLayer:function(t,e){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=void 0,s=this.context;if(!0===r){var a=wm.call(this,"newMap");a&&(o=s.origin,s.origin=a)}i.index=0,i.order=void 0;var u=Fm.call(this,t,e,i,!0,o);if(!0===r){var h=s._events;s._events={},at(h,function(t,e){Om.call(n,e)}),s._events=h}return u},getScale:function(){return Em("isPositiveZero",wm.call(this,"getScale"))},addLayerType:function(t,e){var n=Em("customLayerType",t);return Em("isCallback",e),Vo[n]=t,wm.call(this,"addLayerType",[n,e]),this.context},toPointGeometry:function(t){var e=this.context.id,n=Em("screenPoint",t);if(vu().map.has(e)){var i=vu().map.get(e),r=wm.call(this,"toPointGeometry",[n]);return r.type="point",r.sr=i.getIn(["option","sr"]),r}return[]},toScreenPoint:function(t){var e=this.context.config.mapSet.sr,n=new cm(t,"point",e).val(),i=wm.call(this,"toScreenPoint",[n]);return Em("screenPoint",i),i}});var km=Object.freeze({remove:function(){var t=this.context.id,e=this.context.parent.id;pu(du.layer.removeLayer(e,t))},setOpacity:function(t){var e=this.context.id,n=this.context.parent.id;return pu(du.layer.setOpacity(this,n,e,t)),this.context},show:function(){var t=this.context.id,e=this.context.parent.id;return pu(du.layer.setVisible(this,e,t,!0)),this.context},hide:function(){var t=this.context.id,e=this.context.parent.id;return pu(du.layer.setVisible(this,e,t,!1)),this.context},setIndex:function(t){var e=this.context,n=wm.call({innerAPI:this.innerAPI,context:this.context.parent},"getLayerList"),i=n.indexOf(e.origin);return-1===i||(n.splice(i,1),n.splice(t,0,e.origin),wm.call({innerAPI:this.innerAPI,context:this.context.parent},"setLayerList",[n])),this.context},setOrder:function(t){var e=Em("id",this.context.id),n=this.context.parent.id;return pu(du.layer.setOrder(n,e,+t)),this.context},bringToFront:function(){var t=Em("id",this.context.id);return wm.call(this,"bringToFront",[t]),this.context}});var zm=Object.freeze({setDynamicLayer:function(t){var e=Em("id",this.context.id),n=this.context.parent.id;Em("visibleLayerList",t),pu(du.layer.setArgs(n,e,t));var i=wm.call(this,"setDynamicLayer",[e,t]);return this.context.origin=i,this.context}}),jm=Object.prototype.hasOwnProperty,Bm=kt(function(t,e){if(V(e)||et(e))Nt(e,nt(e),t);else for(var n in e)jm.call(e,n)&&St(t,n,e[n])});var Um=Object.freeze({setWMSLayer:function(t){var e=Em("id",this.context.id),n=this.context.parent.id;Em("toObject",t);var i=this.context._url.split("?"),r=Gs(i,2),o=r[0],s=r[1],a={},u=o;if(s){s.split("&").forEach(function(t){var e=t.split("="),n=Gs(e,2),i=n[0],r=n[1];a[i]=r});var h=Bm(a,t),c=[];at(h,function(t,e){void 0!==t&&c.push(e+"="+t)}),u=o+"?"+c.join("&")}pu(du.layer.setArgs(n,e,t));var l=wm.call(this,"setWMSLayer",[u]);return this.context.origin=l,this.context._url=u,this.context}});var Vm=Object.freeze({addImage:function(t,e,n){var i=this.context.parent.id,r=this.context.id,o=n&&n.id||Rs("image-");return pu(du.image.addImage(this,i,r,{id:o,url:t,extent:e,option:n})),vu().map.getIn([i,"layer",r,"image",o,"instance"])},clear:function(){var t=this.context.parent.id,e=this.context.id;return pu(du.layer.clearImage(this,t,e)),this.context}});var Ym=Object.freeze({remove:function(){var t=this.context.id,e=this.context.parent.id,n=this.context.parent.parent.id;pu(du.image.removeImage(n,e,t))},show:function(){var t=this.context.id,e=this.context.parent.id,n=this.context.parent.parent.id;return pu(du.image.setVisible(this.context,n,e,t,!0)),this.context},hide:function(){var t=this.context.id,e=this.context.parent.id,n=this.context.parent.parent.id;return pu(du.image.setVisible(this.context,n,e,t,!1)),this.context}});function Xm(t,e){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.setAttribute("src",t),e&&(i.onload=e),n.appendChild(i)}Vt(Array.prototype,{coordTrans:cm.coordTrans});var Wm={debug:!1,version:"2.3.0",loader:function(t,e){if(!t)throw new Error("config is required");if(!t.type)throw new Error("type is required");if(!e)throw new Error("callback is required");var n,i,r,o,s=t.type,a=Vt({},t);switch(s){case"esri":pi.dojoConfig=a,n=a.css,i=function(){Xm(a.js,function(){pi.require(["mapcore-esri"],function(t){e(t)})})},r=document.getElementsByTagName("head")[0],(o=document.createElement("link")).rel="stylesheet",o.type="text/css",o.media="screen",o.href=n,i&&(o.onload=i),r.appendChild(o);break;case"google":Xm(a.js,function(){require.config(a),pi.require(["mapcore-google"],function(t){e(t)})})}},importStore:function(n,t){var i=JSON.parse(t);Object.keys(i).forEach(function(t){var s=i[t],e={};e.mapSet=s.option,e[s.type]=s[s.type],n(s.id,e).then(function(e){Object.keys(s.layer).forEach(function(t){var n=s.layer[t],i=void 0;switch(n.type){case"dynamic":i=e.addLayer(n.type,n.url,n.option).setDynamicLayer(n.args);break;case"wms":i=e.addLayer(n.type,n.url,n.option).setWMSLayer(n.args);break;case"image":i=e.addLayer(n.type,n.url,n.option),n.image&&Object.keys(n.image).forEach(function(t){var e=n.image[t];i.addImage(e.url,e.extent,e.option)});break;default:i=e.addLayer(n.type,n.url,n.option)}i.setOrder(n.order),!1===n.visible&&i.hide()}),Object.keys(s.group).forEach(function(t){var r=s.group[t],o=e.addGroup(r.option).setOrder(r.order);switch(!1===r.visible&&o.hide(),r.focus&&Object.keys(r.focus).forEach(function(t){o.setFocusSymbol(t,r.focus[t])}),r.type){case"graphic":Object.keys(r.graphic).forEach(function(t){var e=r.graphic[t],n=void 0;switch(e.type){case"label":n=o.addLabel;break;case"marker":n=o.addMarker;break;case"polyline":n=o.addPolyline;break;case"polygon":n=o.addPolygon;break;case"circle":n=o.addCircle}var i=n.call(o,e.geometry,e.symbol,e.attribute,e.option);!1===e.visible&&i.hide()});break;case"feature":e.addFeature(r.option.url,{id:r.id});break;case"cluster":e.addCluster(r.option.pointData,{id:r.id});break;case"heatmap":e.addHeatMap(r.option.url,{id:r.id})}})})})},exportStore:function(){var a=vu().api;vu().map.forEach(function(t){t.get("instance").sync()});var u=[];return vu().map.forEach(function(t){var e=t.get("option").toJS(),n=t.get("instance").origin,i=a.getExtent.call(n),r={id:t.get("id"),type:t.get("type"),option:{initMapExtent:[i.xmin,i.ymin,i.xmax,i.ymax],maxZoom:e.maxZoom,minZoom:e.minZoom,sr:e.sr}};if(r[r.type]=t.get(r.type).toJS(),t.has("layer")){var o=[];t.get("layer").sort(function(t,e){return t.get("index")-e.get("index")}).forEach(function(t){if("baseLayer"!==t.get("id")){var e=t.get("option").toJS();e.index=void 0;var n={id:t.get("id"),type:t.get("type"),url:t.get("url"),order:t.get("order"),visible:t.get("visible"),option:e,args:t.has("args")?t.get("args").toJS():void 0};if("image"===n.type&&t.has("image")){var i=[];t.get("image").sort(function(t,e){return t.get("index")-e.get("index")}).forEach(function(t){i.push({id:t.get("id"),type:t.get("type"),url:t.get("url"),extent:t.get("extent").toJS(),option:t.get("option").toJS()})}),n.image=i}o.push(n)}}),r.layer=o}if(t.has("group")){var s=[];t.get("group").sort(function(t,e){return t.get("index")-e.get("index")}).forEach(function(t){var e=t.get("option").toJS();e.index=void 0;var n={id:t.get("id"),type:t.get("type"),visible:t.get("visible"),order:t.get("order"),option:e,focus:t.has("focus")?t.get("focus").toJS():void 0};if(t.has("graphic")&&"graphic"===n.type){var i=[];t.get("graphic").sort(function(t,e){return t.get("index")-e.get("index")}).forEach(function(t){i.push({id:t.get("id"),type:t.get("type"),visible:t.get("visible"),attribute:t.get("attribute").toJS(),geometry:a.getGeometryByID.call(t.get("instance").origin,t.get("id")),symbol:a.getSymbolByID.call(t.get("instance").origin,t.get("id")),option:t.get("option").toJS()})}),n.graphic=i}s.push(n)}),r.group=s}u.push(r)}),JSON.stringify(u)},wrap:function(e){var n=void 0;return vu().map.forEach(function(t){t.get("group").forEach(function(t){t.get("graphic").forEach(function(t){t.get("instance").origin===e&&(n=t.get("instance"))})})}),n},getMapList:function(){var e=[];return vu().map.forEach(function(t){e.push(t.get("instance"))}),e},tools:{toGeoJSON:function(t){return console.warn("請改用 graphic.toGeoJSON()"),new cm(t).toGeoJSON()},toGeometry:function(t,e){return cm.toGeometry(t,e).val()},toDegree:cm.toDegree,toDecimal:cm.toDecimal,getBound:cm.getBound,coordTrans:cm.coordTrans,nearest:function(t,e){return new cm(t,"point").calcNearest(e,function(t){return new cm(t)})},union:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n.map(function(t){return new cm(t)}),o=new cm(t).union(r);if(o)return o.val()},intersect:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n.map(function(t){return new cm(t)}),o=new cm(t).intersect(r);if(o)return o.val()},difference:function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n.map(function(t){return new cm(t)}),o=new cm(t).difference(r);if(o)return o.val()},ellipse:function(t,e,n,i){return cm.ellipse(new cm(t,"point"),e/1e3,n/1e3,i).val()},sector:function(t,e,n,i){return cm.sector(new cm(t,"point"),e/1e3,n,i).val()},move:function(t,e){var n=cm.move(new cm(t),new cm(e,"point"));if(n)return n.val()}},turf:{booleanContains:function(t,e){var n=Ee(t),i=Ee(e),r=me(t),o=me(e),s=xe(t),a=xe(e);switch(n){case"Point":switch(i){case"Point":return _e(s,a);default:throw new Error("feature2 "+i+" geometry not supported")}case"MultiPoint":switch(i){case"Point":return function(t,e){var n,i=!1;for(n=0;n<t.coordinates.length;n++)if(_e(t.coordinates[n],e.coordinates)){i=!0;break}return i}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++){for(var i=!1,r=0;r<t.coordinates.length;r++)if(_e(e.coordinates[n],t.coordinates[r])){i=!0;break}if(!i)return!1}return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"Point":return ve(o,r,!0);case"LineString":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(ve({type:"Point",coordinates:e.coordinates[i]},t,!0)&&(n=!0),!ve({type:"Point",coordinates:e.coordinates[i]},t,!1))return!1;return n}(r,o);case"MultiPoint":return function(t,e){for(var n=!1,i=0;i<e.coordinates.length;i++)if(ve(e.coordinates[i],t,!0)&&(n=!0),!ve(e.coordinates[i],t))return!1;return!!n}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"Point":return te(o,r,!0);case"LineString":return function(t,e){var n,i,r=!1,o=0,s=ge(t),a=ge(e);if(!we(s,a))return!1;for(;o<e.coordinates.length-1;o++){var u=(n=e.coordinates[o],i=e.coordinates[o+1],[(n[0]+i[0])/2,(n[1]+i[1])/2]);if(te({type:"Point",coordinates:u},t,!0)){r=!0;break}}return r}(r,o);case"Polygon":return function(t,e){var n=ge(t),i=ge(e);if(!we(n,i))return!1;for(var r=0;r<e.coordinates[0].length;r++)if(!te(e.coordinates[0][r],t))return!1;return!0}(r,o);case"MultiPoint":return function(t,e){for(var n=0;n<e.coordinates.length;n++)if(!te(e.coordinates[n],t,!0))return!1;return!0}(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},booleanCrosses:function(t,e){var n=Nn(t),i=Nn(e),r=Sn(t),o=Sn(e);switch(n){case"MultiPoint":switch(i){case"LineString":return Cn(r,o);case"Polygon":return Pn(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"LineString":switch(i){case"MultiPoint":return Cn(o,r);case"LineString":return function(t,e){if(0<mn(t,e).features.length)for(var n=0;n<t.coordinates.length-1;n++)for(var i=0;i<e.coordinates.length-1;i++){var r=!0;if(0!==i&&i!==e.coordinates.length-2||(r=!1),On(t.coordinates[n],t.coordinates[n+1],e.coordinates[i],r))return!0}return!1}(r,o);case"Polygon":return Ln(r,o);default:throw new Error("feature2 "+i+" geometry not supported")}case"Polygon":switch(i){case"MultiPoint":return Pn(o,r);case"LineString":return Ln(o,r);default:throw new Error("feature2 "+i+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}},booleanOverlap:function(t,n){if(!t)throw new Error("feature1 is required");if(!n)throw new Error("feature2 is required");var e=hi(t);if(e!==hi(n))throw new Error("features must be of the same type");if("Point"===e)throw new Error("Point geometry not supported");if(new si({precision:6}).compare(t,n))return!1;var i=0;switch(e){case"MultiPoint":var r=ai(t),o=ai(n);r.forEach(function(e){o.forEach(function(t){e[0]===t[0]&&e[1]===t[1]&&i++})});break;case"LineString":case"MultiLineString":ui(t,function(e){ui(n,function(t){(function(t,e,o){var n=[];o=o||0;var s,a=sn();return a.load(dn(t)),$n(e,function(i){var r=!1;Qn(a.search(i),function(t){if(!1===r){var e=Zn(i).sort(),n=Zn(t).sort();An(e,n)?(r=!0,s=s?ti(s,i):i):(0===o?ve(e[0],t)&&ve(e[1],t):Jn(t,e[0]).properties.dist<=o&&Jn(t,e[1]).properties.dist<=o)?(r=!0,s=s?ti(s,i):i):(0===o?ve(n[0],i)&&ve(n[1],i):Jn(i,n[0]).properties.dist<=o&&Jn(i,n[1]).properties.dist<=o)&&(s=s?ti(s,t):t)}}),!1===r&&s&&(n.push(s),s=void 0)}),s&&n.push(s),Kn(n)})(e,t).features.length&&i++})});break;case"Polygon":case"MultiPolygon":ui(t,function(e){ui(n,function(t){mn(e,t).features.length&&i++})})}return 0<i},intersect:li,helpers:Fe},Geometry:cm,extend:function(t,e){switch(t){case"map":Vt(ks.prototype,_m(e,"map"));break;case"layer":Vt(zs.prototype,_m(e,"layer"));break;case"group":Vt(Xs.prototype,_m(e,"group"));break;case"graphic":Vt(Ws.prototype,_m(e,"graphic"));break;default:throw new Error(t+" 格式不符，請使用 map, layer, group, graphic")}},create:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],r=arguments[2];return Vt(qs.prototype,Im(Tm,e,"core")),Vt(ks.prototype,Im(qm,e,"map")),Vt(zs.prototype,Im(km,e,"layer")),Vt(js.prototype,Im(zm,e,"dynamicLayer")),Vt(Bs.prototype,Im(Um,e,"wmsLayer")),Vt(Vs.prototype,Im(Vm,e,"imageLayer")),Vt(Ys.prototype,Im(Ym,e,"image")),Vt(Xs.prototype,Im(pm,e,"group")),Vt(Ws.prototype,Im(mm,e,"graphic")),at(e,function(t,e){-1===fi.indexOf(e)&&console.warn("請移除 "+e+" 實作")}),at(fi,function(t){e[t]||console.warn("缺少: "+t+" 實作")}),pu(du.api.addAPI(e)),function(t,e){var n=du.map.addMap(i,t,r,e);return pu(n.action),n.promise}}};return Wm});